/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */

/*!
 * jQuery JavaScript Library v2.2.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-04-05T19:26Z
 */

/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/*!
 * jQuery Browser Plugin 0.1.0
 * https://github.com/gabceb/jquery-browser-plugin
 *
 * Original jquery-browser code Copyright 2005, 2015 jQuery Foundation, Inc. and other contributors
 * http://jquery.org/license
 *
 * Modifications Copyright 2015 Gabriel Cebrian
 * https://github.com/gabceb
 *
 * Released under the MIT license
 *
 * Date: 05-07-2015
 */

/*
jed.js
v0.5.0beta

https://github.com/SlexAxton/Jed
-----------
A gettext compatible i18n library for modern JavaScript Applications

by Alex Sexton - AlexSexton [at] gmail - @SlexAxton
WTFPL license for use
Dojo CLA for contributions

Jed offers the entire applicable GNU gettext spec'd set of
functions, but also offers some nicer wrappers around them.
The api for gettext was written for a language with no function
overloading, so Jed allows a little more of that.

Many thanks to Joshua I. Miller - unrtst@cpan.org - who wrote
gettext.js back in 2008. I was able to vet a lot of my ideas
against his. I also made sure Jed passed against his tests
in order to offer easy upgrades -- jsgettext.berlios.de
*/

// Underscore 1.3.0 was used to port and is licensed

/**
   sprintf() for JavaScript 0.7-beta1
   http://www.diveintojavascript.com/projects/javascript-sprintf

   Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions are met:
       * Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.
       * Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in the
         documentation and/or other materials provided with the distribution.
       * Neither the name of sprintf() for JavaScript nor the
         names of its contributors may be used to endorse or promote products
         derived from this software without specific prior written permission.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY
   DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
   ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

//! moment.js
//! version : 2.18.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*
    This program is distributed under the terms of the MIT license.
    Please see the LICENSE file for details.

    Copyright 2006-2008, OGG, LLC
*/

/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS PUB 180-1
 * Version 2.1a Copyright Paul Johnston 2000 - 2002.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */

/*
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */

/* Lo-Dash Template Loader v1.0.1
 * Copyright 2015, Tim Branyen (@tbranyen).
 * loader.js may be freely distributed under the MIT license.
 */

//     (c) 2010-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*
  Copyright 2010, François de Metz <francois@2metz.fr>
*/

/*!
 * Backbone.Overview 
 *
 * Copyright (c) 2014, JC Brand <jc@opkode.com>
 * Licensed under the Mozilla Public License (MPL) 
 */

// Converse.js (A browser based XMPP chat client)
// http://conversejs.org
//
// Copyright (c) 2012-2017, Jan-Carel Brand <jc@opkode.com>
// Licensed under the Mozilla Public License (MPLv2)
//

/**
 * Simple, lightweight, usable local autocomplete library for modern browsers
 * Because there weren’t enough autocomplete scripts in the world? Because I’m completely insane and have NIH syndrome? Probably both. :P
 * @author Lea Verou http://leaverou.github.io/awesomplete
 * MIT license
 */

/*
* Based on Ping Strophejs plugins (https://github.com/metajack/strophejs-plugins/tree/master/ping)
* This plugin is distributed under the terms of the MIT licence.
* Please see the LICENCE file for details.
*
* Copyright (c) Markus Kohlhase, 2010
* Refactored by Pavel Lang, 2011
* AMD Support added by Thierry
*/

// Converse.js (A browser based XMPP chat client)
// http://conversejs.org
//
// Copyright (c) 2012-2017, JC Brand <jc@opkode.com>
// Licensed under the Mozilla Public License (MPLv2)
//

!function(e,t){"function"==typeof define&&define.amd?define([],t):e.converse=t()}(this,function(){var requirejs,require,define;return function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,r,o,s,a,u,l,c,d,h,f,p=t&&t.split("/"),m=_.map,g=m&&m["*"]||{};if(e){for(e=e.split("/"),s=e.length-1,_.nodeIdCompat&&b.test(e[s])&&(e[s]=e[s].replace(b,"")),"."===e[0].charAt(0)&&p&&(f=p.slice(0,p.length-1),e=f.concat(e)),c=0;c<e.length;c++)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(0===c||1===c&&".."===e[2]||".."===e[c-1])continue;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((p||g)&&m){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),p)for(d=p.length;d>0;d-=1)if(r=m[p.slice(0,d).join("/")],r&&(r=r[i])){o=r,a=c;break}if(o)break;!u&&g&&g[i]&&(u=g[i],l=c)}!o&&u&&(o=u,a=l),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function i(t,n){return function(){var i=y.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),d.apply(e,i.concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function o(e){return function(t){p[e]=t}}function s(n){if(t(m,n)){var i=m[n];delete m[n],g[n]=!0,c.apply(e,i)}if(!t(p,n)&&!t(g,n))throw new Error("No "+n);return p[n]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return e?a(e):[]}function l(e){return function(){return _&&_.config&&_.config[e]||{}}}var c,d,h,f,p={},m={},_={},g={},v=Object.prototype.hasOwnProperty,y=[].slice,b=/\.js$/;h=function(e,t){var i,o=a(e),u=o[0],l=t[1];return e=o[1],u&&(u=n(u,l),i=s(u)),u?e=i&&i.normalize?i.normalize(e,r(l)):n(e,l):(e=n(e,l),o=a(e),u=o[0],e=o[1],u&&(i=s(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:i}},f={require:function(e){return i(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:l(e)}}},c=function(n,r,a,l){var c,d,_,v,y,b,w,x=[],S=typeof a;if(l=l||n,b=u(l),"undefined"===S||"function"===S){for(r=!r.length&&a.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],b),d=v.f,"require"===d)x[y]=f.require(n);else if("exports"===d)x[y]=f.exports(n),w=!0;else if("module"===d)c=x[y]=f.module(n);else if(t(p,d)||t(m,d)||t(g,d))x[y]=s(d);else{if(!v.p)throw new Error(n+" missing "+d);v.p.load(v.n,i(l,!0),o(d),{}),x[y]=p[d]}_=a?a.apply(p[n],x):void 0,n&&(c&&c.exports!==e&&c.exports!==p[n]?p[n]=c.exports:_===e&&w||(p[n]=_))}else n&&(p[n]=a)},requirejs=require=d=function(t,n,i,r,o){if("string"==typeof t)return f[t]?f[t](n):s(h(t,u(n)).f);if(!t.splice){if(_=t,_.deps&&d(_.deps,_.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?c(e,t,n,i):setTimeout(function(){c(e,t,n,i)},4),d},d.config=function(e){return d(e)},requirejs._defined=p,define=function(e,n,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),t(p,e)||t(m,e)||(m[e]=[e,n,i])},define.amd={jQuery:!0}}(),define("almond",function(){}),function(e){function t(e,t,n,i){var r,o,s,a,u,l,d,f,p=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!i&&((t?t.ownerDocument||t:H)!==D&&j(t),t=t||D,L)){if(11!==m&&(l=ge.exec(e)))if(r=l[1]){if(9===m){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(p&&(s=p.getElementById(r))&&q(t,s)&&s.id===r)return n.push(s),n}else{if(l[2])return K.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&w.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(r)),n}if(w.qsa&&!W[e+" "]&&(!O||!O.test(e))){if(1!==m)p=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(ye,"\\$&"):t.setAttribute("id",a=P),d=k(e),o=d.length,u=he.test(a)?"#"+a:"[id='"+a+"']";o--;)d[o]=u+" "+h(d[o]);f=d.join(","),p=ve.test(e)&&c(t.parentNode)||t}if(f)try{return K.apply(n,p.querySelectorAll(f)),n}catch(e){}finally{a===P&&t.removeAttribute("id")}}}return T(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[P]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=B++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,u,l,c=[Y,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[P]||(t[P]={}),u=l[t.uniqueID]||(l[t.uniqueID]={}),(a=u[i])&&a[0]===Y&&a[1]===o)return c[2]=a[2];if(u[i]=c,c[2]=e(t,n,s))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;r<o;r++)t(e,n[r],i);return i}function _(e,t,n,i,r){for(var o,s=[],a=0,u=e.length,l=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),l&&t.push(a)));return s}function g(e,t,n,r,o,s){return r&&!r[P]&&(r=g(r)),o&&!o[P]&&(o=g(o,s)),i(function(i,s,a,u){var l,c,d,h=[],f=[],p=s.length,g=i||m(t||"*",a.nodeType?[a]:a,[]),v=!e||!i&&t?g:_(g,h,e,a,u),y=n?o||(i?e:p||r)?[]:s:v;if(n&&n(v,y,a,u),r)for(l=_(y,f),r(l,[],a,u),c=l.length;c--;)(d=l[c])&&(y[f[c]]=!(v[f[c]]=d));if(i){if(o||e){if(o){for(l=[],c=y.length;c--;)(d=y[c])&&l.push(v[c]=d);o(null,y=[],l,u)}for(c=y.length;c--;)(d=y[c])&&(l=o?ee(i,d):h[c])>-1&&(i[l]=!(s[l]=d))}}else y=_(y===s?y.splice(p,y.length):y),o?o(null,s,y,u):K.apply(s,y)})}function v(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,u=f(function(e){return e===t},s,!0),l=f(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,i){var r=!o&&(i||n!==M)||((t=n).nodeType?u(e,n,i):l(e,n,i));return t=null,r}];a<r;a++)if(n=x.relative[e[a].type])c=[f(p(c),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[P]){for(i=++a;i<r&&!x.relative[e[i].type];i++);return g(a>1&&p(c),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,a<i&&v(e.slice(a,i)),i<r&&v(e=e.slice(i)),i<r&&h(e))}c.push(n)}return p(c)}function y(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,u,l){var c,d,h,f=0,p="0",m=i&&[],g=[],v=M,y=i||o&&x.find.TAG("*",l),b=Y+=null==v?1:Math.random()||.1,w=y.length;for(l&&(M=s===D||s||l);p!==w&&null!=(c=y[p]);p++){if(o&&c){for(d=0,s||c.ownerDocument===D||(j(c),a=!L);h=e[d++];)if(h(c,s||D,a)){u.push(c);break}l&&(Y=b)}r&&((c=!h&&c)&&f--,i&&m.push(c))}if(f+=p,r&&p!==f){for(d=0;h=n[d++];)h(m,g,s,a);if(i){if(f>0)for(;p--;)m[p]||g[p]||(g[p]=X.call(u));g=_(g)}K.apply(u,g),l&&!i&&g.length>0&&f+n.length>1&&t.uniqueSort(u)}return l&&(Y=b,M=v),m};return r?i(s):s}var b,w,x,S,C,k,A,T,M,N,E,j,D,R,L,O,I,F,q,P="sizzle"+1*new Date,H=e.document,Y=0,B=0,$=n(),U=n(),W=n(),z=function(e,t){return e===t&&(E=!0),0},V=1<<31,J={}.hasOwnProperty,G=[],X=G.pop,Q=G.push,K=G.push,Z=G.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),he=new RegExp("^"+ie+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,_e=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,ye=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xe=function(){j()};try{K.apply(G=Z.call(H.childNodes),H.childNodes),G[H.childNodes.length].nodeType}catch(e){K={apply:G.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},j=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:H;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,R=D.documentElement,L=!C(D),(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=_e.test(D.getElementsByClassName),w.getById=r(function(e){return R.appendChild(e).id=P,!D.getElementsByName||!D.getElementsByName(P).length}),w.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&L)return t.getElementsByClassName(e)},I=[],O=[],(w.qsa=_e.test(D.querySelectorAll))&&(r(function(e){R.appendChild(e).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+P+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+P+"+*").length||O.push(".#.+[+~]")}),r(function(e){var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(w.matchesSelector=_e.test(F=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&r(function(e){w.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),I.push("!=",oe)}),O=O.length&&new RegExp(O.join("|")),I=I.length&&new RegExp(I.join("|")),t=_e.test(R.compareDocumentPosition),q=t||_e.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return E=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===D||e.ownerDocument===H&&q(H,e)?-1:t===D||t.ownerDocument===H&&q(H,t)?1:N?ee(N,e)-ee(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return E=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],u=[t];if(!r||!o)return e===D?-1:t===D?1:r?-1:o?1:N?ee(N,e)-ee(N,t):0;if(r===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[i]===u[i];)i++;return i?s(a[i],u[i]):a[i]===H?-1:u[i]===H?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&j(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&L&&!W[n+" "]&&(!I||!I.test(n))&&(!O||!O.test(n)))try{var i=F.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&j(e),q(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&j(e);var n=x.attrHandle[t.toLowerCase()],i=n&&J.call(x.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==i?i:w.attributes||!L?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(E=!w.detectDuplicates,N=!w.sortStable&&e.slice(0),e.sort(z),E){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return N=null,e},S=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(se," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,h,f,p,m=o!==s?"nextSibling":"previousSibling",_=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!u&&!a,y=!1;if(_){if(o){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?_.firstChild:_.lastChild],s&&v){for(h=_,d=h[P]||(h[P]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),l=c[e]||[],f=l[0]===Y&&l[1],y=f&&l[2],h=f&&_.childNodes[f];h=++f&&h&&h[m]||(y=f=0)||p.pop();)if(1===h.nodeType&&++y&&h===t){c[e]=[Y,f,y];break}}else if(v&&(h=t,d=h[P]||(h[P]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),l=c[e]||[],f=l[0]===Y&&l[1],y=f),y===!1)for(;(h=++f&&h&&h[m]||(y=f=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++y||(v&&(d=h[P]||(h[P]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),c[e]=[Y,y]),h!==t)););return y-=r,y===i||y%i===0&&y/i>=0}}},PSEUDO:function(e,n){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[P]?o(n):o.length>1?(r=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=ee(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=A(e.replace(ae,"$1"));return r[P]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=u(b);d.prototype=x.filters=x.pseudos,x.setFilters=new d,k=t.tokenize=function(e,n){var i,r,o,s,a,u,l,c=U[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=x.preFilter;a;){i&&!(r=ue.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),i=!1,(r=le.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ae," ")}),a=a.slice(i.length));for(s in x.filter)!(r=fe[s].exec(a))||l[s]&&!(r=l[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):U(e,u).slice(0)},A=t.compile=function(e,t){var n,i=[],r=[],o=W[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=v(t[n]),o[P]?i.push(o):r.push(o);o=W(e,y(r,i)),o.selector=e}return o},T=t.select=function(e,t,n,i){var r,o,s,a,u,l="function"==typeof e&&e,d=!i&&k(e=l.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&L&&x.relative[o[1].type]){if(t=(x.find.ID(s.matches[0].replace(be,we),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((u=x.find[a])&&(i=u(s.matches[0].replace(be,we),ve.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return K.apply(n,i),n;break}}return(l||A(e,d))(i,t,!L,n,!t||ve.test(e)&&c(t.parentNode)||t),n},w.sortStable=P.split("").sort(z).join("")===P,w.detectDuplicates=!!E,j(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),"function"==typeof define&&define.amd?define("sizzle",[],function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:e.Sizzle=t}(window),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"!==n&&!oe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return Z.call(t,e)>-1!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function s(){G.removeEventListener("DOMContentLoaded",s),e.removeEventListener("load",s),oe.ready()}function a(){this.expando=oe.expando+a.uid++}function u(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Me,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Te.test(n)?oe.parseJSON(n):n)}catch(e){}Ae.set(e,t,n)}else n=void 0;return n}function l(e,t,n,i){var r,o=1,s=20,a=i?function(){return i.cur()}:function(){return oe.css(e,t,"")},u=a(),l=n&&n[3]||(oe.cssNumber[t]?"":"px"),c=(oe.cssNumber[t]||"px"!==l&&+u)&&Ee.exec(oe.css(e,t));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do o=o||".5",c/=o,oe.style(e,t,c+l);while(o!==(o=a()/u)&&1!==o&&--s)}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function d(e,t){for(var n=0,i=e.length;n<i;n++)ke.set(e[n],"globalEval",!t||ke.get(t[n],"globalEval"))}function h(e,t,n,i,r){for(var o,s,a,u,l,h,f=t.createDocumentFragment(),p=[],m=0,_=e.length;m<_;m++)if(o=e[m],o||0===o)if("object"===oe.type(o))oe.merge(p,o.nodeType?[o]:o);else if(Fe.test(o)){for(s=s||f.appendChild(t.createElement("div")),a=(Le.exec(o)||["",""])[1].toLowerCase(),u=Ie[a]||Ie._default,s.innerHTML=u[1]+oe.htmlPrefilter(o)+u[2],h=u[0];h--;)s=s.lastChild;oe.merge(p,s.childNodes),s=f.firstChild,s.textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",m=0;o=p[m++];)if(i&&oe.inArray(o,i)>-1)r&&r.push(o);else if(l=oe.contains(o.ownerDocument,o),s=c(f.appendChild(o),"script"),l&&d(s),n)for(h=0;o=s[h++];)Oe.test(o.type||"")&&n.push(o);return f}function f(){return!0}function p(){return!1}function m(){try{return G.activeElement}catch(e){}}function _(e,t,n,i,r,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(a in t)_(e,a,n,i,t[a],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=p;else if(!r)return e;return 1===o&&(s=r,r=function(e){return oe().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,r,i,n)})}function g(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function v(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function y(e){var t=Ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){var n,i,r,o,s,a,u,l;if(1===t.nodeType){if(ke.hasData(e)&&(o=ke.access(e),s=ke.set(t,o),l=o.events)){delete s.handle,s.events={};for(r in l)for(n=0,i=l[r].length;n<i;n++)oe.event.add(t,r,l[r][n])}Ae.hasData(e)&&(a=Ae.access(e),u=oe.extend({},a),Ae.set(t,u))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Re.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function x(e,t,n,i){t=Q.apply([],t);var r,o,s,a,u,l,d=0,f=e.length,p=f-1,m=t[0],_=oe.isFunction(m);if(_||f>1&&"string"==typeof m&&!ie.checkClone&&$e.test(m))return e.each(function(r){var o=e.eq(r);_&&(t[0]=m.call(this,r,o.html())),x(o,t,n,i)});if(f&&(r=h(t,e[0].ownerDocument,!1,e,i),o=r.firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=oe.map(c(r,"script"),v),a=s.length;d<f;d++)u=r,d!==p&&(u=oe.clone(u,!0,!0),a&&oe.merge(s,c(u,"script"))),n.call(e[d],u,d);if(a)for(l=s[s.length-1].ownerDocument,oe.map(s,y),d=0;d<a;d++)u=s[d],Oe.test(u.type||"")&&!ke.access(u,"globalEval")&&oe.contains(l,u)&&(u.src?oe._evalUrl&&oe._evalUrl(u.src):oe.globalEval(u.textContent.replace(We,"")))}return e}function S(e,t,n){for(var i,r=t?oe.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||oe.cleanData(c(i)),i.parentNode&&(n&&oe.contains(i.ownerDocument,i)&&d(c(i,"script")),i.parentNode.removeChild(i));return e}function C(e,t){var n=oe(t.createElement(e)).appendTo(t.body),i=oe.css(n[0],"display");return n.detach(),i}function k(e){var t=G,n=Ve[e];return n||(n=C(e,t),"none"!==n&&n||(ze=(ze||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=ze[0].contentDocument,t.write(),t.close(),n=C(e,t),ze.detach()),Ve[e]=n),n}function A(e,t,n){var i,r,o,s,a=e.style;return n=n||Xe(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||oe.contains(e.ownerDocument,e)||(s=oe.style(e,t)),n&&!ie.pixelMarginRight()&&Ge.test(s)&&Je.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o),void 0!==s?s+"":s}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function M(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function N(e,t,n){var i=Ee.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function E(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=oe.css(e,n+je[o],!0,r)),i?("content"===n&&(s-=oe.css(e,"padding"+je[o],!0,r)),"margin"!==n&&(s-=oe.css(e,"border"+je[o]+"Width",!0,r))):(s+=oe.css(e,"padding"+je[o],!0,r),"padding"!==n&&(s+=oe.css(e,"border"+je[o]+"Width",!0,r)));return s}function j(t,n,i){var r=!0,o="width"===n?t.offsetWidth:t.offsetHeight,s=Xe(t),a="border-box"===oe.css(t,"boxSizing",!1,s);if(G.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(o=Math.round(100*t.getBoundingClientRect()[n])),o<=0||null==o){if(o=A(t,n,s),(o<0||null==o)&&(o=t.style[n]),Ge.test(o))return o;r=a&&(ie.boxSizingReliable()||o===t.style[n]),o=parseFloat(o)||0}return o+E(t,n,i||(a?"border":"content"),r,s)+"px"}function D(e,t){for(var n,i,r,o=[],s=0,a=e.length;s<a;s++)i=e[s],i.style&&(o[s]=ke.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&De(i)&&(o[s]=ke.access(i,"olddisplay",k(i.nodeName)))):(r=De(i),"none"===n&&r||ke.set(i,"olddisplay",r?n:oe.css(i,"display"))));for(s=0;s<a;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function R(e,t,n,i,r){return new R.prototype.init(e,t,n,i,r)}function L(){return e.setTimeout(function(){rt=void 0}),rt=oe.now()}function O(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=je[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function I(e,t,n){for(var i,r=(P.tweeners[t]||[]).concat(P.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,t,e))return i}function F(e,t,n){var i,r,o,s,a,u,l,c,d=this,h={},f=e.style,p=e.nodeType&&De(e),m=ke.get(e,"fxshow");n.queue||(a=oe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,oe.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],l=oe.css(e,"display"),c="none"===l?ke.get(e,"olddisplay")||k(e.nodeName):l,"inline"===c&&"none"===oe.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],st.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}h[i]=m&&m[i]||oe.style(e,i)}else l=void 0;if(oe.isEmptyObject(h))"inline"===("none"===l?k(e.nodeName):l)&&(f.display=l);else{m?"hidden"in m&&(p=m.hidden):m=ke.access(e,"fxshow",{}),o&&(m.hidden=!p),p?oe(e).show():d.done(function(){oe(e).hide()}),d.done(function(){var t;ke.remove(e,"fxshow");for(t in h)oe.style(e,t,h[t])});for(i in h)s=I(p?m[i]:0,i,d),i in m||(m[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function q(e,t){var n,i,r,o,s;for(n in e)if(i=oe.camelCase(n),r=t[i],o=e[n],oe.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=oe.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function P(e,t,n){var i,r,o=0,s=P.prefilters.length,a=oe.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var t=rt||L(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,o=1-i,s=0,u=l.tweens.length;s<u;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),o<1&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||L(),duration:n.duration,tweens:[],createTween:function(t,n){var i=oe.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),c=l.props;for(q(c,l.opts.specialEasing);o<s;o++)if(i=P.prefilters[o].call(l,e,c,l.opts))return oe.isFunction(i.stop)&&(oe._queueHooks(l.elem,l.opts.queue).stop=oe.proxy(i.stop,i)),i;return oe.map(c,I,l),oe.isFunction(l.opts.start)&&l.opts.start.call(e,l),oe.fx.timer(oe.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function H(e){
return e.getAttribute&&e.getAttribute("class")||""}function Y(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(we)||[];if(oe.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function B(e,t,n,i){function r(a){var u;return o[a]=!0,oe.each(e[a]||[],function(e,a){var l=a(t,n,i);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),u}var o={},s=e===At;return r(t.dataTypes[0])||!o["*"]&&r("*")}function $(e,t){var n,i,r=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&oe.extend(!0,e,i),e}function U(e,t,n){for(var i,r,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){u.unshift(r);break}if(u[0]in n)o=u[0];else{for(r in n){if(!u[0]||e.converters[r+" "+u[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}function W(e,t,n,i){var r,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(r in l)if(a=r.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[r]:l[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function z(e,t,n,i){var r;if(oe.isArray(t))oe.each(t,function(t,r){n||Et.test(e)?i(e,r):z(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==oe.type(t))i(e,t);else for(r in t)z(e+"["+r+"]",t[r],n,i)}function V(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var J=[],G=e.document,X=J.slice,Q=J.concat,K=J.push,Z=J.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},re="2.2.3",oe=function(e,t){return new oe.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,ue=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:re,constructor:oe,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:J.sort,splice:J.splice},oe.extend=oe.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||oe.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(l&&i&&(oe.isPlainObject(i)||(r=oe.isArray(i)))?(r?(r=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},s[t]=oe.extend(l,o,i)):void 0!==i&&(s[t]=i));return s},oe.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=oe.trim(e),e&&(1===e.indexOf("use strict")?(t=G.createElement("script"),t.text=e,G.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ae,"ms-").replace(ue,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,r=0;if(n(e))for(i=e.length;r<i&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?oe.merge(i,"string"==typeof e?[e]:e):K.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;o<s;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o,s=0,a=[];if(n(e))for(r=e.length;s<r;s++)o=t(e[s],s,i),null!=o&&a.push(o);else for(s in e)o=t(e[s],s,i),null!=o&&a.push(o);return Q.apply([],a)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e))return i=X.call(arguments,2),r=function(){return e.apply(t||this,i.concat(X.call(arguments)))},r.guid=e.guid=e.guid||oe.guid++,r},now:Date.now,support:ie}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=J[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,i){var r,o,s,a,u,l,d,f,p=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!i&&((t?t.ownerDocument||t:H)!==D&&j(t),t=t||D,L)){if(11!==m&&(l=ge.exec(e)))if(r=l[1]){if(9===m){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(p&&(s=p.getElementById(r))&&q(t,s)&&s.id===r)return n.push(s),n}else{if(l[2])return K.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&w.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(r)),n}if(w.qsa&&!W[e+" "]&&(!O||!O.test(e))){if(1!==m)p=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(ye,"\\$&"):t.setAttribute("id",a=P),d=k(e),o=d.length,u=he.test(a)?"#"+a:"[id='"+a+"']";o--;)d[o]=u+" "+h(d[o]);f=d.join(","),p=ve.test(e)&&c(t.parentNode)||t}if(f)try{return K.apply(n,p.querySelectorAll(f)),n}catch(e){}finally{a===P&&t.removeAttribute("id")}}}return T(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[P]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=B++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,u,l,c=[Y,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[P]||(t[P]={}),u=l[t.uniqueID]||(l[t.uniqueID]={}),(a=u[i])&&a[0]===Y&&a[1]===o)return c[2]=a[2];if(u[i]=c,c[2]=e(t,n,s))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;r<o;r++)t(e,n[r],i);return i}function _(e,t,n,i,r){for(var o,s=[],a=0,u=e.length,l=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),l&&t.push(a)));return s}function g(e,t,n,r,o,s){return r&&!r[P]&&(r=g(r)),o&&!o[P]&&(o=g(o,s)),i(function(i,s,a,u){var l,c,d,h=[],f=[],p=s.length,g=i||m(t||"*",a.nodeType?[a]:a,[]),v=!e||!i&&t?g:_(g,h,e,a,u),y=n?o||(i?e:p||r)?[]:s:v;if(n&&n(v,y,a,u),r)for(l=_(y,f),r(l,[],a,u),c=l.length;c--;)(d=l[c])&&(y[f[c]]=!(v[f[c]]=d));if(i){if(o||e){if(o){for(l=[],c=y.length;c--;)(d=y[c])&&l.push(v[c]=d);o(null,y=[],l,u)}for(c=y.length;c--;)(d=y[c])&&(l=o?ee(i,d):h[c])>-1&&(i[l]=!(s[l]=d))}}else y=_(y===s?y.splice(p,y.length):y),o?o(null,s,y,u):K.apply(s,y)})}function v(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,u=f(function(e){return e===t},s,!0),l=f(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,i){var r=!o&&(i||n!==M)||((t=n).nodeType?u(e,n,i):l(e,n,i));return t=null,r}];a<r;a++)if(n=x.relative[e[a].type])c=[f(p(c),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[P]){for(i=++a;i<r&&!x.relative[e[i].type];i++);return g(a>1&&p(c),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,a<i&&v(e.slice(a,i)),i<r&&v(e=e.slice(i)),i<r&&h(e))}c.push(n)}return p(c)}function y(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,u,l){var c,d,h,f=0,p="0",m=i&&[],g=[],v=M,y=i||o&&x.find.TAG("*",l),b=Y+=null==v?1:Math.random()||.1,w=y.length;for(l&&(M=s===D||s||l);p!==w&&null!=(c=y[p]);p++){if(o&&c){for(d=0,s||c.ownerDocument===D||(j(c),a=!L);h=e[d++];)if(h(c,s||D,a)){u.push(c);break}l&&(Y=b)}r&&((c=!h&&c)&&f--,i&&m.push(c))}if(f+=p,r&&p!==f){for(d=0;h=n[d++];)h(m,g,s,a);if(i){if(f>0)for(;p--;)m[p]||g[p]||(g[p]=X.call(u));g=_(g)}K.apply(u,g),l&&!i&&g.length>0&&f+n.length>1&&t.uniqueSort(u)}return l&&(Y=b,M=v),m};return r?i(s):s}var b,w,x,S,C,k,A,T,M,N,E,j,D,R,L,O,I,F,q,P="sizzle"+1*new Date,H=e.document,Y=0,B=0,$=n(),U=n(),W=n(),z=function(e,t){return e===t&&(E=!0),0},V=1<<31,J={}.hasOwnProperty,G=[],X=G.pop,Q=G.push,K=G.push,Z=G.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),he=new RegExp("^"+ie+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,_e=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,ye=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xe=function(){j()};try{K.apply(G=Z.call(H.childNodes),H.childNodes),G[H.childNodes.length].nodeType}catch(e){K={apply:G.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},j=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:H;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,R=D.documentElement,L=!C(D),(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=_e.test(D.getElementsByClassName),w.getById=r(function(e){return R.appendChild(e).id=P,!D.getElementsByName||!D.getElementsByName(P).length}),w.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&L)return t.getElementsByClassName(e)},I=[],O=[],(w.qsa=_e.test(D.querySelectorAll))&&(r(function(e){R.appendChild(e).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+P+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+P+"+*").length||O.push(".#.+[+~]")}),r(function(e){var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(w.matchesSelector=_e.test(F=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&r(function(e){w.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),I.push("!=",oe)}),O=O.length&&new RegExp(O.join("|")),I=I.length&&new RegExp(I.join("|")),t=_e.test(R.compareDocumentPosition),q=t||_e.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return E=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===D||e.ownerDocument===H&&q(H,e)?-1:t===D||t.ownerDocument===H&&q(H,t)?1:N?ee(N,e)-ee(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return E=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],u=[t];if(!r||!o)return e===D?-1:t===D?1:r?-1:o?1:N?ee(N,e)-ee(N,t):0;if(r===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[i]===u[i];)i++;return i?s(a[i],u[i]):a[i]===H?-1:u[i]===H?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&j(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&L&&!W[n+" "]&&(!I||!I.test(n))&&(!O||!O.test(n)))try{var i=F.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&j(e),q(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&j(e);var n=x.attrHandle[t.toLowerCase()],i=n&&J.call(x.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==i?i:w.attributes||!L?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(E=!w.detectDuplicates,N=!w.sortStable&&e.slice(0),e.sort(z),E){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return N=null,e},S=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(se," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,h,f,p,m=o!==s?"nextSibling":"previousSibling",_=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!u&&!a,y=!1;if(_){if(o){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?_.firstChild:_.lastChild],s&&v){for(h=_,d=h[P]||(h[P]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),l=c[e]||[],f=l[0]===Y&&l[1],y=f&&l[2],h=f&&_.childNodes[f];h=++f&&h&&h[m]||(y=f=0)||p.pop();)if(1===h.nodeType&&++y&&h===t){c[e]=[Y,f,y];break}}else if(v&&(h=t,d=h[P]||(h[P]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),l=c[e]||[],f=l[0]===Y&&l[1],y=f),y===!1)for(;(h=++f&&h&&h[m]||(y=f=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++y||(v&&(d=h[P]||(h[P]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),c[e]=[Y,y]),h!==t)););return y-=r,y===i||y%i===0&&y/i>=0}}},PSEUDO:function(e,n){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[P]?o(n):o.length>1?(r=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=ee(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=A(e.replace(ae,"$1"));return r[P]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=u(b);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,k=t.tokenize=function(e,n){var i,r,o,s,a,u,l,c=U[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=x.preFilter;a;){i&&!(r=ue.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),i=!1,(r=le.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ae," ")}),a=a.slice(i.length));for(s in x.filter)!(r=fe[s].exec(a))||l[s]&&!(r=l[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):U(e,u).slice(0)},A=t.compile=function(e,t){var n,i=[],r=[],o=W[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=v(t[n]),o[P]?i.push(o):r.push(o);o=W(e,y(r,i)),o.selector=e}return o},T=t.select=function(e,t,n,i){var r,o,s,a,u,l="function"==typeof e&&e,d=!i&&k(e=l.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&L&&x.relative[o[1].type]){if(t=(x.find.ID(s.matches[0].replace(be,we),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((u=x.find[a])&&(i=u(s.matches[0].replace(be,we),ve.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return K.apply(n,i),n;break}}return(l||A(e,d))(i,t,!L,n,!t||ve.test(e)&&c(t.parentNode)||t),n},w.sortStable=P.split("").sort(z).join("")===P,w.detectDuplicates=!!E,j(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var de=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&oe(e).is(n))break;i.push(e)}return i},he=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},fe=oe.expr.match.needsContext,pe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?oe.find.matchesSelector(i,e)?[i]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;t<n;t++)if(oe.contains(r[t],this))return!0}));for(t=0;t<n;t++)oe.find(e,r[t],i);return i=this.pushStack(n>1?oe.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&fe.test(e)?oe(e):e||[],!1).length}});var _e,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ve=oe.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||_e,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ge.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:G,!0)),pe.test(i[1])&&oe.isPlainObject(t))for(i in t)oe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return r=G.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};ve.prototype=oe.fn,_e=oe(G);var ye=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=fe.test(e)||"string"!=typeof e?oe(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Z.call(oe(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,n){return de(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,n){return de(e,"nextSibling",n)},prevUntil:function(e,t,n){return de(e,"previousSibling",n)},siblings:function(e){return he((e.parentNode||{}).firstChild,e)},children:function(e){return he(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,i){var r=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=oe.filter(i,r)),this.length>1&&(be[e]||oe.uniqueSort(r),ye.test(e)&&r.reverse()),this.pushStack(r)}});var we=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,n,i,r,s=[],a=[],u=-1,l=function(){for(r=e.once,i=t=!0;a.length;u=-1)for(n=a.shift();++u<s.length;)s[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(u=s.length-1,a.push(n)),function t(n){oe.each(n,function(n,i){oe.isFunction(i)?e.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==oe.type(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,s,n))>-1;)s.splice(n,1),n<=u&&u--}),this},has:function(e){return e?oe.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=a=[],n||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,o){var s=oe.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,i):i}},r={};return i.pipe=i.then,oe.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=X.call(arguments),s=o.length,a=1!==s||e&&oe.isFunction(e.promise)?s:0,u=1===a?e:oe.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?X.call(arguments):r,i===t?u.notifyWith(n,i):--a||u.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);r<s;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().progress(l(r,n,t)).done(l(r,i,o)).fail(u.reject):--a;return a||u.resolveWith(i,o),u.promise()}});var xe;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(e===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,e!==!0&&--oe.readyWait>0||(xe.resolveWith(G,[oe]),oe.fn.triggerHandler&&(oe(G).triggerHandler("ready"),oe(G).off("ready"))))}}),oe.ready.promise=function(t){return xe||(xe=oe.Deferred(),"complete"===G.readyState||"loading"!==G.readyState&&!G.documentElement.doScroll?e.setTimeout(oe.ready):(G.addEventListener("DOMContentLoaded",s),e.addEventListener("load",s))),xe.promise(t)},oe.ready.promise();var Se=function(e,t,n,i,r,o,s){var a=0,u=e.length,l=null==n;if("object"===oe.type(n)){r=!0;for(a in n)Se(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,oe.isFunction(i)||(s=!0),l&&(s?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(oe(e),n)})),t))for(;a<u;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:l?t.call(e):u?t(e[0],n):o},Ce=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Ce(e))return{};var t=e[this.expando];return t||(t={},Ce(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0
}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,oe.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{oe.isArray(t)?i=t.concat(t.map(oe.camelCase)):(r=oe.camelCase(t),t in o?i=[t,r]:(i=r,i=i in o?[i]:i.match(we)||[])),n=i.length;for(;n--;)delete o[i[n]]}(void 0===t||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var ke=new a,Ae=new a,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Me=/[A-Z]/g;oe.extend({hasData:function(e){return Ae.hasData(e)||ke.hasData(e)},data:function(e,t,n){return Ae.access(e,t,n)},removeData:function(e,t){Ae.remove(e,t)},_data:function(e,t,n){return ke.access(e,t,n)},_removeData:function(e,t){ke.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=Ae.get(o),1===o.nodeType&&!ke.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),u(o,i,r[i])));ke.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Ae.set(this,e)}):Se(this,function(t){var n,i;if(o&&void 0===t){if(n=Ae.get(o,e)||Ae.get(o,e.replace(Me,"-$&").toLowerCase()),void 0!==n)return n;if(i=oe.camelCase(e),n=Ae.get(o,i),void 0!==n)return n;if(n=u(o,i,void 0),void 0!==n)return n}else i=oe.camelCase(e),this.each(function(){var n=Ae.get(this,i);Ae.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&Ae.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ae.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=ke.get(e,t),n&&(!i||oe.isArray(n)?i=ke.access(e,t,oe.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),i=n.length,r=n.shift(),o=oe._queueHooks(e,t),s=function(){oe.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ke.get(e,n)||ke.access(e,n,{empty:oe.Callbacks("once memory").add(function(){ke.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=oe.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=ke.get(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var Ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=new RegExp("^(?:([+-])=|)("+Ne+")([a-z%]*)$","i"),je=["Top","Right","Bottom","Left"],De=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Re=/^(?:checkbox|radio)$/i,Le=/<([\w:-]+)/,Oe=/^$|\/(?:java|ecma)script/i,Ie={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ie.optgroup=Ie.option,Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td;var Fe=/<|&#?\w+;/;!function(){var e=G.createDocumentFragment(),t=e.appendChild(G.createElement("div")),n=G.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var qe=/^key/,Pe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,He=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,i,r){var o,s,a,u,l,c,d,h,f,p,m,_=ke.get(e);if(_)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=oe.guid++),(u=_.events)||(u=_.events={}),(s=_.handle)||(s=_.handle=function(t){return"undefined"!=typeof oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],l=t.length;l--;)a=He.exec(t[l])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f&&(d=oe.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=oe.event.special[f]||{},c=oe.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&oe.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=u[f])||(h=u[f]=[],h.delegateCount=0,d.setup&&d.setup.call(e,i,p,s)!==!1||e.addEventListener&&e.addEventListener(f,s)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),oe.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,s,a,u,l,c,d,h,f,p,m,_=ke.hasData(e)&&ke.get(e);if(_&&(u=_.events)){for(t=(t||"").match(we)||[""],l=t.length;l--;)if(a=He.exec(t[l])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(d=oe.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,h=u[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)c=h[o],!r&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));s&&!h.length&&(d.teardown&&d.teardown.call(e,p,_.handle)!==!1||oe.removeEvent(e,f,_.handle),delete u[f])}else for(f in u)oe.event.remove(e,f+t[l],n,i,!0);oe.isEmptyObject(u)&&ke.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,i,r,o,s=[],a=X.call(arguments),u=(ke.get(this,"events")||{})[e.type]||[],l=oe.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=oe.event.handlers.call(this,e,u),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,i=((oe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(i=[],n=0;n<a;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?oe(r,this).index(u)>-1:oe.find(r,this,null,[u]).length),i[r]&&i.push(o);i.length&&s.push({elem:u,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||G,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Pe.test(r)?this.mouseHooks:qe.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new oe.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=G),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===m()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&oe.nodeName(this,"input"))return this.click(),!1},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:p):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||oe.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,i){return _(this,e,t,n,i)},one:function(e,t,n,i){return _(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,oe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=p),this.each(function(){oe.event.remove(this,e,n,t)})}});var Ye=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Be=/<script|<style|<link/i,$e=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^true\/(.*)/,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace(Ye,"<$1></$2>")},clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),u=oe.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(s=c(a),o=c(e),i=0,r=o.length;i<r;i++)w(o[i],s[i]);if(t)if(n)for(o=o||c(e),s=s||c(a),i=0,r=o.length;i<r;i++)b(o[i],s[i]);else b(e,a);return s=c(a,"script"),s.length>0&&d(s,!u&&c(e,"script")),a},cleanData:function(e){for(var t,n,i,r=oe.event.special,o=0;void 0!==(n=e[o]);o++)if(Ce(n)){if(t=n[ke.expando]){if(t.events)for(i in t.events)r[i]?oe.event.remove(n,i):oe.removeEvent(n,i,t.handle);n[ke.expando]=void 0}n[Ae.expando]&&(n[Ae.expando]=void 0)}}}),oe.fn.extend({domManip:x,detach:function(e){return S(this,e,!0)},remove:function(e){return S(this,e)},text:function(e){return Se(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.appendChild(e)}})},prepend:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Se(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Be.test(e)&&!Ie[(Le.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return x(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,i=[],r=oe(e),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),oe(r[s])[t](n),K.apply(i,n.get());return this.pushStack(i)}});var ze,Ve={HTML:"block",BODY:"block"},Je=/^margin/,Ge=new RegExp("^("+Ne+")(?!px)[a-z%]+$","i"),Xe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Qe=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r},Ke=G.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Ke.appendChild(s);var t=e.getComputedStyle(a);n="1%"!==t.top,o="2px"===t.marginLeft,i="4px"===t.width,a.style.marginRight="50%",r="4px"===t.marginRight,Ke.removeChild(s)}var n,i,r,o,s=G.createElement("div"),a=G.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),oe.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),r},reliableMarginLeft:function(){return null==i&&t(),o},reliableMarginRight:function(){var t,n=a.appendChild(G.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",Ke.appendChild(s),t=!parseFloat(e.getComputedStyle(n).marginRight),Ke.removeChild(s),a.removeChild(n),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=G.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=A(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=oe.camelCase(t),u=e.style;return t=oe.cssProps[a]||(oe.cssProps[a]=M(a)||a),s=oe.cssHooks[t]||oe.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:u[t]:(o=typeof n,"string"===o&&(r=Ee.exec(n))&&r[1]&&(n=l(e,t,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(oe.cssNumber[a]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(u[t]=n)),void 0)}},css:function(e,t,n,i){var r,o,s,a=oe.camelCase(t);return t=oe.cssProps[a]||(oe.cssProps[a]=M(a)||a),s=oe.cssHooks[t]||oe.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=A(e,t,i)),"normal"===r&&t in tt&&(r=tt[t]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,i){if(n)return Ze.test(oe.css(e,"display"))&&0===e.offsetWidth?Qe(e,et,function(){return j(e,t,i)}):j(e,t,i)},set:function(e,n,i){var r,o=i&&Xe(e),s=i&&E(e,t,i,"border-box"===oe.css(e,"boxSizing",!1,o),o);return s&&(r=Ee.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),N(e,n,s)}}}),oe.cssHooks.marginLeft=T(ie.reliableMarginLeft,function(e,t){if(t)return(parseFloat(A(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),oe.cssHooks.marginRight=T(ie.reliableMarginRight,function(e,t){if(t)return Qe(e,{display:"inline-block"},A,[e,"marginRight"])}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+je[i]+t]=o[i]||o[i-2]||o[0];return r}},Je.test(e)||(oe.cssHooks[e+t].set=N)}),oe.fn.extend({css:function(e,t){return Se(this,function(e,t,n){var i,r,o={},s=0;if(oe.isArray(t)){for(i=Xe(e),r=t.length;s<r;s++)o[t[s]]=oe.css(e,t[s],!1,i);return o}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){De(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=R,R.prototype={constructor:R,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,n=R.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=R.prototype.init,oe.fx.step={};var rt,ot,st=/^(?:toggle|show|hide)$/,at=/queueHooks$/;oe.Animation=oe.extend(P,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return l(n.elem,e,Ee.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,i=0,r=e.length;i<r;i++)n=e[i],P.tweeners[n]=P.tweeners[n]||[],P.tweeners[n].unshift(t)},prefilters:[F],prefilter:function(e,t){t?P.prefilters.unshift(e):P.prefilters.push(e)}}),oe.speed=function(e,t,n){var i=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(De).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=oe.isEmptyObject(e),o=oe.speed(t,n,i),s=function(){var t=P(this,oe.extend({},e),o);(r||ke.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=oe.timers,s=ke.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&at.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ke.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=oe.timers,s=i?i.length:0;for(n.finish=!0,oe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,i,r)}}),oe.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(rt=oe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),rt=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){ot||(ot=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(ot),ot=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=G.createElement("input"),t=G.createElement("select"),n=t.appendChild(G.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=G.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var ut,lt=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Se(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),r=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?ut:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=oe.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(we);if(o&&1===e.nodeType)for(;n=o[r++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),ut={set:function(e,t,n){return t===!1?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=lt[t]||oe.find.attr;lt[t]=function(e,t,i){var r,o;return i||(o=lt[t],lt[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,lt[t]=o),r}});var ct=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Se(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,r=oe.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ie.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var ht=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,i,r,o,s,a,u=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,H(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[u++];)if(r=H(n),i=1===n.nodeType&&(" "+r+" ").replace(ht," ")){for(s=0;o=t[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=oe.trim(i),r!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,r,o,s,a,u=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,H(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[u++];)if(r=H(n),i=1===n.nodeType&&(" "+r+" ").replace(ht," ")){for(s=0;o=t[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");a=oe.trim(i),r!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(n){oe(this).toggleClass(e.call(this,n,H(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=oe(this),o=e.match(we)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=H(this),t&&ke.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":ke.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+H(n)+" ").replace(ht," ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g,pt=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=oe.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,oe(this).val()):e,null==r?r="":"number"==typeof r?r+="":oe.isArray(r)&&(r=oe.map(r,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=oe.valHooks[r.type]||oe.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ft,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(pt," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,s=o?null:[],a=o?r+1:i.length,u=r<0?a:o?r:0;u<a;u++)if(n=i[u],(n.selected||u===r)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=oe.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=oe.inArray(oe.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){if(oe.isArray(t))return e.checked=oe.inArray(oe(e).val(),t)>-1}},ie.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,i,r){var o,s,a,u,l,c,d,h=[i||G],f=ne.call(t,"type")?t.type:t,p=ne.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||G,3!==i.nodeType&&8!==i.nodeType&&!mt.test(f+oe.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),l=f.indexOf(":")<0&&"on"+f,t=t[oe.expando]?t:new oe.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:oe.makeArray(n,[t]),d=oe.event.special[f]||{},r||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!r&&!d.noBubble&&!oe.isWindow(i)){for(u=d.delegateType||f,mt.test(u+f)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(i.ownerDocument||G)&&h.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=h[o++])&&!t.isPropagationStopped();)t.type=o>1?u:d.bindType||f,c=(ke.get(s,"events")||{})[t.type]&&ke.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Ce(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),n)!==!1||!Ce(i)||l&&oe.isFunction(i[f])&&!oe.isWindow(i)&&(a=i[l],a&&(i[l]=null),oe.event.triggered=f,i[f](),oe.event.triggered=void 0,a&&(i[l]=a)),t.result}},simulate:function(e,t,n){var i=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return oe.event.trigger(e,t,n,!0)}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ke.access(i,t);r||i.addEventListener(e,n,!0),ke.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ke.access(i,t)-1;r?ke.access(i,t,r):(i.removeEventListener(e,n,!0),ke.remove(i,t))}}});var _t=e.location,gt=oe.now(),vt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var yt=/#.*$/,bt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,St=/^(?:GET|HEAD)$/,Ct=/^\/\//,kt={},At={},Tt="*/".concat("*"),Mt=G.createElement("a");Mt.href=_t.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:xt.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$($(e,oe.ajaxSettings),t):$(oe.ajaxSettings,e)},ajaxPrefilter:Y(kt),ajaxTransport:Y(At),ajax:function(t,n){function i(t,n,i,a){var l,d,v,y,w,S=n;2!==b&&(b=2,u&&e.clearTimeout(u),r=void 0,s=a||"",x.readyState=t>0?4:0,l=t>=200&&t<300||304===t,i&&(y=U(h,x,i)),y=W(h,y,x,l),l?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===h.type?S="nocontent":304===t?S="notmodified":(S=y.state,
d=y.data,v=y.error,l=!v)):(v=S,!t&&S||(S="error",t<0&&(t=0))),x.status=t,x.statusText=(n||S)+"",l?m.resolveWith(f,[d,S,x]):m.rejectWith(f,[x,S,v]),x.statusCode(g),g=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,h,l?d:v]),_.fireWith(f,[x,S]),c&&(p.trigger("ajaxComplete",[x,h]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,s,a,u,l,c,d,h=oe.ajaxSetup({},n),f=h.context||h,p=h.context&&(f.nodeType||f.jquery)?oe(f):oe.event,m=oe.Deferred(),_=oe.Callbacks("once memory"),g=h.statusCode||{},v={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=wt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),i(0,t),this}};if(m.promise(x).complete=_.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||_t.href)+"").replace(yt,"").replace(Ct,_t.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=oe.trim(h.dataType||"*").toLowerCase().match(we)||[""],null==h.crossDomain){l=G.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Mt.protocol+"//"+Mt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=oe.param(h.data,h.traditional)),B(kt,h,n,x),2===b)return x;c=oe.event&&h.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!St.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(vt.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=bt.test(o)?o.replace(bt,"$1_="+gt++):o+(vt.test(o)?"&":"?")+"_="+gt++)),h.ifModified&&(oe.lastModified[o]&&x.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&x.setRequestHeader("If-None-Match",oe.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Tt+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)x.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(h.beforeSend.call(f,x,h)===!1||2===b))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](h[d]);if(r=B(At,h,n,x)){if(x.readyState=1,c&&p.trigger("ajaxSend",[x,h]),2===b)return x;h.async&&h.timeout>0&&(u=e.setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,r.send(v,i)}catch(e){if(!(b<2))throw e;i(-1,e)}}else i(-1,"No Transport");return x},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,i,r){return oe.isFunction(n)&&(r=r||i,i=n,n=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:r,data:n,success:i},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Nt=/%20/g,Et=/\[\]$/,jt=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,i=[],r=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){r(this.name,this.value)});else for(n in e)z(n,e[n],t,r);return i.join("&").replace(Nt,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Rt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!Re.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(jt,"\r\n")}}):{name:t.name,value:n.replace(jt,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Lt={0:200,1223:204},Ot=oe.ajaxSettings.xhr();ie.cors=!!Ot&&"withCredentials"in Ot,ie.ajax=Ot=!!Ot,oe.ajaxTransport(function(t){var n,i;if(ie.cors||Ot&&!t.crossDomain)return{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);n=function(e){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Lt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),G.head.appendChild(t[0])},abort:function(){n&&n()}}}});var It=[],Ft=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=It.pop()||oe.expando+"_"+gt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==!1&&(Ft.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ft.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ft,"$1"+r):t.jsonp!==!1&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||oe.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){void 0===o?oe(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,It.push(r)),s&&oe.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||G;var i=pe.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=h([e],t,r),r&&r.length&&oe(r).remove(),oe.merge([],i.childNodes))};var qt=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&qt)return qt.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>-1&&(i=oe.trim(e.slice(a)),e=e.slice(0,a)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&oe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?oe("<div>").append(oe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var i,r,o,s,a,u,l,c=oe.css(e,"position"),d=oe(e),h={};"static"===c&&(e.style.position="relative"),a=d.offset(),o=oe.css(e,"top"),u=oe.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(i=d.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(u)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):d.css(h)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,oe.contains(t,i)?(r=i.getBoundingClientRect(),n=V(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(i=e.offset()),i.top+=oe.css(e[0],"borderTopWidth",!0),i.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-oe.css(n,"marginTop",!0),left:t.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Ke})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(i){return Se(this,function(e,i,r){var o=V(e);return void 0===r?o?o[t]:e[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r)},e,i,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=T(ie.pixelPosition,function(e,n){if(n)return n=A(e,t),Ge.test(n)?oe(e).position()[t]+"px":n})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){oe.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return Se(this,function(t,n,i){var r;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?oe.css(t,n,s):oe.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var Pt=e.jQuery,Ht=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Ht),t&&e.jQuery===oe&&(e.jQuery=Pt),oe},t||(e.jQuery=e.$=oe),oe}),define("jquery.noconflict",["jquery"],function(e){return e.noConflict(!0)}),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var s=e[r];t(i,s,n(s),e)}return i}function r(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function o(e,t){for(var n=null==e?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}function s(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function a(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}function u(e,t){var n=null==e?0:e.length;return!!n&&y(e,t,0)>-1}function l(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function c(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function d(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function h(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function f(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function p(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function m(e){return e.split("")}function _(e){return e.match(qt)||[]}function g(e,t,n){var i;return n(e,function(e,n,r){if(t(e,n,r))return i=n,!1}),i}function v(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function y(e,t,n){return t===t?z(e,t,n):v(e,w,n)}function b(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function w(e){return e!==e}function x(e,t){var n=null==e?0:e.length;return n?T(e,t)/n:De}function S(e){return function(t){return null==t?Z:t[e]}}function C(e){return function(t){return null==e?Z:e[t]}}function k(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function A(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function T(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);o!==Z&&(n=n===Z?o:n+o)}return n}function M(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function N(e,t){return c(t,function(t){return[t,e[t]]})}function E(e){return function(t){return e(t)}}function j(e,t){return c(t,function(t){return e[t]})}function D(e,t){return e.has(t)}function R(e,t){for(var n=-1,i=e.length;++n<i&&y(t,e[n],0)>-1;);return n}function L(e,t){for(var n=e.length;n--&&y(t,e[n],0)>-1;);return n}function O(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}function I(e){return"\\"+Qn[e]}function F(e,t){return null==e?Z:e[t]}function q(e){return Bn.test(e)}function P(e){return $n.test(e)}function H(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function Y(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function B(e,t){return function(n){return e(t(n))}}function $(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n];s!==t&&s!==se||(e[n]=se,o[r++]=n)}return o}function U(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function z(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function V(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}function J(e){return q(e)?X(e):pi(e)}function G(e){return q(e)?Q(e):m(e)}function X(e){for(var t=Hn.lastIndex=0;Hn.test(e);)++t;return t}function Q(e){return e.match(Hn)||[]}function K(e){return e.match(Yn)||[]}var Z,ee="4.17.4",te=200,ne="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ie="Expected a function",re="__lodash_hash_undefined__",oe=500,se="__lodash_placeholder__",ae=1,ue=2,le=4,ce=1,de=2,he=1,fe=2,pe=4,me=8,_e=16,ge=32,ve=64,ye=128,be=256,we=512,xe=30,Se="...",Ce=800,ke=16,Ae=1,Te=2,Me=3,Ne=1/0,Ee=9007199254740991,je=1.7976931348623157e308,De=NaN,Re=4294967295,Le=Re-1,Oe=Re>>>1,Ie=[["ary",ye],["bind",he],["bindKey",fe],["curry",me],["curryRight",_e],["flip",we],["partial",ge],["partialRight",ve],["rearg",be]],Fe="[object Arguments]",qe="[object Array]",Pe="[object AsyncFunction]",He="[object Boolean]",Ye="[object Date]",Be="[object DOMException]",$e="[object Error]",Ue="[object Function]",We="[object GeneratorFunction]",ze="[object Map]",Ve="[object Number]",Je="[object Null]",Ge="[object Object]",Xe="[object Promise]",Qe="[object Proxy]",Ke="[object RegExp]",Ze="[object Set]",et="[object String]",tt="[object Symbol]",nt="[object Undefined]",it="[object WeakMap]",rt="[object WeakSet]",ot="[object ArrayBuffer]",st="[object DataView]",at="[object Float32Array]",ut="[object Float64Array]",lt="[object Int8Array]",ct="[object Int16Array]",dt="[object Int32Array]",ht="[object Uint8Array]",ft="[object Uint8ClampedArray]",pt="[object Uint16Array]",mt="[object Uint32Array]",_t=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,wt=RegExp(yt.source),xt=RegExp(bt.source),St=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tt=/^\w*$/,Mt=/^\./,Nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Et=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(Et.source),Dt=/^\s+|\s+$/g,Rt=/^\s+/,Lt=/\s+$/,Ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,It=/\{\n\/\* \[wrapped with (.+)\] \*/,Ft=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pt=/\\(\\)?/g,Ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yt=/\w*$/,Bt=/^[-+]0x[0-9a-f]+$/i,$t=/^0b[01]+$/i,Ut=/^\[object .+?Constructor\]$/,Wt=/^0o[0-7]+$/i,zt=/^(?:0|[1-9]\d*)$/,Vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jt=/($^)/,Gt=/['\n\r\u2028\u2029\\]/g,Xt="\\ud800-\\udfff",Qt="\\u0300-\\u036f",Kt="\\ufe20-\\ufe2f",Zt="\\u20d0-\\u20ff",en=Qt+Kt+Zt,tn="\\u2700-\\u27bf",nn="a-z\\xdf-\\xf6\\xf8-\\xff",rn="\\xac\\xb1\\xd7\\xf7",on="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sn="\\u2000-\\u206f",an=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",un="A-Z\\xc0-\\xd6\\xd8-\\xde",ln="\\ufe0e\\ufe0f",cn=rn+on+sn+an,dn="['’]",hn="["+Xt+"]",fn="["+cn+"]",pn="["+en+"]",mn="\\d+",_n="["+tn+"]",gn="["+nn+"]",vn="[^"+Xt+cn+mn+tn+nn+un+"]",yn="\\ud83c[\\udffb-\\udfff]",bn="(?:"+pn+"|"+yn+")",wn="[^"+Xt+"]",xn="(?:\\ud83c[\\udde6-\\uddff]){2}",Sn="[\\ud800-\\udbff][\\udc00-\\udfff]",Cn="["+un+"]",kn="\\u200d",An="(?:"+gn+"|"+vn+")",Tn="(?:"+Cn+"|"+vn+")",Mn="(?:"+dn+"(?:d|ll|m|re|s|t|ve))?",Nn="(?:"+dn+"(?:D|LL|M|RE|S|T|VE))?",En=bn+"?",jn="["+ln+"]?",Dn="(?:"+kn+"(?:"+[wn,xn,Sn].join("|")+")"+jn+En+")*",Rn="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Ln="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",On=jn+En+Dn,In="(?:"+[_n,xn,Sn].join("|")+")"+On,Fn="(?:"+[wn+pn+"?",pn,xn,Sn,hn].join("|")+")",qn=RegExp(dn,"g"),Pn=RegExp(pn,"g"),Hn=RegExp(yn+"(?="+yn+")|"+Fn+On,"g"),Yn=RegExp([Cn+"?"+gn+"+"+Mn+"(?="+[fn,Cn,"$"].join("|")+")",Tn+"+"+Nn+"(?="+[fn,Cn+An,"$"].join("|")+")",Cn+"?"+An+"+"+Mn,Cn+"+"+Nn,Ln,Rn,mn,In].join("|"),"g"),Bn=RegExp("["+kn+Xt+en+ln+"]"),$n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Un=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wn=-1,zn={};zn[at]=zn[ut]=zn[lt]=zn[ct]=zn[dt]=zn[ht]=zn[ft]=zn[pt]=zn[mt]=!0,zn[Fe]=zn[qe]=zn[ot]=zn[He]=zn[st]=zn[Ye]=zn[$e]=zn[Ue]=zn[ze]=zn[Ve]=zn[Ge]=zn[Ke]=zn[Ze]=zn[et]=zn[it]=!1;var Vn={};Vn[Fe]=Vn[qe]=Vn[ot]=Vn[st]=Vn[He]=Vn[Ye]=Vn[at]=Vn[ut]=Vn[lt]=Vn[ct]=Vn[dt]=Vn[ze]=Vn[Ve]=Vn[Ge]=Vn[Ke]=Vn[Ze]=Vn[et]=Vn[tt]=Vn[ht]=Vn[ft]=Vn[pt]=Vn[mt]=!0,Vn[$e]=Vn[Ue]=Vn[it]=!1;var Jn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Gn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kn=parseFloat,Zn=parseInt,ei="object"==typeof global&&global&&global.Object===Object&&global,ti="object"==typeof self&&self&&self.Object===Object&&self,ni=ei||ti||Function("return this")(),ii="object"==typeof exports&&exports&&!exports.nodeType&&exports,ri=ii&&"object"==typeof module&&module&&!module.nodeType&&module,oi=ri&&ri.exports===ii,si=oi&&ei.process,ai=function(){try{return si&&si.binding&&si.binding("util")}catch(e){}}(),ui=ai&&ai.isArrayBuffer,li=ai&&ai.isDate,ci=ai&&ai.isMap,di=ai&&ai.isRegExp,hi=ai&&ai.isSet,fi=ai&&ai.isTypedArray,pi=S("length"),mi=C(Jn),_i=C(Gn),gi=C(Xn),vi=function m(C){function z(e){if(lu(e)&&!bh(e)&&!(e instanceof qt)){if(e instanceof Q)return e;if(bc.call(e,"__wrapped__"))return ss(e)}return new Q(e)}function X(){}function Q(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=Z}function qt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function Xt(){var e=new qt(this.__wrapped__);return e.__actions__=Hr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Hr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Hr(this.__views__),e}function Qt(){if(this.__filtered__){var e=new qt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Kt(){var e=this.__wrapped__.value(),t=this.__dir__,n=bh(e),i=t<0,r=n?e.length:0,o=Eo(0,r,this.__views__),s=o.start,a=o.end,u=a-s,l=i?a:s-1,c=this.__iteratees__,d=c.length,h=0,f=Xc(u,this.__takeCount__);if(!n||!i&&r==u&&f==u)return wr(e,this.__actions__);var p=[];e:for(;u--&&h<f;){l+=t;for(var m=-1,_=e[l];++m<d;){var g=c[m],v=g.iteratee,y=g.type,b=v(_);if(y==Te)_=b;else if(!b){if(y==Ae)continue e;break e}}p[h++]=_}return p}function Zt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function en(){this.__data__=sd?sd(null):{},this.size=0}function tn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function nn(e){var t=this.__data__;if(sd){var n=t[e];return n===re?Z:n}return bc.call(t,e)?t[e]:Z}function rn(e){var t=this.__data__;return sd?t[e]!==Z:bc.call(t,e)}function on(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sd&&t===Z?re:t,this}function sn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function an(){this.__data__=[],this.size=0}function un(e){var t=this.__data__,n=Rn(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():Lc.call(t,n,1),--this.size,!0}function ln(e){var t=this.__data__,n=Rn(t,e);return n<0?Z:t[n][1]}function cn(e){return Rn(this.__data__,e)>-1}function dn(e,t){var n=this.__data__,i=Rn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function fn(){this.size=0,this.__data__={hash:new Zt,map:new(nd||sn),string:new Zt}}function pn(e){var t=Ao(this,e).delete(e);return this.size-=t?1:0,t}function mn(e){return Ao(this,e).get(e)}function _n(e){return Ao(this,e).has(e)}function gn(e,t){var n=Ao(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function vn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new hn;++t<n;)this.add(e[t])}function yn(e){return this.__data__.set(e,re),this}function bn(e){return this.__data__.has(e)}function wn(e){var t=this.__data__=new sn(e);this.size=t.size}function xn(){this.__data__=new sn,this.size=0}function Sn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Cn(e){return this.__data__.get(e)}function kn(e){return this.__data__.has(e)}function An(e,t){var n=this.__data__;if(n instanceof sn){var i=n.__data__;if(!nd||i.length<te-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new hn(i)}return n.set(e,t),this.size=n.size,this}function Tn(e,t){var n=bh(e),i=!n&&yh(e),r=!n&&!i&&xh(e),o=!n&&!i&&!r&&Th(e),s=n||i||r||o,a=s?M(e.length,fc):[],u=a.length;for(var l in e)!t&&!bc.call(e,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||qo(l,u))||a.push(l);return a}function Mn(e){var t=e.length;return t?e[nr(0,t-1)]:Z}function Nn(e,t){return ns(Hr(e),Yn(t,0,e.length))}function En(e){return ns(Hr(e))}function jn(e,t,n){(n===Z||Ga(e[t],n))&&(n!==Z||t in e)||Fn(e,t,n)}function Dn(e,t,n){var i=e[t];bc.call(e,t)&&Ga(i,n)&&(n!==Z||t in e)||Fn(e,t,n)}function Rn(e,t){for(var n=e.length;n--;)if(Ga(e[n][0],t))return n;return-1}function Ln(e,t,n,i){return vd(e,function(e,r,o){t(i,e,n(e),o)}),i}function On(e,t){return e&&Yr(t,Uu(t),e)}function In(e,t){return e&&Yr(t,Wu(t),e)}function Fn(e,t,n){"__proto__"==t&&qc?qc(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Hn(e,t){for(var n=-1,i=t.length,r=sc(i),o=null==e;++n<i;)r[n]=o?Z:Yu(e,t[n]);return r}function Yn(e,t,n){return e===e&&(n!==Z&&(e=e<=n?e:n),t!==Z&&(e=e>=t?e:t)),e}function Bn(e,t,n,i,o,s){var a,u=t&ae,l=t&ue,c=t&le;if(n&&(a=o?n(e,i,o,s):n(e)),a!==Z)return a;if(!uu(e))return e;var d=bh(e);if(d){if(a=Ro(e),!u)return Hr(e,a)}else{var h=Ed(e),f=h==Ue||h==We;if(xh(e))return Mr(e,u);if(h==Ge||h==Fe||f&&!o){if(a=l||f?{}:Lo(e),!u)return l?$r(e,In(a,e)):Br(e,On(a,e))}else{if(!Vn[h])return o?e:{};a=Oo(e,h,Bn,u)}}s||(s=new wn);var p=s.get(e);if(p)return p;s.set(e,a);var m=c?l?xo:wo:l?Wu:Uu,_=d?Z:m(e);return r(_||e,function(i,r){_&&(r=i,i=e[r]),Dn(a,r,Bn(i,t,n,r,e,s))}),a}function $n(e){var t=Uu(e);return function(n){return Jn(n,e,t)}}function Jn(e,t,n){var i=n.length;if(null==e)return!i;for(e=dc(e);i--;){var r=n[i],o=t[r],s=e[r];if(s===Z&&!(r in e)||!o(s))return!1}return!0}function Gn(e,t,n){if("function"!=typeof e)throw new pc(ie);return Rd(function(){e.apply(Z,n)},t)}function Xn(e,t,n,i){var r=-1,o=u,s=!0,a=e.length,d=[],h=t.length;if(!a)return d;n&&(t=c(t,E(n))),i?(o=l,s=!1):t.length>=te&&(o=D,s=!1,t=new vn(t));e:for(;++r<a;){var f=e[r],p=null==n?f:n(f);if(f=i||0!==f?f:0,s&&p===p){for(var m=h;m--;)if(t[m]===p)continue e;d.push(f)}else o(t,p,i)||d.push(f)}return d}function Qn(e,t){var n=!0;return vd(e,function(e,i,r){return n=!!t(e,i,r)}),n}function ei(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],s=t(o);if(null!=s&&(a===Z?s===s&&!bu(s):n(s,a)))var a=s,u=o}return u}function ti(e,t,n,i){var r=e.length;for(n=Au(n),n<0&&(n=-n>r?0:r+n),i=i===Z||i>r?r:Au(i),i<0&&(i+=r),i=n>i?0:Tu(i);n<i;)e[n++]=t;return e}function ii(e,t){var n=[];return vd(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function ri(e,t,n,i,r){var o=-1,s=e.length;for(n||(n=Fo),r||(r=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?ri(a,t-1,n,i,r):d(r,a):i||(r[r.length]=a)}return r}function si(e,t){return e&&bd(e,t,Uu)}function ai(e,t){return e&&wd(e,t,Uu)}function pi(e,t){return a(t,function(t){return ou(e[t])})}function vi(e,t){t=Ar(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[is(t[n++])];return n&&n==i?e:Z}function bi(e,t,n){var i=t(e);return bh(e)?i:d(i,n(e))}function wi(e){return null==e?e===Z?nt:Je:Fc&&Fc in dc(e)?No(e):Xo(e)}function xi(e,t){return e>t}function Si(e,t){return null!=e&&bc.call(e,t)}function Ci(e,t){return null!=e&&t in dc(e)}function ki(e,t,n){return e>=Xc(t,n)&&e<Gc(t,n)}function Ai(e,t,n){for(var i=n?l:u,r=e[0].length,o=e.length,s=o,a=sc(o),d=1/0,h=[];s--;){var f=e[s];s&&t&&(f=c(f,E(t))),d=Xc(f.length,d),a[s]=!n&&(t||r>=120&&f.length>=120)?new vn(s&&f):Z}f=e[0];var p=-1,m=a[0];e:for(;++p<r&&h.length<d;){var _=f[p],g=t?t(_):_;if(_=n||0!==_?_:0,!(m?D(m,g):i(h,g,n))){for(s=o;--s;){var v=a[s];if(!(v?D(v,g):i(e[s],g,n)))continue e}m&&m.push(g),h.push(_)}}return h}function Ti(e,t,n,i){return si(e,function(e,r,o){t(i,n(e),r,o)}),i}function Mi(e,t,i){t=Ar(t,e),e=Ko(e,t);var r=null==e?e:e[is(ks(t))];return null==r?Z:n(r,e,i)}function Ni(e){return lu(e)&&wi(e)==Fe}function Ei(e){return lu(e)&&wi(e)==ot}function ji(e){return lu(e)&&wi(e)==Ye}function Di(e,t,n,i,r){return e===t||(null==e||null==t||!lu(e)&&!lu(t)?e!==e&&t!==t:Ri(e,t,n,i,Di,r))}function Ri(e,t,n,i,r,o){var s=bh(e),a=bh(t),u=s?qe:Ed(e),l=a?qe:Ed(t);u=u==Fe?Ge:u,l=l==Fe?Ge:l;var c=u==Ge,d=l==Ge,h=u==l;if(h&&xh(e)){if(!xh(t))return!1;s=!0,c=!1}if(h&&!c)return o||(o=new wn),s||Th(e)?go(e,t,n,i,r,o):vo(e,t,u,n,i,r,o);if(!(n&ce)){var f=c&&bc.call(e,"__wrapped__"),p=d&&bc.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,_=p?t.value():t;return o||(o=new wn),r(m,_,n,i,o)}}return!!h&&(o||(o=new wn),yo(e,t,n,i,r,o))}function Li(e){return lu(e)&&Ed(e)==ze}function Oi(e,t,n,i){var r=n.length,o=r,s=!i;if(null==e)return!o;for(e=dc(e);r--;){var a=n[r];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<o;){a=n[r];var u=a[0],l=e[u],c=a[1];if(s&&a[2]){if(l===Z&&!(u in e))return!1}else{var d=new wn;if(i)var h=i(l,c,u,e,t,d);if(!(h===Z?Di(c,l,ce|de,i,d):h))return!1}}return!0}function Ii(e){if(!uu(e)||$o(e))return!1;var t=ou(e)?Ac:Ut;return t.test(rs(e))}function Fi(e){return lu(e)&&wi(e)==Ke}function qi(e){return lu(e)&&Ed(e)==Ze}function Pi(e){return lu(e)&&au(e.length)&&!!zn[wi(e)]}function Hi(e){return"function"==typeof e?e:null==e?Ll:"object"==typeof e?bh(e)?zi(e[0],e[1]):Wi(e):Bl(e)}function Yi(e){if(!Uo(e))return Jc(e);var t=[];for(var n in dc(e))bc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Bi(e){if(!uu(e))return Go(e);var t=Uo(e),n=[];for(var i in e)("constructor"!=i||!t&&bc.call(e,i))&&n.push(i);return n}function $i(e,t){return e<t}function Ui(e,t){var n=-1,i=Xa(e)?sc(e.length):[];return vd(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function Wi(e){var t=To(e);return 1==t.length&&t[0][2]?zo(t[0][0],t[0][1]):function(n){return n===e||Oi(n,e,t)}}function zi(e,t){return Ho(e)&&Wo(t)?zo(is(e),t):function(n){var i=Yu(n,e);return i===Z&&i===t?$u(n,e):Di(t,i,ce|de)}}function Vi(e,t,n,i,r){e!==t&&bd(t,function(o,s){if(uu(o))r||(r=new wn),Ji(e,t,s,n,Vi,i,r);else{var a=i?i(e[s],o,s+"",e,t,r):Z;a===Z&&(a=o),jn(e,s,a)}},Wu)}function Ji(e,t,n,i,r,o,s){var a=e[n],u=t[n],l=s.get(u);if(l)return void jn(e,n,l);var c=o?o(a,u,n+"",e,t,s):Z,d=c===Z;if(d){var h=bh(u),f=!h&&xh(u),p=!h&&!f&&Th(u);c=u,h||f||p?bh(a)?c=a:Qa(a)?c=Hr(a):f?(d=!1,c=Mr(u,!0)):p?(d=!1,c=Or(u,!0)):c=[]:gu(u)||yh(u)?(c=a,yh(a)?c=Nu(a):(!uu(a)||i&&ou(a))&&(c=Lo(u))):d=!1}d&&(s.set(u,c),r(c,u,i,o,s),s.delete(u)),jn(e,n,c)}function Gi(e,t){var n=e.length;if(n)return t+=t<0?n:0,qo(t,n)?e[t]:Z}function Xi(e,t,n){var i=-1;t=c(t.length?t:[Ll],E(ko()));var r=Ui(e,function(e,n,r){var o=c(t,function(t){return t(e)});return{criteria:o,index:++i,value:e
}});return A(r,function(e,t){return Fr(e,t,n)})}function Qi(e,t){return Ki(e,t,function(t,n){return $u(e,n)})}function Ki(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var s=t[i],a=vi(e,s);n(a,s)&&ur(o,Ar(s,e),a)}return o}function Zi(e){return function(t){return vi(t,e)}}function er(e,t,n,i){var r=i?b:y,o=-1,s=t.length,a=e;for(e===t&&(t=Hr(t)),n&&(a=c(e,E(n)));++o<s;)for(var u=0,l=t[o],d=n?n(l):l;(u=r(a,d,u,i))>-1;)a!==e&&Lc.call(a,u,1),Lc.call(e,u,1);return e}function tr(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;qo(r)?Lc.call(e,r,1):vr(e,r)}}return e}function nr(e,t){return e+$c(Zc()*(t-e+1))}function ir(e,t,n,i){for(var r=-1,o=Gc(Bc((t-e)/(n||1)),0),s=sc(o);o--;)s[i?o:++r]=e,e+=n;return s}function rr(e,t){var n="";if(!e||t<1||t>Ee)return n;do t%2&&(n+=e),t=$c(t/2),t&&(e+=e);while(t);return n}function or(e,t){return Ld(Qo(e,t,Ll),e+"")}function sr(e){return Mn(il(e))}function ar(e,t){var n=il(e);return ns(n,Yn(t,0,n.length))}function ur(e,t,n,i){if(!uu(e))return e;t=Ar(t,e);for(var r=-1,o=t.length,s=o-1,a=e;null!=a&&++r<o;){var u=is(t[r]),l=n;if(r!=s){var c=a[u];l=i?i(c,u,a):Z,l===Z&&(l=uu(c)?c:qo(t[r+1])?[]:{})}Dn(a,u,l),a=a[u]}return e}function lr(e){return ns(il(e))}function cr(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=sc(r);++i<r;)o[i]=e[i+t];return o}function dr(e,t){var n;return vd(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function hr(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t===t&&r<=Oe){for(;i<r;){var o=i+r>>>1,s=e[o];null!==s&&!bu(s)&&(n?s<=t:s<t)?i=o+1:r=o}return r}return fr(e,t,Ll,n)}function fr(e,t,n,i){t=n(t);for(var r=0,o=null==e?0:e.length,s=t!==t,a=null===t,u=bu(t),l=t===Z;r<o;){var c=$c((r+o)/2),d=n(e[c]),h=d!==Z,f=null===d,p=d===d,m=bu(d);if(s)var _=i||p;else _=l?p&&(i||h):a?p&&h&&(i||!f):u?p&&h&&!f&&(i||!m):!f&&!m&&(i?d<=t:d<t);_?r=c+1:o=c}return Xc(o,Le)}function pr(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!Ga(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function mr(e){return"number"==typeof e?e:bu(e)?De:+e}function _r(e){if("string"==typeof e)return e;if(bh(e))return c(e,_r)+"";if(bu(e))return _d?_d.call(e):"";var t=e+"";return"0"==t&&1/e==-Ne?"-0":t}function gr(e,t,n){var i=-1,r=u,o=e.length,s=!0,a=[],c=a;if(n)s=!1,r=l;else if(o>=te){var d=t?null:Ad(e);if(d)return U(d);s=!1,r=D,c=new vn}else c=t?[]:a;e:for(;++i<o;){var h=e[i],f=t?t(h):h;if(h=n||0!==h?h:0,s&&f===f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),a.push(h)}else r(c,f,n)||(c!==a&&c.push(f),a.push(h))}return a}function vr(e,t){return t=Ar(t,e),e=Ko(e,t),null==e||delete e[is(ks(t))]}function yr(e,t,n,i){return ur(e,t,n(vi(e,t)),i)}function br(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?cr(e,i?0:o,i?o+1:r):cr(e,i?o+1:0,i?r:o)}function wr(e,t){var n=e;return n instanceof qt&&(n=n.value()),h(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},n)}function xr(e,t,n){var i=e.length;if(i<2)return i?gr(e[0]):[];for(var r=-1,o=sc(i);++r<i;)for(var s=e[r],a=-1;++a<i;)a!=r&&(o[r]=Xn(o[r]||s,e[a],t,n));return gr(ri(o,1),t,n)}function Sr(e,t,n){for(var i=-1,r=e.length,o=t.length,s={};++i<r;){var a=i<o?t[i]:Z;n(s,e[i],a)}return s}function Cr(e){return Qa(e)?e:[]}function kr(e){return"function"==typeof e?e:Ll}function Ar(e,t){return bh(e)?e:Ho(e,t)?[e]:Od(ju(e))}function Tr(e,t,n){var i=e.length;return n=n===Z?i:n,!t&&n>=i?e:cr(e,t,n)}function Mr(e,t){if(t)return e.slice();var n=e.length,i=Ec?Ec(n):new e.constructor(n);return e.copy(i),i}function Nr(e){var t=new e.constructor(e.byteLength);return new Nc(t).set(new Nc(e)),t}function Er(e,t){var n=t?Nr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function jr(t,n,i){var r=n?i(Y(t),ae):Y(t);return h(r,e,new t.constructor)}function Dr(e){var t=new e.constructor(e.source,Yt.exec(e));return t.lastIndex=e.lastIndex,t}function Rr(e,n,i){var r=n?i(U(e),ae):U(e);return h(r,t,new e.constructor)}function Lr(e){return md?dc(md.call(e)):{}}function Or(e,t){var n=t?Nr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ir(e,t){if(e!==t){var n=e!==Z,i=null===e,r=e===e,o=bu(e),s=t!==Z,a=null===t,u=t===t,l=bu(t);if(!a&&!l&&!o&&e>t||o&&s&&u&&!a&&!l||i&&s&&u||!n&&u||!r)return 1;if(!i&&!o&&!l&&e<t||l&&n&&r&&!i&&!o||a&&n&&r||!s&&r||!u)return-1}return 0}function Fr(e,t,n){for(var i=-1,r=e.criteria,o=t.criteria,s=r.length,a=n.length;++i<s;){var u=Ir(r[i],o[i]);if(u){if(i>=a)return u;var l=n[i];return u*("desc"==l?-1:1)}}return e.index-t.index}function qr(e,t,n,i){for(var r=-1,o=e.length,s=n.length,a=-1,u=t.length,l=Gc(o-s,0),c=sc(u+l),d=!i;++a<u;)c[a]=t[a];for(;++r<s;)(d||r<o)&&(c[n[r]]=e[r]);for(;l--;)c[a++]=e[r++];return c}function Pr(e,t,n,i){for(var r=-1,o=e.length,s=-1,a=n.length,u=-1,l=t.length,c=Gc(o-a,0),d=sc(c+l),h=!i;++r<c;)d[r]=e[r];for(var f=r;++u<l;)d[f+u]=t[u];for(;++s<a;)(h||r<o)&&(d[f+n[s]]=e[r++]);return d}function Hr(e,t){var n=-1,i=e.length;for(t||(t=sc(i));++n<i;)t[n]=e[n];return t}function Yr(e,t,n,i){var r=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],u=i?i(n[a],e[a],a,n,e):Z;u===Z&&(u=e[a]),r?Fn(n,a,u):Dn(n,a,u)}return n}function Br(e,t){return Yr(e,Md(e),t)}function $r(e,t){return Yr(e,Nd(e),t)}function Ur(e,t){return function(n,r){var o=bh(n)?i:Ln,s=t?t():{};return o(n,e,ko(r,2),s)}}function Wr(e){return or(function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:Z,s=r>2?n[2]:Z;for(o=e.length>3&&"function"==typeof o?(r--,o):Z,s&&Po(n[0],n[1],s)&&(o=r<3?Z:o,r=1),t=dc(t);++i<r;){var a=n[i];a&&e(t,a,i,o)}return t})}function zr(e,t){return function(n,i){if(null==n)return n;if(!Xa(n))return e(n,i);for(var r=n.length,o=t?r:-1,s=dc(n);(t?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function Vr(e){return function(t,n,i){for(var r=-1,o=dc(t),s=i(t),a=s.length;a--;){var u=s[e?a:++r];if(n(o[u],u,o)===!1)break}return t}}function Jr(e,t,n){function i(){var t=this&&this!==ni&&this instanceof i?o:e;return t.apply(r?n:this,arguments)}var r=t&he,o=Qr(e);return i}function Gr(e){return function(t){t=ju(t);var n=q(t)?G(t):Z,i=n?n[0]:t.charAt(0),r=n?Tr(n,1).join(""):t.slice(1);return i[e]()+r}}function Xr(e){return function(t){return h(Nl(ll(t).replace(qn,"")),e,"")}}function Qr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=gd(e.prototype),i=e.apply(n,t);return uu(i)?i:n}}function Kr(e,t,i){function r(){for(var s=arguments.length,a=sc(s),u=s,l=Co(r);u--;)a[u]=arguments[u];var c=s<3&&a[0]!==l&&a[s-1]!==l?[]:$(a,l);if(s-=c.length,s<i)return lo(e,t,to,r.placeholder,Z,a,c,Z,Z,i-s);var d=this&&this!==ni&&this instanceof r?o:e;return n(d,this,a)}var o=Qr(e);return r}function Zr(e){return function(t,n,i){var r=dc(t);if(!Xa(t)){var o=ko(n,3);t=Uu(t),n=function(e){return o(r[e],e,r)}}var s=e(t,n,i);return s>-1?r[o?t[s]:s]:Z}}function eo(e){return bo(function(t){var n=t.length,i=n,r=Q.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new pc(ie);if(r&&!s&&"wrapper"==So(o))var s=new Q([],!0)}for(i=s?i:n;++i<n;){o=t[i];var a=So(o),u="wrapper"==a?Td(o):Z;s=u&&Bo(u[0])&&u[1]==(ye|me|ge|be)&&!u[4].length&&1==u[9]?s[So(u[0])].apply(s,u[3]):1==o.length&&Bo(o)?s[a]():s.thru(o)}return function(){var e=arguments,i=e[0];if(s&&1==e.length&&bh(i))return s.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}})}function to(e,t,n,i,r,o,s,a,u,l){function c(){for(var g=arguments.length,v=sc(g),y=g;y--;)v[y]=arguments[y];if(p)var b=Co(c),w=O(v,b);if(i&&(v=qr(v,i,r,p)),o&&(v=Pr(v,o,s,p)),g-=w,p&&g<l){var x=$(v,b);return lo(e,t,to,c.placeholder,n,v,x,a,u,l-g)}var S=h?n:this,C=f?S[e]:e;return g=v.length,a?v=Zo(v,a):m&&g>1&&v.reverse(),d&&u<g&&(v.length=u),this&&this!==ni&&this instanceof c&&(C=_||Qr(C)),C.apply(S,v)}var d=t&ye,h=t&he,f=t&fe,p=t&(me|_e),m=t&we,_=f?Z:Qr(e);return c}function no(e,t){return function(n,i){return Ti(n,e,t(i),{})}}function io(e,t){return function(n,i){var r;if(n===Z&&i===Z)return t;if(n!==Z&&(r=n),i!==Z){if(r===Z)return i;"string"==typeof n||"string"==typeof i?(n=_r(n),i=_r(i)):(n=mr(n),i=mr(i)),r=e(n,i)}return r}}function ro(e){return bo(function(t){return t=c(t,E(ko())),or(function(i){var r=this;return e(t,function(e){return n(e,r,i)})})})}function oo(e,t){t=t===Z?" ":_r(t);var n=t.length;if(n<2)return n?rr(t,e):t;var i=rr(t,Bc(e/J(t)));return q(t)?Tr(G(i),0,e).join(""):i.slice(0,e)}function so(e,t,i,r){function o(){for(var t=-1,u=arguments.length,l=-1,c=r.length,d=sc(c+u),h=this&&this!==ni&&this instanceof o?a:e;++l<c;)d[l]=r[l];for(;u--;)d[l++]=arguments[++t];return n(h,s?i:this,d)}var s=t&he,a=Qr(e);return o}function ao(e){return function(t,n,i){return i&&"number"!=typeof i&&Po(t,n,i)&&(n=i=Z),t=ku(t),n===Z?(n=t,t=0):n=ku(n),i=i===Z?t<n?1:-1:ku(i),ir(t,n,i,e)}}function uo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Mu(t),n=Mu(n)),e(t,n)}}function lo(e,t,n,i,r,o,s,a,u,l){var c=t&me,d=c?s:Z,h=c?Z:s,f=c?o:Z,p=c?Z:o;t|=c?ge:ve,t&=~(c?ve:ge),t&pe||(t&=~(he|fe));var m=[e,t,r,f,d,p,h,a,u,l],_=n.apply(Z,m);return Bo(e)&&Dd(_,m),_.placeholder=i,es(_,e,t)}function co(e){var t=cc[e];return function(e,n){if(e=Mu(e),n=null==n?0:Xc(Au(n),292)){var i=(ju(e)+"e").split("e"),r=t(i[0]+"e"+(+i[1]+n));return i=(ju(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function ho(e){return function(t){var n=Ed(t);return n==ze?Y(t):n==Ze?W(t):N(t,e(t))}}function fo(e,t,n,i,r,o,s,a){var u=t&fe;if(!u&&"function"!=typeof e)throw new pc(ie);var l=i?i.length:0;if(l||(t&=~(ge|ve),i=r=Z),s=s===Z?s:Gc(Au(s),0),a=a===Z?a:Au(a),l-=r?r.length:0,t&ve){var c=i,d=r;i=r=Z}var h=u?Z:Td(e),f=[e,t,n,i,r,c,d,o,s,a];if(h&&Jo(f,h),e=f[0],t=f[1],n=f[2],i=f[3],r=f[4],a=f[9]=f[9]===Z?u?0:e.length:Gc(f[9]-l,0),!a&&t&(me|_e)&&(t&=~(me|_e)),t&&t!=he)p=t==me||t==_e?Kr(e,t,a):t!=ge&&t!=(he|ge)||r.length?to.apply(Z,f):so(e,t,n,i);else var p=Jr(e,t,n);var m=h?xd:Dd;return es(m(p,f),e,t)}function po(e,t,n,i){return e===Z||Ga(e,gc[n])&&!bc.call(i,n)?t:e}function mo(e,t,n,i,r,o){return uu(e)&&uu(t)&&(o.set(t,e),Vi(e,t,Z,mo,o),o.delete(t)),e}function _o(e){return gu(e)?Z:e}function go(e,t,n,i,r,o){var s=n&ce,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,d=!0,h=n&de?new vn:Z;for(o.set(e,t),o.set(t,e);++c<a;){var f=e[c],m=t[c];if(i)var _=s?i(m,f,c,t,e,o):i(f,m,c,e,t,o);if(_!==Z){if(_)continue;d=!1;break}if(h){if(!p(t,function(e,t){if(!D(h,t)&&(f===e||r(f,e,n,i,o)))return h.push(t)})){d=!1;break}}else if(f!==m&&!r(f,m,n,i,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function vo(e,t,n,i,r,o,s){switch(n){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ot:return!(e.byteLength!=t.byteLength||!o(new Nc(e),new Nc(t)));case He:case Ye:case Ve:return Ga(+e,+t);case $e:return e.name==t.name&&e.message==t.message;case Ke:case et:return e==t+"";case ze:var a=Y;case Ze:var u=i&ce;if(a||(a=U),e.size!=t.size&&!u)return!1;var l=s.get(e);if(l)return l==t;i|=de,s.set(e,t);var c=go(a(e),a(t),i,r,o,s);return s.delete(e),c;case tt:if(md)return md.call(e)==md.call(t)}return!1}function yo(e,t,n,i,r,o){var s=n&ce,a=wo(e),u=a.length,l=wo(t),c=l.length;if(u!=c&&!s)return!1;for(var d=u;d--;){var h=a[d];if(!(s?h in t:bc.call(t,h)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var m=s;++d<u;){h=a[d];var _=e[h],g=t[h];if(i)var v=s?i(g,_,h,t,e,o):i(_,g,h,e,t,o);if(!(v===Z?_===g||r(_,g,n,i,o):v)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o.delete(e),o.delete(t),p}function bo(e){return Ld(Qo(e,Z,gs),e+"")}function wo(e){return bi(e,Uu,Md)}function xo(e){return bi(e,Wu,Nd)}function So(e){for(var t=e.name+"",n=ud[t],i=bc.call(ud,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function Co(e){var t=bc.call(z,"placeholder")?z:e;return t.placeholder}function ko(){var e=z.iteratee||Ol;return e=e===Ol?Hi:e,arguments.length?e(arguments[0],arguments[1]):e}function Ao(e,t){var n=e.__data__;return Yo(t)?n["string"==typeof t?"string":"hash"]:n.map}function To(e){for(var t=Uu(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Wo(r)]}return t}function Mo(e,t){var n=F(e,t);return Ii(n)?n:Z}function No(e){var t=bc.call(e,Fc),n=e[Fc];try{e[Fc]=Z;var i=!0}catch(e){}var r=Sc.call(e);return i&&(t?e[Fc]=n:delete e[Fc]),r}function Eo(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Xc(t,e+s);break;case"takeRight":e=Gc(e,t-s)}}return{start:e,end:t}}function jo(e){var t=e.match(It);return t?t[1].split(Ft):[]}function Do(e,t,n){t=Ar(t,e);for(var i=-1,r=t.length,o=!1;++i<r;){var s=is(t[i]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++i!=r?o:(r=null==e?0:e.length,!!r&&au(r)&&qo(s,r)&&(bh(e)||yh(e)))}function Ro(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&bc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Lo(e){return"function"!=typeof e.constructor||Uo(e)?{}:gd(jc(e))}function Oo(e,t,n,i){var r=e.constructor;switch(t){case ot:return Nr(e);case He:case Ye:return new r(+e);case st:return Er(e,i);case at:case ut:case lt:case ct:case dt:case ht:case ft:case pt:case mt:return Or(e,i);case ze:return jr(e,i,n);case Ve:case et:return new r(e);case Ke:return Dr(e);case Ze:return Rr(e,i,n);case tt:return Lr(e)}}function Io(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(Ot,"{\n/* [wrapped with "+t+"] */\n")}function Fo(e){return bh(e)||yh(e)||!!(Oc&&e&&e[Oc])}function qo(e,t){return t=null==t?Ee:t,!!t&&("number"==typeof e||zt.test(e))&&e>-1&&e%1==0&&e<t}function Po(e,t,n){if(!uu(n))return!1;var i=typeof t;return!!("number"==i?Xa(n)&&qo(t,n.length):"string"==i&&t in n)&&Ga(n[t],e)}function Ho(e,t){if(bh(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!bu(e))||(Tt.test(e)||!At.test(e)||null!=t&&e in dc(t))}function Yo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Bo(e){var t=So(e),n=z[t];if("function"!=typeof n||!(t in qt.prototype))return!1;if(e===n)return!0;var i=Td(n);return!!i&&e===i[0]}function $o(e){return!!xc&&xc in e}function Uo(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||gc;return e===n}function Wo(e){return e===e&&!uu(e)}function zo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==Z||e in dc(n)))}}function Vo(e){var t=Oa(e,function(e){return n.size===oe&&n.clear(),e}),n=t.cache;return t}function Jo(e,t){var n=e[1],i=t[1],r=n|i,o=r<(he|fe|ye),s=i==ye&&n==me||i==ye&&n==be&&e[7].length<=t[8]||i==(ye|be)&&t[7].length<=t[8]&&n==me;if(!o&&!s)return e;i&he&&(e[2]=t[2],r|=n&he?0:pe);var a=t[3];if(a){var u=e[3];e[3]=u?qr(u,a,t[4]):a,e[4]=u?$(e[3],se):t[4]}return a=t[5],a&&(u=e[5],e[5]=u?Pr(u,a,t[6]):a,e[6]=u?$(e[5],se):t[6]),a=t[7],a&&(e[7]=a),i&ye&&(e[8]=null==e[8]?t[8]:Xc(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function Go(e){var t=[];if(null!=e)for(var n in dc(e))t.push(n);return t}function Xo(e){return Sc.call(e)}function Qo(e,t,i){return t=Gc(t===Z?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=Gc(r.length-t,0),a=sc(s);++o<s;)a[o]=r[t+o];o=-1;for(var u=sc(t+1);++o<t;)u[o]=r[o];return u[t]=i(a),n(e,this,u)}}function Ko(e,t){return t.length<2?e:vi(e,cr(t,0,-1))}function Zo(e,t){for(var n=e.length,i=Xc(t.length,n),r=Hr(e);i--;){var o=t[i];e[i]=qo(o,n)?r[o]:Z}return e}function es(e,t,n){var i=t+"";return Ld(e,Io(i,os(jo(i),n)))}function ts(e){var t=0,n=0;return function(){var i=Qc(),r=ke-(i-n);if(n=i,r>0){if(++t>=Ce)return arguments[0]}else t=0;return e.apply(Z,arguments)}}function ns(e,t){var n=-1,i=e.length,r=i-1;for(t=t===Z?i:t;++n<t;){var o=nr(n,r),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}function is(e){if("string"==typeof e||bu(e))return e;var t=e+"";return"0"==t&&1/e==-Ne?"-0":t}function rs(e){if(null!=e){try{return yc.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function os(e,t){return r(Ie,function(n){var i="_."+n[0];t&n[1]&&!u(e,i)&&e.push(i)}),e.sort()}function ss(e){if(e instanceof qt)return e.clone();var t=new Q(e.__wrapped__,e.__chain__);return t.__actions__=Hr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function as(e,t,n){t=(n?Po(e,t,n):t===Z)?1:Gc(Au(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var r=0,o=0,s=sc(Bc(i/t));r<i;)s[o++]=cr(e,r,r+=t);return s}function us(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r}function ls(){var e=arguments.length;if(!e)return[];for(var t=sc(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return d(bh(n)?Hr(n):[n],ri(t,1))}function cs(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===Z?1:Au(t),cr(e,t<0?0:t,i)):[]}function ds(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===Z?1:Au(t),t=i-t,cr(e,0,t<0?0:t)):[]}function hs(e,t){return e&&e.length?br(e,ko(t,3),!0,!0):[]}function fs(e,t){return e&&e.length?br(e,ko(t,3),!0):[]}function ps(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Po(e,t,n)&&(n=0,i=r),ti(e,t,n,i)):[]}function ms(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:Au(n);return r<0&&(r=Gc(i+r,0)),v(e,ko(t,3),r)}function _s(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==Z&&(r=Au(n),r=n<0?Gc(i+r,0):Xc(r,i-1)),v(e,ko(t,3),r,!0)}function gs(e){var t=null==e?0:e.length;return t?ri(e,1):[]}function vs(e){var t=null==e?0:e.length;return t?ri(e,Ne):[]}function ys(e,t){var n=null==e?0:e.length;return n?(t=t===Z?1:Au(t),ri(e,t)):[]}function bs(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i}function ws(e){return e&&e.length?e[0]:Z}function xs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:Au(n);return r<0&&(r=Gc(i+r,0)),y(e,t,r)}function Ss(e){var t=null==e?0:e.length;return t?cr(e,0,-1):[]}function Cs(e,t){return null==e?"":Vc.call(e,t)}function ks(e){var t=null==e?0:e.length;return t?e[t-1]:Z}function As(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return n!==Z&&(r=Au(n),r=r<0?Gc(i+r,0):Xc(r,i-1)),t===t?V(e,t,r):v(e,w,r,!0)}function Ts(e,t){return e&&e.length?Gi(e,Au(t)):Z}function Ms(e,t){return e&&e.length&&t&&t.length?er(e,t):e}function Ns(e,t,n){return e&&e.length&&t&&t.length?er(e,t,ko(n,2)):e}function Es(e,t,n){return e&&e.length&&t&&t.length?er(e,t,Z,n):e}function js(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=ko(t,3);++i<o;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return tr(e,r),n}function Ds(e){return null==e?e:ed.call(e)}function Rs(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Po(e,t,n)?(t=0,n=i):(t=null==t?0:Au(t),n=n===Z?i:Au(n)),cr(e,t,n)):[]}function Ls(e,t){return hr(e,t)}function Os(e,t,n){return fr(e,t,ko(n,2))}function Is(e,t){var n=null==e?0:e.length;if(n){var i=hr(e,t);if(i<n&&Ga(e[i],t))return i}return-1}function Fs(e,t){return hr(e,t,!0)}function qs(e,t,n){return fr(e,t,ko(n,2),!0)}function Ps(e,t){var n=null==e?0:e.length;if(n){var i=hr(e,t,!0)-1;if(Ga(e[i],t))return i}return-1}function Hs(e){return e&&e.length?pr(e):[]}function Ys(e,t){return e&&e.length?pr(e,ko(t,2)):[]}function Bs(e){var t=null==e?0:e.length;return t?cr(e,1,t):[]}function $s(e,t,n){return e&&e.length?(t=n||t===Z?1:Au(t),cr(e,0,t<0?0:t)):[]}function Us(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===Z?1:Au(t),t=i-t,cr(e,t<0?0:t,i)):[]}function Ws(e,t){return e&&e.length?br(e,ko(t,3),!1,!0):[]}function zs(e,t){return e&&e.length?br(e,ko(t,3)):[]}function Vs(e){return e&&e.length?gr(e):[]}function Js(e,t){return e&&e.length?gr(e,ko(t,2)):[]}function Gs(e,t){return t="function"==typeof t?t:Z,e&&e.length?gr(e,Z,t):[]}function Xs(e){if(!e||!e.length)return[];var t=0;return e=a(e,function(e){if(Qa(e))return t=Gc(e.length,t),!0}),M(t,function(t){return c(e,S(t))})}function Qs(e,t){if(!e||!e.length)return[];var i=Xs(e);return null==t?i:c(i,function(e){return n(t,Z,e)})}function Ks(e,t){return Sr(e||[],t||[],Dn)}function Zs(e,t){return Sr(e||[],t||[],ur)}function ea(e){var t=z(e);return t.__chain__=!0,t}function ta(e,t){return t(e),e}function na(e,t){return t(e)}function ia(){return ea(this)}function ra(){return new Q(this.value(),this.__chain__)}function oa(){this.__values__===Z&&(this.__values__=Cu(this.value()));var e=this.__index__>=this.__values__.length,t=e?Z:this.__values__[this.__index__++];return{done:e,value:t}}function sa(){return this}function aa(e){for(var t,n=this;n instanceof X;){var i=ss(n);i.__index__=0,i.__values__=Z,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function ua(){var e=this.__wrapped__;if(e instanceof qt){var t=e;return this.__actions__.length&&(t=new qt(this)),t=t.reverse(),t.__actions__.push({func:na,args:[Ds],thisArg:Z}),new Q(t,this.__chain__)}return this.thru(Ds)}function la(){return wr(this.__wrapped__,this.__actions__)}function ca(e,t,n){var i=bh(e)?s:Qn;return n&&Po(e,t,n)&&(t=Z),i(e,ko(t,3))}function da(e,t){var n=bh(e)?a:ii;return n(e,ko(t,3))}function ha(e,t){return ri(va(e,t),1)}function fa(e,t){return ri(va(e,t),Ne)}function pa(e,t,n){return n=n===Z?1:Au(n),ri(va(e,t),n)}function ma(e,t){var n=bh(e)?r:vd;return n(e,ko(t,3))}function _a(e,t){var n=bh(e)?o:yd;return n(e,ko(t,3))}function ga(e,t,n,i){e=Xa(e)?e:il(e),n=n&&!i?Au(n):0;var r=e.length;return n<0&&(n=Gc(r+n,0)),yu(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&y(e,t,n)>-1}function va(e,t){var n=bh(e)?c:Ui;return n(e,ko(t,3))}function ya(e,t,n,i){return null==e?[]:(bh(t)||(t=null==t?[]:[t]),n=i?Z:n,bh(n)||(n=null==n?[]:[n]),Xi(e,t,n))}function ba(e,t,n){var i=bh(e)?h:k,r=arguments.length<3;return i(e,ko(t,4),n,r,vd)}function wa(e,t,n){var i=bh(e)?f:k,r=arguments.length<3;return i(e,ko(t,4),n,r,yd)}function xa(e,t){var n=bh(e)?a:ii;return n(e,Ia(ko(t,3)))}function Sa(e){var t=bh(e)?Mn:sr;return t(e)}function Ca(e,t,n){t=(n?Po(e,t,n):t===Z)?1:Au(t);var i=bh(e)?Nn:ar;return i(e,t)}function ka(e){var t=bh(e)?En:lr;return t(e)}function Aa(e){if(null==e)return 0;if(Xa(e))return yu(e)?J(e):e.length;var t=Ed(e);return t==ze||t==Ze?e.size:Yi(e).length}function Ta(e,t,n){var i=bh(e)?p:dr;return n&&Po(e,t,n)&&(t=Z),i(e,ko(t,3))}function Ma(e,t){if("function"!=typeof t)throw new pc(ie);return e=Au(e),function(){if(--e<1)return t.apply(this,arguments)}}function Na(e,t,n){return t=n?Z:t,t=e&&null==t?e.length:t,fo(e,ye,Z,Z,Z,Z,t)}function Ea(e,t){var n;if("function"!=typeof t)throw new pc(ie);return e=Au(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=Z),n}}function ja(e,t,n){t=n?Z:t;var i=fo(e,me,Z,Z,Z,Z,Z,t);return i.placeholder=ja.placeholder,i}function Da(e,t,n){t=n?Z:t;var i=fo(e,_e,Z,Z,Z,Z,Z,t);return i.placeholder=Da.placeholder,i}function Ra(e,t,n){function i(t){var n=h,i=f;return h=f=Z,v=t,m=e.apply(i,n)}function r(e){return v=e,_=Rd(a,t),y?i(e):m}function o(e){var n=e-g,i=e-v,r=t-n;return b?Xc(r,p-i):r}function s(e){var n=e-g,i=e-v;return g===Z||n>=t||n<0||b&&i>=p}function a(){var e=uh();return s(e)?u(e):void(_=Rd(a,o(e)))}function u(e){return _=Z,w&&h?i(e):(h=f=Z,m)}function l(){_!==Z&&kd(_),v=0,h=g=f=_=Z}function c(){return _===Z?m:u(uh())}function d(){var e=uh(),n=s(e);if(h=arguments,f=this,g=e,n){if(_===Z)return r(g);if(b)return _=Rd(a,t),i(g)}return _===Z&&(_=Rd(a,t)),m}var h,f,p,m,_,g,v=0,y=!1,b=!1,w=!0;if("function"!=typeof e)throw new pc(ie);return t=Mu(t)||0,uu(n)&&(y=!!n.leading,b="maxWait"in n,p=b?Gc(Mu(n.maxWait)||0,t):p,w="trailing"in n?!!n.trailing:w),d.cancel=l,d.flush=c,d}function La(e){return fo(e,we)}function Oa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new pc(ie);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Oa.Cache||hn),n}function Ia(e){if("function"!=typeof e)throw new pc(ie);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Fa(e){return Ea(2,e)}function qa(e,t){if("function"!=typeof e)throw new pc(ie);return t=t===Z?t:Au(t),or(e,t)}function Pa(e,t){if("function"!=typeof e)throw new pc(ie);return t=null==t?0:Gc(Au(t),0),or(function(i){var r=i[t],o=Tr(i,0,t);return r&&d(o,r),n(e,this,o)})}function Ha(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new pc(ie);return uu(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ra(e,t,{leading:i,maxWait:t,trailing:r})}function Ya(e){return Na(e,1)}function Ba(e,t){return ph(kr(t),e)}function $a(){if(!arguments.length)return[];var e=arguments[0];return bh(e)?e:[e]}function Ua(e){return Bn(e,le)}function Wa(e,t){return t="function"==typeof t?t:Z,Bn(e,le,t)}function za(e){return Bn(e,ae|le)}function Va(e,t){return t="function"==typeof t?t:Z,Bn(e,ae|le,t)}function Ja(e,t){return null==t||Jn(e,t,Uu(t))}function Ga(e,t){return e===t||e!==e&&t!==t}function Xa(e){return null!=e&&au(e.length)&&!ou(e)}function Qa(e){return lu(e)&&Xa(e)}function Ka(e){return e===!0||e===!1||lu(e)&&wi(e)==He}function Za(e){return lu(e)&&1===e.nodeType&&!gu(e)}function eu(e){if(null==e)return!0;if(Xa(e)&&(bh(e)||"string"==typeof e||"function"==typeof e.splice||xh(e)||Th(e)||yh(e)))return!e.length;var t=Ed(e);if(t==ze||t==Ze)return!e.size;if(Uo(e))return!Yi(e).length;for(var n in e)if(bc.call(e,n))return!1;return!0}function tu(e,t){return Di(e,t)}function nu(e,t,n){n="function"==typeof n?n:Z;var i=n?n(e,t):Z;return i===Z?Di(e,t,Z,n):!!i}function iu(e){if(!lu(e))return!1;var t=wi(e);return t==$e||t==Be||"string"==typeof e.message&&"string"==typeof e.name&&!gu(e)}function ru(e){return"number"==typeof e&&zc(e)}function ou(e){if(!uu(e))return!1;var t=wi(e);return t==Ue||t==We||t==Pe||t==Qe}function su(e){return"number"==typeof e&&e==Au(e)}function au(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ee}function uu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function lu(e){return null!=e&&"object"==typeof e}function cu(e,t){return e===t||Oi(e,t,To(t))}function du(e,t,n){return n="function"==typeof n?n:Z,Oi(e,t,To(t),n)}function hu(e){return _u(e)&&e!=+e}function fu(e){if(jd(e))throw new uc(ne);return Ii(e)}function pu(e){return null===e}function mu(e){return null==e}function _u(e){return"number"==typeof e||lu(e)&&wi(e)==Ve}function gu(e){if(!lu(e)||wi(e)!=Ge)return!1;var t=jc(e);if(null===t)return!0;var n=bc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&yc.call(n)==Cc}function vu(e){return su(e)&&e>=-Ee&&e<=Ee}function yu(e){return"string"==typeof e||!bh(e)&&lu(e)&&wi(e)==et}function bu(e){return"symbol"==typeof e||lu(e)&&wi(e)==tt}function wu(e){return e===Z}function xu(e){return lu(e)&&Ed(e)==it}function Su(e){return lu(e)&&wi(e)==rt}function Cu(e){if(!e)return[];if(Xa(e))return yu(e)?G(e):Hr(e);if(Ic&&e[Ic])return H(e[Ic]());var t=Ed(e),n=t==ze?Y:t==Ze?U:il;return n(e)}function ku(e){if(!e)return 0===e?e:0;if(e=Mu(e),e===Ne||e===-Ne){var t=e<0?-1:1;return t*je}return e===e?e:0}function Au(e){var t=ku(e),n=t%1;return t===t?n?t-n:t:0}function Tu(e){return e?Yn(Au(e),0,Re):0}function Mu(e){if("number"==typeof e)return e;if(bu(e))return De;if(uu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=uu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Dt,"");var n=$t.test(e);return n||Wt.test(e)?Zn(e.slice(2),n?2:8):Bt.test(e)?De:+e}function Nu(e){return Yr(e,Wu(e))}function Eu(e){return e?Yn(Au(e),-Ee,Ee):0===e?e:0}function ju(e){return null==e?"":_r(e)}function Du(e,t){var n=gd(e);return null==t?n:On(n,t)}function Ru(e,t){return g(e,ko(t,3),si)}function Lu(e,t){return g(e,ko(t,3),ai)}function Ou(e,t){return null==e?e:bd(e,ko(t,3),Wu)}function Iu(e,t){return null==e?e:wd(e,ko(t,3),Wu)}function Fu(e,t){return e&&si(e,ko(t,3))}function qu(e,t){return e&&ai(e,ko(t,3))}function Pu(e){return null==e?[]:pi(e,Uu(e))}function Hu(e){return null==e?[]:pi(e,Wu(e))}function Yu(e,t,n){var i=null==e?Z:vi(e,t);return i===Z?n:i}function Bu(e,t){return null!=e&&Do(e,t,Si)}function $u(e,t){return null!=e&&Do(e,t,Ci)}function Uu(e){return Xa(e)?Tn(e):Yi(e)}function Wu(e){return Xa(e)?Tn(e,!0):Bi(e)}function zu(e,t){var n={};return t=ko(t,3),si(e,function(e,i,r){Fn(n,t(e,i,r),e)}),n}function Vu(e,t){var n={};return t=ko(t,3),si(e,function(e,i,r){Fn(n,i,t(e,i,r))}),n}function Ju(e,t){return Gu(e,Ia(ko(t)))}function Gu(e,t){if(null==e)return{};var n=c(xo(e),function(e){return[e]});return t=ko(t),Ki(e,n,function(e,n){return t(e,n[0])})}function Xu(e,t,n){t=Ar(t,e);var i=-1,r=t.length;for(r||(r=1,e=Z);++i<r;){var o=null==e?Z:e[is(t[i])];o===Z&&(i=r,o=n),e=ou(o)?o.call(e):o}return e}function Qu(e,t,n){return null==e?e:ur(e,t,n)}function Ku(e,t,n,i){return i="function"==typeof i?i:Z,null==e?e:ur(e,t,n,i)}function Zu(e,t,n){var i=bh(e),o=i||xh(e)||Th(e);if(t=ko(t,4),null==n){var s=e&&e.constructor;n=o?i?new s:[]:uu(e)&&ou(s)?gd(jc(e)):{}}return(o?r:si)(e,function(e,i,r){return t(n,e,i,r)}),n}function el(e,t){return null==e||vr(e,t)}function tl(e,t,n){return null==e?e:yr(e,t,kr(n))}function nl(e,t,n,i){return i="function"==typeof i?i:Z,null==e?e:yr(e,t,kr(n),i)}function il(e){return null==e?[]:j(e,Uu(e))}function rl(e){return null==e?[]:j(e,Wu(e))}function ol(e,t,n){return n===Z&&(n=t,t=Z),n!==Z&&(n=Mu(n),n=n===n?n:0),t!==Z&&(t=Mu(t),t=t===t?t:0),Yn(Mu(e),t,n)}function sl(e,t,n){return t=ku(t),n===Z?(n=t,t=0):n=ku(n),e=Mu(e),ki(e,t,n)}function al(e,t,n){if(n&&"boolean"!=typeof n&&Po(e,t,n)&&(t=n=Z),n===Z&&("boolean"==typeof t?(n=t,t=Z):"boolean"==typeof e&&(n=e,e=Z)),e===Z&&t===Z?(e=0,t=1):(e=ku(e),t===Z?(t=e,e=0):t=ku(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=Zc();return Xc(e+r*(t-e+Kn("1e-"+((r+"").length-1))),t)}return nr(e,t)}function ul(e){return Zh(ju(e).toLowerCase())}function ll(e){return e=ju(e),e&&e.replace(Vt,mi).replace(Pn,"")}function cl(e,t,n){e=ju(e),t=_r(t);var i=e.length;n=n===Z?i:Yn(Au(n),0,i);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function dl(e){return e=ju(e),e&&xt.test(e)?e.replace(bt,_i):e}function hl(e){return e=ju(e),e&&jt.test(e)?e.replace(Et,"\\$&"):e}function fl(e,t,n){e=ju(e),t=Au(t);var i=t?J(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return oo($c(r),n)+e+oo(Bc(r),n)}function pl(e,t,n){e=ju(e),t=Au(t);var i=t?J(e):0;return t&&i<t?e+oo(t-i,n):e}function ml(e,t,n){e=ju(e),t=Au(t);var i=t?J(e):0;return t&&i<t?oo(t-i,n)+e:e}function _l(e,t,n){return n||null==t?t=0:t&&(t=+t),Kc(ju(e).replace(Rt,""),t||0)}function gl(e,t,n){return t=(n?Po(e,t,n):t===Z)?1:Au(t),rr(ju(e),t)}function vl(){var e=arguments,t=ju(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function yl(e,t,n){return n&&"number"!=typeof n&&Po(e,t,n)&&(t=n=Z),(n=n===Z?Re:n>>>0)?(e=ju(e),e&&("string"==typeof t||null!=t&&!kh(t))&&(t=_r(t),!t&&q(e))?Tr(G(e),0,n):e.split(t,n)):[]}function bl(e,t,n){return e=ju(e),n=null==n?0:Yn(Au(n),0,e.length),t=_r(t),e.slice(n,n+t.length)==t}function wl(e,t,n){var i=z.templateSettings;n&&Po(e,t,n)&&(t=Z),e=ju(e),t=Dh({},t,i,po);var r,o,s=Dh({},t.imports,i.imports,po),a=Uu(s),u=j(s,a),l=0,c=t.interpolate||Jt,d="__p += '",h=hc((t.escape||Jt).source+"|"+c.source+"|"+(c===kt?Ht:Jt).source+"|"+(t.evaluate||Jt).source+"|$","g"),f="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Wn+"]")+"\n";e.replace(h,function(t,n,i,s,a,u){return i||(i=s),d+=e.slice(l,u).replace(Gt,I),n&&(r=!0,d+="' +\n__e("+n+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),d+="';\n";var p=t.variable;p||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(_t,""):d).replace(gt,"$1").replace(vt,"$1;"),
d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=ef(function(){return lc(a,f+"return "+d).apply(Z,u)});if(m.source=d,iu(m))throw m;return m}function xl(e){return ju(e).toLowerCase()}function Sl(e){return ju(e).toUpperCase()}function Cl(e,t,n){if(e=ju(e),e&&(n||t===Z))return e.replace(Dt,"");if(!e||!(t=_r(t)))return e;var i=G(e),r=G(t),o=R(i,r),s=L(i,r)+1;return Tr(i,o,s).join("")}function kl(e,t,n){if(e=ju(e),e&&(n||t===Z))return e.replace(Lt,"");if(!e||!(t=_r(t)))return e;var i=G(e),r=L(i,G(t))+1;return Tr(i,0,r).join("")}function Al(e,t,n){if(e=ju(e),e&&(n||t===Z))return e.replace(Rt,"");if(!e||!(t=_r(t)))return e;var i=G(e),r=R(i,G(t));return Tr(i,r).join("")}function Tl(e,t){var n=xe,i=Se;if(uu(t)){var r="separator"in t?t.separator:r;n="length"in t?Au(t.length):n,i="omission"in t?_r(t.omission):i}e=ju(e);var o=e.length;if(q(e)){var s=G(e);o=s.length}if(n>=o)return e;var a=n-J(i);if(a<1)return i;var u=s?Tr(s,0,a).join(""):e.slice(0,a);if(r===Z)return u+i;if(s&&(a+=u.length-a),kh(r)){if(e.slice(a).search(r)){var l,c=u;for(r.global||(r=hc(r.source,ju(Yt.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var d=l.index;u=u.slice(0,d===Z?a:d)}}else if(e.indexOf(_r(r),a)!=a){var h=u.lastIndexOf(r);h>-1&&(u=u.slice(0,h))}return u+i}function Ml(e){return e=ju(e),e&&wt.test(e)?e.replace(yt,gi):e}function Nl(e,t,n){return e=ju(e),t=n?Z:t,t===Z?P(e)?K(e):_(e):e.match(t)||[]}function El(e){var t=null==e?0:e.length,i=ko();return e=t?c(e,function(e){if("function"!=typeof e[1])throw new pc(ie);return[i(e[0]),e[1]]}):[],or(function(i){for(var r=-1;++r<t;){var o=e[r];if(n(o[0],this,i))return n(o[1],this,i)}})}function jl(e){return $n(Bn(e,ae))}function Dl(e){return function(){return e}}function Rl(e,t){return null==e||e!==e?t:e}function Ll(e){return e}function Ol(e){return Hi("function"==typeof e?e:Bn(e,ae))}function Il(e){return Wi(Bn(e,ae))}function Fl(e,t){return zi(e,Bn(t,ae))}function ql(e,t,n){var i=Uu(t),o=pi(t,i);null!=n||uu(t)&&(o.length||!i.length)||(n=t,t=e,e=this,o=pi(t,Uu(t)));var s=!(uu(n)&&"chain"in n&&!n.chain),a=ou(e);return r(o,function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__),r=n.__actions__=Hr(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,d([this.value()],arguments))})}),e}function Pl(){return ni._===this&&(ni._=kc),this}function Hl(){}function Yl(e){return e=Au(e),or(function(t){return Gi(t,e)})}function Bl(e){return Ho(e)?S(is(e)):Zi(e)}function $l(e){return function(t){return null==e?Z:vi(e,t)}}function Ul(){return[]}function Wl(){return!1}function zl(){return{}}function Vl(){return""}function Jl(){return!0}function Gl(e,t){if(e=Au(e),e<1||e>Ee)return[];var n=Re,i=Xc(e,Re);t=ko(t),e-=Re;for(var r=M(i,t);++n<e;)t(n);return r}function Xl(e){return bh(e)?c(e,is):bu(e)?[e]:Hr(Od(ju(e)))}function Ql(e){var t=++wc;return ju(e)+t}function Kl(e){return e&&e.length?ei(e,Ll,xi):Z}function Zl(e,t){return e&&e.length?ei(e,ko(t,2),xi):Z}function ec(e){return x(e,Ll)}function tc(e,t){return x(e,ko(t,2))}function nc(e){return e&&e.length?ei(e,Ll,$i):Z}function ic(e,t){return e&&e.length?ei(e,ko(t,2),$i):Z}function rc(e){return e&&e.length?T(e,Ll):0}function oc(e,t){return e&&e.length?T(e,ko(t,2)):0}C=null==C?ni:yi.defaults(ni.Object(),C,yi.pick(ni,Un));var sc=C.Array,ac=C.Date,uc=C.Error,lc=C.Function,cc=C.Math,dc=C.Object,hc=C.RegExp,fc=C.String,pc=C.TypeError,mc=sc.prototype,_c=lc.prototype,gc=dc.prototype,vc=C["__core-js_shared__"],yc=_c.toString,bc=gc.hasOwnProperty,wc=0,xc=function(){var e=/[^.]+$/.exec(vc&&vc.keys&&vc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Sc=gc.toString,Cc=yc.call(dc),kc=ni._,Ac=hc("^"+yc.call(bc).replace(Et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tc=oi?C.Buffer:Z,Mc=C.Symbol,Nc=C.Uint8Array,Ec=Tc?Tc.allocUnsafe:Z,jc=B(dc.getPrototypeOf,dc),Dc=dc.create,Rc=gc.propertyIsEnumerable,Lc=mc.splice,Oc=Mc?Mc.isConcatSpreadable:Z,Ic=Mc?Mc.iterator:Z,Fc=Mc?Mc.toStringTag:Z,qc=function(){try{var e=Mo(dc,"defineProperty");return e({},"",{}),e}catch(e){}}(),Pc=C.clearTimeout!==ni.clearTimeout&&C.clearTimeout,Hc=ac&&ac.now!==ni.Date.now&&ac.now,Yc=C.setTimeout!==ni.setTimeout&&C.setTimeout,Bc=cc.ceil,$c=cc.floor,Uc=dc.getOwnPropertySymbols,Wc=Tc?Tc.isBuffer:Z,zc=C.isFinite,Vc=mc.join,Jc=B(dc.keys,dc),Gc=cc.max,Xc=cc.min,Qc=ac.now,Kc=C.parseInt,Zc=cc.random,ed=mc.reverse,td=Mo(C,"DataView"),nd=Mo(C,"Map"),id=Mo(C,"Promise"),rd=Mo(C,"Set"),od=Mo(C,"WeakMap"),sd=Mo(dc,"create"),ad=od&&new od,ud={},ld=rs(td),cd=rs(nd),dd=rs(id),hd=rs(rd),fd=rs(od),pd=Mc?Mc.prototype:Z,md=pd?pd.valueOf:Z,_d=pd?pd.toString:Z,gd=function(){function e(){}return function(t){if(!uu(t))return{};if(Dc)return Dc(t);e.prototype=t;var n=new e;return e.prototype=Z,n}}();z.templateSettings={escape:St,evaluate:Ct,interpolate:kt,variable:"",imports:{_:z}},z.prototype=X.prototype,z.prototype.constructor=z,Q.prototype=gd(X.prototype),Q.prototype.constructor=Q,qt.prototype=gd(X.prototype),qt.prototype.constructor=qt,Zt.prototype.clear=en,Zt.prototype.delete=tn,Zt.prototype.get=nn,Zt.prototype.has=rn,Zt.prototype.set=on,sn.prototype.clear=an,sn.prototype.delete=un,sn.prototype.get=ln,sn.prototype.has=cn,sn.prototype.set=dn,hn.prototype.clear=fn,hn.prototype.delete=pn,hn.prototype.get=mn,hn.prototype.has=_n,hn.prototype.set=gn,vn.prototype.add=vn.prototype.push=yn,vn.prototype.has=bn,wn.prototype.clear=xn,wn.prototype.delete=Sn,wn.prototype.get=Cn,wn.prototype.has=kn,wn.prototype.set=An;var vd=zr(si),yd=zr(ai,!0),bd=Vr(),wd=Vr(!0),xd=ad?function(e,t){return ad.set(e,t),e}:Ll,Sd=qc?function(e,t){return qc(e,"toString",{configurable:!0,enumerable:!1,value:Dl(t),writable:!0})}:Ll,Cd=or,kd=Pc||function(e){return ni.clearTimeout(e)},Ad=rd&&1/U(new rd([,-0]))[1]==Ne?function(e){return new rd(e)}:Hl,Td=ad?function(e){return ad.get(e)}:Hl,Md=Uc?function(e){return null==e?[]:(e=dc(e),a(Uc(e),function(t){return Rc.call(e,t)}))}:Ul,Nd=Uc?function(e){for(var t=[];e;)d(t,Md(e)),e=jc(e);return t}:Ul,Ed=wi;(td&&Ed(new td(new ArrayBuffer(1)))!=st||nd&&Ed(new nd)!=ze||id&&Ed(id.resolve())!=Xe||rd&&Ed(new rd)!=Ze||od&&Ed(new od)!=it)&&(Ed=function(e){var t=wi(e),n=t==Ge?e.constructor:Z,i=n?rs(n):"";if(i)switch(i){case ld:return st;case cd:return ze;case dd:return Xe;case hd:return Ze;case fd:return it}return t});var jd=vc?ou:Wl,Dd=ts(xd),Rd=Yc||function(e,t){return ni.setTimeout(e,t)},Ld=ts(Sd),Od=Vo(function(e){var t=[];return Mt.test(e)&&t.push(""),e.replace(Nt,function(e,n,i,r){t.push(i?r.replace(Pt,"$1"):n||e)}),t}),Id=or(function(e,t){return Qa(e)?Xn(e,ri(t,1,Qa,!0)):[]}),Fd=or(function(e,t){var n=ks(t);return Qa(n)&&(n=Z),Qa(e)?Xn(e,ri(t,1,Qa,!0),ko(n,2)):[]}),qd=or(function(e,t){var n=ks(t);return Qa(n)&&(n=Z),Qa(e)?Xn(e,ri(t,1,Qa,!0),Z,n):[]}),Pd=or(function(e){var t=c(e,Cr);return t.length&&t[0]===e[0]?Ai(t):[]}),Hd=or(function(e){var t=ks(e),n=c(e,Cr);return t===ks(n)?t=Z:n.pop(),n.length&&n[0]===e[0]?Ai(n,ko(t,2)):[]}),Yd=or(function(e){var t=ks(e),n=c(e,Cr);return t="function"==typeof t?t:Z,t&&n.pop(),n.length&&n[0]===e[0]?Ai(n,Z,t):[]}),Bd=or(Ms),$d=bo(function(e,t){var n=null==e?0:e.length,i=Hn(e,t);return tr(e,c(t,function(e){return qo(e,n)?+e:e}).sort(Ir)),i}),Ud=or(function(e){return gr(ri(e,1,Qa,!0))}),Wd=or(function(e){var t=ks(e);return Qa(t)&&(t=Z),gr(ri(e,1,Qa,!0),ko(t,2))}),zd=or(function(e){var t=ks(e);return t="function"==typeof t?t:Z,gr(ri(e,1,Qa,!0),Z,t)}),Vd=or(function(e,t){return Qa(e)?Xn(e,t):[]}),Jd=or(function(e){return xr(a(e,Qa))}),Gd=or(function(e){var t=ks(e);return Qa(t)&&(t=Z),xr(a(e,Qa),ko(t,2))}),Xd=or(function(e){var t=ks(e);return t="function"==typeof t?t:Z,xr(a(e,Qa),Z,t)}),Qd=or(Xs),Kd=or(function(e){var t=e.length,n=t>1?e[t-1]:Z;return n="function"==typeof n?(e.pop(),n):Z,Qs(e,n)}),Zd=bo(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return Hn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof qt&&qo(n)?(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:na,args:[r],thisArg:Z}),new Q(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(Z),e})):this.thru(r)}),eh=Ur(function(e,t,n){bc.call(e,n)?++e[n]:Fn(e,n,1)}),th=Zr(ms),nh=Zr(_s),ih=Ur(function(e,t,n){bc.call(e,n)?e[n].push(t):Fn(e,n,[t])}),rh=or(function(e,t,i){var r=-1,o="function"==typeof t,s=Xa(e)?sc(e.length):[];return vd(e,function(e){s[++r]=o?n(t,e,i):Mi(e,t,i)}),s}),oh=Ur(function(e,t,n){Fn(e,n,t)}),sh=Ur(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ah=or(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Po(e,t[0],t[1])?t=[]:n>2&&Po(t[0],t[1],t[2])&&(t=[t[0]]),Xi(e,ri(t,1),[])}),uh=Hc||function(){return ni.Date.now()},lh=or(function(e,t,n){var i=he;if(n.length){var r=$(n,Co(lh));i|=ge}return fo(e,i,t,n,r)}),ch=or(function(e,t,n){var i=he|fe;if(n.length){var r=$(n,Co(ch));i|=ge}return fo(t,i,e,n,r)}),dh=or(function(e,t){return Gn(e,1,t)}),hh=or(function(e,t,n){return Gn(e,Mu(t)||0,n)});Oa.Cache=hn;var fh=Cd(function(e,t){t=1==t.length&&bh(t[0])?c(t[0],E(ko())):c(ri(t,1),E(ko()));var i=t.length;return or(function(r){for(var o=-1,s=Xc(r.length,i);++o<s;)r[o]=t[o].call(this,r[o]);return n(e,this,r)})}),ph=or(function(e,t){var n=$(t,Co(ph));return fo(e,ge,Z,t,n)}),mh=or(function(e,t){var n=$(t,Co(mh));return fo(e,ve,Z,t,n)}),_h=bo(function(e,t){return fo(e,be,Z,Z,Z,t)}),gh=uo(xi),vh=uo(function(e,t){return e>=t}),yh=Ni(function(){return arguments}())?Ni:function(e){return lu(e)&&bc.call(e,"callee")&&!Rc.call(e,"callee")},bh=sc.isArray,wh=ui?E(ui):Ei,xh=Wc||Wl,Sh=li?E(li):ji,Ch=ci?E(ci):Li,kh=di?E(di):Fi,Ah=hi?E(hi):qi,Th=fi?E(fi):Pi,Mh=uo($i),Nh=uo(function(e,t){return e<=t}),Eh=Wr(function(e,t){if(Uo(t)||Xa(t))return void Yr(t,Uu(t),e);for(var n in t)bc.call(t,n)&&Dn(e,n,t[n])}),jh=Wr(function(e,t){Yr(t,Wu(t),e)}),Dh=Wr(function(e,t,n,i){Yr(t,Wu(t),e,i)}),Rh=Wr(function(e,t,n,i){Yr(t,Uu(t),e,i)}),Lh=bo(Hn),Oh=or(function(e){return e.push(Z,po),n(Dh,Z,e)}),Ih=or(function(e){return e.push(Z,mo),n(Yh,Z,e)}),Fh=no(function(e,t,n){e[t]=n},Dl(Ll)),qh=no(function(e,t,n){bc.call(e,t)?e[t].push(n):e[t]=[n]},ko),Ph=or(Mi),Hh=Wr(function(e,t,n){Vi(e,t,n)}),Yh=Wr(function(e,t,n,i){Vi(e,t,n,i)}),Bh=bo(function(e,t){var n={};if(null==e)return n;var i=!1;t=c(t,function(t){return t=Ar(t,e),i||(i=t.length>1),t}),Yr(e,xo(e),n),i&&(n=Bn(n,ae|ue|le,_o));for(var r=t.length;r--;)vr(n,t[r]);return n}),$h=bo(function(e,t){return null==e?{}:Qi(e,t)}),Uh=ho(Uu),Wh=ho(Wu),zh=Xr(function(e,t,n){return t=t.toLowerCase(),e+(n?ul(t):t)}),Vh=Xr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Jh=Xr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Gh=Gr("toLowerCase"),Xh=Xr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Qh=Xr(function(e,t,n){return e+(n?" ":"")+Zh(t)}),Kh=Xr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Zh=Gr("toUpperCase"),ef=or(function(e,t){try{return n(e,Z,t)}catch(e){return iu(e)?e:new uc(e)}}),tf=bo(function(e,t){return r(t,function(t){t=is(t),Fn(e,t,lh(e[t],e))}),e}),nf=eo(),rf=eo(!0),of=or(function(e,t){return function(n){return Mi(n,e,t)}}),sf=or(function(e,t){return function(n){return Mi(e,n,t)}}),af=ro(c),uf=ro(s),lf=ro(p),cf=ao(),df=ao(!0),hf=io(function(e,t){return e+t},0),ff=co("ceil"),pf=io(function(e,t){return e/t},1),mf=co("floor"),_f=io(function(e,t){return e*t},1),gf=co("round"),vf=io(function(e,t){return e-t},0);return z.after=Ma,z.ary=Na,z.assign=Eh,z.assignIn=jh,z.assignInWith=Dh,z.assignWith=Rh,z.at=Lh,z.before=Ea,z.bind=lh,z.bindAll=tf,z.bindKey=ch,z.castArray=$a,z.chain=ea,z.chunk=as,z.compact=us,z.concat=ls,z.cond=El,z.conforms=jl,z.constant=Dl,z.countBy=eh,z.create=Du,z.curry=ja,z.curryRight=Da,z.debounce=Ra,z.defaults=Oh,z.defaultsDeep=Ih,z.defer=dh,z.delay=hh,z.difference=Id,z.differenceBy=Fd,z.differenceWith=qd,z.drop=cs,z.dropRight=ds,z.dropRightWhile=hs,z.dropWhile=fs,z.fill=ps,z.filter=da,z.flatMap=ha,z.flatMapDeep=fa,z.flatMapDepth=pa,z.flatten=gs,z.flattenDeep=vs,z.flattenDepth=ys,z.flip=La,z.flow=nf,z.flowRight=rf,z.fromPairs=bs,z.functions=Pu,z.functionsIn=Hu,z.groupBy=ih,z.initial=Ss,z.intersection=Pd,z.intersectionBy=Hd,z.intersectionWith=Yd,z.invert=Fh,z.invertBy=qh,z.invokeMap=rh,z.iteratee=Ol,z.keyBy=oh,z.keys=Uu,z.keysIn=Wu,z.map=va,z.mapKeys=zu,z.mapValues=Vu,z.matches=Il,z.matchesProperty=Fl,z.memoize=Oa,z.merge=Hh,z.mergeWith=Yh,z.method=of,z.methodOf=sf,z.mixin=ql,z.negate=Ia,z.nthArg=Yl,z.omit=Bh,z.omitBy=Ju,z.once=Fa,z.orderBy=ya,z.over=af,z.overArgs=fh,z.overEvery=uf,z.overSome=lf,z.partial=ph,z.partialRight=mh,z.partition=sh,z.pick=$h,z.pickBy=Gu,z.property=Bl,z.propertyOf=$l,z.pull=Bd,z.pullAll=Ms,z.pullAllBy=Ns,z.pullAllWith=Es,z.pullAt=$d,z.range=cf,z.rangeRight=df,z.rearg=_h,z.reject=xa,z.remove=js,z.rest=qa,z.reverse=Ds,z.sampleSize=Ca,z.set=Qu,z.setWith=Ku,z.shuffle=ka,z.slice=Rs,z.sortBy=ah,z.sortedUniq=Hs,z.sortedUniqBy=Ys,z.split=yl,z.spread=Pa,z.tail=Bs,z.take=$s,z.takeRight=Us,z.takeRightWhile=Ws,z.takeWhile=zs,z.tap=ta,z.throttle=Ha,z.thru=na,z.toArray=Cu,z.toPairs=Uh,z.toPairsIn=Wh,z.toPath=Xl,z.toPlainObject=Nu,z.transform=Zu,z.unary=Ya,z.union=Ud,z.unionBy=Wd,z.unionWith=zd,z.uniq=Vs,z.uniqBy=Js,z.uniqWith=Gs,z.unset=el,z.unzip=Xs,z.unzipWith=Qs,z.update=tl,z.updateWith=nl,z.values=il,z.valuesIn=rl,z.without=Vd,z.words=Nl,z.wrap=Ba,z.xor=Jd,z.xorBy=Gd,z.xorWith=Xd,z.zip=Qd,z.zipObject=Ks,z.zipObjectDeep=Zs,z.zipWith=Kd,z.entries=Uh,z.entriesIn=Wh,z.extend=jh,z.extendWith=Dh,ql(z,z),z.add=hf,z.attempt=ef,z.camelCase=zh,z.capitalize=ul,z.ceil=ff,z.clamp=ol,z.clone=Ua,z.cloneDeep=za,z.cloneDeepWith=Va,z.cloneWith=Wa,z.conformsTo=Ja,z.deburr=ll,z.defaultTo=Rl,z.divide=pf,z.endsWith=cl,z.eq=Ga,z.escape=dl,z.escapeRegExp=hl,z.every=ca,z.find=th,z.findIndex=ms,z.findKey=Ru,z.findLast=nh,z.findLastIndex=_s,z.findLastKey=Lu,z.floor=mf,z.forEach=ma,z.forEachRight=_a,z.forIn=Ou,z.forInRight=Iu,z.forOwn=Fu,z.forOwnRight=qu,z.get=Yu,z.gt=gh,z.gte=vh,z.has=Bu,z.hasIn=$u,z.head=ws,z.identity=Ll,z.includes=ga,z.indexOf=xs,z.inRange=sl,z.invoke=Ph,z.isArguments=yh,z.isArray=bh,z.isArrayBuffer=wh,z.isArrayLike=Xa,z.isArrayLikeObject=Qa,z.isBoolean=Ka,z.isBuffer=xh,z.isDate=Sh,z.isElement=Za,z.isEmpty=eu,z.isEqual=tu,z.isEqualWith=nu,z.isError=iu,z.isFinite=ru,z.isFunction=ou,z.isInteger=su,z.isLength=au,z.isMap=Ch,z.isMatch=cu,z.isMatchWith=du,z.isNaN=hu,z.isNative=fu,z.isNil=mu,z.isNull=pu,z.isNumber=_u,z.isObject=uu,z.isObjectLike=lu,z.isPlainObject=gu,z.isRegExp=kh,z.isSafeInteger=vu,z.isSet=Ah,z.isString=yu,z.isSymbol=bu,z.isTypedArray=Th,z.isUndefined=wu,z.isWeakMap=xu,z.isWeakSet=Su,z.join=Cs,z.kebabCase=Vh,z.last=ks,z.lastIndexOf=As,z.lowerCase=Jh,z.lowerFirst=Gh,z.lt=Mh,z.lte=Nh,z.max=Kl,z.maxBy=Zl,z.mean=ec,z.meanBy=tc,z.min=nc,z.minBy=ic,z.stubArray=Ul,z.stubFalse=Wl,z.stubObject=zl,z.stubString=Vl,z.stubTrue=Jl,z.multiply=_f,z.nth=Ts,z.noConflict=Pl,z.noop=Hl,z.now=uh,z.pad=fl,z.padEnd=pl,z.padStart=ml,z.parseInt=_l,z.random=al,z.reduce=ba,z.reduceRight=wa,z.repeat=gl,z.replace=vl,z.result=Xu,z.round=gf,z.runInContext=m,z.sample=Sa,z.size=Aa,z.snakeCase=Xh,z.some=Ta,z.sortedIndex=Ls,z.sortedIndexBy=Os,z.sortedIndexOf=Is,z.sortedLastIndex=Fs,z.sortedLastIndexBy=qs,z.sortedLastIndexOf=Ps,z.startCase=Qh,z.startsWith=bl,z.subtract=vf,z.sum=rc,z.sumBy=oc,z.template=wl,z.times=Gl,z.toFinite=ku,z.toInteger=Au,z.toLength=Tu,z.toLower=xl,z.toNumber=Mu,z.toSafeInteger=Eu,z.toString=ju,z.toUpper=Sl,z.trim=Cl,z.trimEnd=kl,z.trimStart=Al,z.truncate=Tl,z.unescape=Ml,z.uniqueId=Ql,z.upperCase=Kh,z.upperFirst=Zh,z.each=ma,z.eachRight=_a,z.first=ws,ql(z,function(){var e={};return si(z,function(t,n){bc.call(z.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),z.VERSION=ee,r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){z[e].placeholder=z}),r(["drop","take"],function(e,t){qt.prototype[e]=function(n){n=n===Z?1:Gc(Au(n),0);var i=this.__filtered__&&!t?new qt(this):this.clone();return i.__filtered__?i.__takeCount__=Xc(n,i.__takeCount__):i.__views__.push({size:Xc(n,Re),type:e+(i.__dir__<0?"Right":"")}),i},qt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),r(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==Ae||n==Me;qt.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ko(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),r(["head","last"],function(e,t){var n="take"+(t?"Right":"");qt.prototype[e]=function(){return this[n](1).value()[0]}}),r(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");qt.prototype[e]=function(){return this.__filtered__?new qt(this):this[n](1)}}),qt.prototype.compact=function(){return this.filter(Ll)},qt.prototype.find=function(e){return this.filter(e).head()},qt.prototype.findLast=function(e){return this.reverse().find(e)},qt.prototype.invokeMap=or(function(e,t){return"function"==typeof e?new qt(this):this.map(function(n){return Mi(n,e,t)})}),qt.prototype.reject=function(e){return this.filter(Ia(ko(e)))},qt.prototype.slice=function(e,t){e=Au(e);var n=this;return n.__filtered__&&(e>0||t<0)?new qt(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==Z&&(t=Au(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},qt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},qt.prototype.toArray=function(){return this.take(Re)},si(qt.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=z[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);r&&(z.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,a=t instanceof qt,u=s[0],l=a||bh(t),c=function(e){var t=r.apply(z,d([e],s));return i&&h?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(a=l=!1);var h=this.__chain__,f=!!this.__actions__.length,p=o&&!h,m=a&&!f;if(!o&&l){t=m?t:new qt(this);var _=e.apply(t,s);return _.__actions__.push({func:na,args:[c],thisArg:Z}),new Q(_,h)}return p&&m?e.apply(this,s):(_=this.thru(c),p?i?_.value()[0]:_.value():_)})}),r(["pop","push","shift","sort","splice","unshift"],function(e){var t=mc[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);z.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(bh(r)?r:[],e)}return this[n](function(n){return t.apply(bh(n)?n:[],e)})}}),si(qt.prototype,function(e,t){var n=z[t];if(n){var i=n.name+"",r=ud[i]||(ud[i]=[]);r.push({name:t,func:n})}}),ud[to(Z,fe).name]=[{name:"wrapper",func:Z}],qt.prototype.clone=Xt,qt.prototype.reverse=Qt,qt.prototype.value=Kt,z.prototype.at=Zd,z.prototype.chain=ia,z.prototype.commit=ra,z.prototype.next=oa,z.prototype.plant=aa,z.prototype.reverse=ua,z.prototype.toJSON=z.prototype.valueOf=z.prototype.value=la,z.prototype.first=z.prototype.head,Ic&&(z.prototype[Ic]=sa),z},yi=vi();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ni._=yi,define("lodash",[],function(){return yi})):ri?((ri.exports=yi)._=yi,ii._=yi):ni._=yi}.call(this),define("lodash.noconflict",["lodash"],function(e){if(!e.isUndefined(require)&&!e.isUndefined(require.s)){var t=require.s.contexts._.config.lodashLoader;t.templateSettings.imports={_:e},require.config({lodashLoader:t})}return e.noConflict()}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("lodash.converter",[],t):"object"==typeof exports?exports.fp=t():e.fp=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function i(e,t){return r(e,e,t)}var r=n(1);"function"==typeof _&&"function"==typeof _.runInContext&&(_=i(_.runInContext())),e.exports=i},function(e,t,n){function i(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function r(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function o(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function s(e){return function(t){return e({},t)}}function a(e,t){return function(){for(var n=arguments.length,i=n-1,r=Array(n);n--;)r[n]=arguments[n];var o=r[t],s=r.slice(0,t);return o&&h.apply(s,o),t!=i&&h.apply(s,r.slice(t+1)),e.apply(this,s)}}function u(e,t){return function(){var n=arguments.length;if(n){for(var i=Array(n);n--;)i[n]=arguments[n];var r=i[0]=t.apply(void 0,i);return e.apply(void 0,i),r}}}function l(e,t,n,h){function f(e,t){if(T.cap){var n=c.iterateeRearg[e];if(n)return w(t,n);var i=!k&&c.iterateeAry[e];if(i)return b(t,i)}return t}function p(e,t,n){return M||T.curry&&n>1?F(t,n):t}function m(e,t,n){if(T.fixed&&(N||!c.skipFixed[e])){var i=c.methodSpread[e],r=i&&i.start;return void 0===r?L(t,n):a(t,r)}return t}function _(e,t,n){return T.rearg&&n>1&&(E||!c.skipRearg[e])?B(t,c.methodRearg[e]||c.aryRearg[n]):t}function g(e,t){t=U(t);for(var n=-1,i=t.length,r=i-1,o=I(Object(e)),s=o;null!=s&&++n<i;){var a=t[n],u=s[a];null!=u&&(s[t[n]]=I(n==r?u:Object(u))),s=s[a]}return o}function v(e){return V.runInContext.convert(e)(void 0)}function y(e,t){var n=c.aliasToReal[e]||e,i=c.remap[n]||n,r=h;return function(e){var o=k?D:R,s=k?D[i]:t,a=O(O({},r),e);return l(o,n,s,a)}}function b(e,t){return x(e,function(e){return"function"==typeof e?r(e,t):e})}function w(e,t){return x(e,function(e){var n=t.length;return i(B(r(e,n),t),n)})}function x(e,t){return function(){var n=arguments.length;if(!n)return e();for(var i=Array(n);n--;)i[n]=arguments[n];var r=T.rearg?0:n-1;return i[r]=t(i[r]),e.apply(void 0,i)}}function S(e,t){var n,i=c.aliasToReal[e]||e,r=t,a=z[i];return a?r=a(t):T.immutable&&(c.mutate.array[i]?r=u(t,o):c.mutate.object[i]?r=u(t,s(t)):c.mutate.set[i]&&(r=u(t,g))),q(W,function(e){return q(c.aryMethod[e],function(t){if(i==t){var o=c.methodSpread[i],s=o&&o.afterRearg;return n=s?m(i,_(i,r,e),e):_(i,m(i,r,e),e),n=f(i,n),n=p(i,n,e),!1}}),!n}),n||(n=r),n==t&&(n=M?F(n,1):function(){return t.apply(this,arguments)}),n.convert=y(i,t),c.placeholder[i]&&(C=!0,n.placeholder=t.placeholder=j),n}var C,k="function"==typeof t,A=t===Object(t);if(A&&(h=n,n=t,t=void 0),null==n)throw new TypeError;h||(h={});var T={cap:!("cap"in h)||h.cap,curry:!("curry"in h)||h.curry,fixed:!("fixed"in h)||h.fixed,immutable:!("immutable"in h)||h.immutable,rearg:!("rearg"in h)||h.rearg},M="curry"in h&&h.curry,N="fixed"in h&&h.fixed,E="rearg"in h&&h.rearg,j=k?n:d,D=k?n.runInContext():void 0,R=k?n:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isFunction:e.isFunction,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},L=R.ary,O=R.assign,I=R.clone,F=R.curry,q=R.forEach,P=R.isArray,H=R.isFunction,Y=R.keys,B=R.rearg,$=R.toInteger,U=R.toPath,W=Y(c.aryMethod),z={castArray:function(e){return function(){var t=arguments[0];return P(t)?e(o(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],n=arguments[1],i=e(t,n),o=i.length;return T.cap&&"number"==typeof n?(n=n>2?n-2:1,o&&o<=n?i:r(i,n)):i}},mixin:function(e){return function(t){var n=this;if(!H(n))return e(n,Object(t));var i=[];return q(Y(t),function(e){H(t[e])&&i.push([e,n.prototype[e]])}),e(n,Object(t)),q(i,function(e){var t=e[1];H(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]}),n}},nthArg:function(e){return function(t){var n=t<0?1:$(t)+1;return F(e(t),n)}},rearg:function(e){return function(t,n){var i=n?n.length:0;return F(e(t,n),i)}},runInContext:function(t){return function(n){return l(e,t(n),h)}}};if(!A)return S(t,n);var V=n,J=[];return q(W,function(e){q(c.aryMethod[e],function(e){var t=V[c.remap[e]||e];t&&J.push([e,S(e,t)])})}),q(Y(V),function(e){var t=V[e];if("function"==typeof t){for(var n=J.length;n--;)if(J[n][0]==e)return;t.convert=y(e,t),J.push([e,t])}}),q(J,function(e){V[e[0]]=e[1]}),V.convert=v,C&&(V.placeholder=j),q(Y(V),function(e){q(c.realToAlias[e]||[],function(t){V[t]=V[e]})}),V}var c=n(2),d=n(3),h=Array.prototype.push;e.exports=l},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.placeholder={bind:!0,bindKey:!0,curry:!0,curryRight:!0,partial:!0,partialRight:!0},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,i={};for(var r in n){var o=n[r];e.call(i,o)?i[o].push(r):i[o]=[r]}return i}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(e,t){e.exports={}}])}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();(void 0===t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return i!==-1&&i===t}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.splitOnce||(String.prototype.splitOnce=function(e){var t=this.split(e);return[t.shift(),t.join(e)]}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),define("polyfill",function(){}),function(e){"function"==typeof define&&define.amd?define("jquery.browser",["jquery"],function(t){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";function t(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],i={},r={
browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:n[0]||""};if(r.browser&&(i[r.browser]=!0,i.version=r.version,i.versionNumber=parseInt(r.versionNumber,10)),r.platform&&(i[r.platform]=!0),(i.android||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"])&&(i.mobile=!0),(i.cros||i.mac||i.linux||i.win)&&(i.desktop=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv||i.iemobile){var o="msie";r.browser=o,i[o]=!0}if(i.edge){delete i.edge;var s="msedge";r.browser=s,i[s]=!0}if(i.safari&&i.blackberry){var a="blackberry";r.browser=a,i[a]=!0}if(i.safari&&i.playbook){var u="playbook";r.browser=u,i[u]=!0}if(i.bb){var l="blackberry";r.browser=l,i[l]=!0}if(i.opr){var c="opera";r.browser=c,i[c]=!0}if(i.safari&&i.android){var d="android";r.browser=d,i[d]=!0}if(i.safari&&i.kindle){var h="kindle";r.browser=h,i[h]=!0}if(i.safari&&i.silk){var f="silk";r.browser=f,i[f]=!0}return i.name=r.browser,i.platform=r.platform,i}return window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser}),function(e,t){function n(e){return d.PF.compile(e||"nplurals=2; plural=(n != 1);")}function i(e,t){this._key=e,this._i18n=t}var r=Array.prototype,o=Object.prototype,s=r.slice,a=o.hasOwnProperty,u=r.forEach,l={},c={forEach:function(e,t,n){var i,r,o;if(null!==e)if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i,e)===l)return}else for(o in e)if(a.call(e,o)&&t.call(n,e[o],o,e)===l)return},extend:function(e){return this.forEach(s.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e}},d=function(e){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages"},this.options=c.extend({},this.defaults,e),this.textdomain(this.options.domain),e.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+e.domain+"`")};d.context_delimiter=String.fromCharCode(4),c.extend(i.prototype,{onDomain:function(e){return this._domain=e,this},withContext:function(e){return this._context=e,this},ifPlural:function(e,t){return this._val=e,this._pkey=t,this},fetch:function(e){return"[object Array]"!={}.toString.call(e)&&(e=[].slice.call(arguments)),(e&&e.length?d.sprintf:function(e){return e})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),e)}}),c.extend(d.prototype,{translate:function(e){return new i(e,this)},textdomain:function(e){return e?void(this._textdomain=e):this._textdomain},gettext:function(e){return this.dcnpgettext.call(this,t,t,e)},dgettext:function(e,n){return this.dcnpgettext.call(this,e,t,n)},dcgettext:function(e,n){return this.dcnpgettext.call(this,e,t,n)},ngettext:function(e,n,i){return this.dcnpgettext.call(this,t,t,e,n,i)},dngettext:function(e,n,i,r){return this.dcnpgettext.call(this,e,t,n,i,r)},dcngettext:function(e,n,i,r){return this.dcnpgettext.call(this,e,t,n,i,r)},pgettext:function(e,n){return this.dcnpgettext.call(this,t,e,n)},dpgettext:function(e,t,n){return this.dcnpgettext.call(this,e,t,n)},dcpgettext:function(e,t,n){return this.dcnpgettext.call(this,e,t,n)},npgettext:function(e,n,i,r){return this.dcnpgettext.call(this,t,e,n,i,r)},dnpgettext:function(e,t,n,i,r){return this.dcnpgettext.call(this,e,t,n,i,r)},dcnpgettext:function(e,t,i,r,o){r=r||i,e=e||this._textdomain,o="undefined"==typeof o?1:o;var s;if(!this.options)return s=new d,s.dcnpgettext.call(s,void 0,void 0,i,r,o);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[e])throw new Error("Domain `"+e+"` was not found.");if(!this.options.locale_data[e][""])throw new Error("No locale meta information provided.");if(!i)throw new Error("No translation key found.");if("number"!=typeof o&&(o=parseInt(o,10),isNaN(o)))throw new Error("The number that was passed in is not a number.");var a,u,l=t?t+d.context_delimiter+i:i,c=this.options.locale_data,h=c[e],f=h[""].plural_forms||(c.messages||this.defaults.locale_data.messages)[""].plural_forms,p=n(f)(o)+1;if(!h)throw new Error("No domain named `"+e+"` could be found.");return a=h[l],!a||p>=a.length?(this.options.missing_key_callback&&this.options.missing_key_callback(l),u=[null,i,r],u[n(f)(o)+1]):(u=a[p],u?u:(u=[null,i,r],u[n(f)(o)+1]))}});var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,i){var r,o,s,a,u,l,c,d=1,f=n.length,p="",m=[];for(o=0;o<f;o++)if(p=e(n[o]),"string"===p)m.push(n[o]);else if("array"===p){if(a=n[o],a[2])for(r=i[d],s=0;s<a[2].length;s++){if(!r.hasOwnProperty(a[2][s]))throw h('[sprintf] property "%s" does not exist',a[2][s]);r=r[a[2][s]]}else r=a[1]?i[a[1]]:i[d++];if(/[^s]/.test(a[8])&&"number"!=e(r))throw h("[sprintf] expecting number but found %s",e(r));switch("undefined"!=typeof r&&null!==r||(r=""),a[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=a[7]?r.toExponential(a[7]):r.toExponential();break;case"f":r=a[7]?parseFloat(r).toFixed(a[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=String(r))&&a[7]?r.substring(0,a[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(a[8])&&a[3]&&r>=0?"+"+r:r,l=a[4]?"0"==a[4]?"0":a[4].charAt(1):" ",c=a[6]-String(r).length,u=a[6]?t(l,c):"",m.push(a[5]?r+u:u+r)}return m.join("")},n.cache={},n.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){r|=1;var o=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw"[sprintf] huh?";for(o.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))o.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw"[sprintf] huh?";o.push(a[1])}n[2]=o}else r|=2;if(3===r)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";i.push(n)}t=t.substring(n[0].length)}return i},n}(),f=function(e,t){return t.unshift(e),h.apply(null,t)};d.parse_plural=function(e,t){return e=e.replace(/n/g,t),d.parse_expression(e)},d.sprintf=function(e,t){return"[object Array]"=={}.toString.call(t)?f(e,[].slice.call(t)):h.apply(this,[].slice.call(arguments))},d.prototype.sprintf=function(){return d.sprintf.apply(this,arguments)},d.PF={},d.PF.parse=function(e){var t=d.PF.extractPluralExpr(e);return d.PF.parser.parse.call(d.PF.parser,t)},d.PF.compile=function(e){function t(e){return e===!0?1:e?e:0}var n=d.PF.parse(e);return function(e){return t(d.PF.interpreter(n)(e))}},d.PF.interpreter=function(e){return function(t){switch(e.type){case"GROUP":return d.PF.interpreter(e.expr)(t);case"TERNARY":return d.PF.interpreter(e.expr)(t)?d.PF.interpreter(e.truthy)(t):d.PF.interpreter(e.falsey)(t);case"OR":return d.PF.interpreter(e.left)(t)||d.PF.interpreter(e.right)(t);case"AND":return d.PF.interpreter(e.left)(t)&&d.PF.interpreter(e.right)(t);case"LT":return d.PF.interpreter(e.left)(t)<d.PF.interpreter(e.right)(t);case"GT":return d.PF.interpreter(e.left)(t)>d.PF.interpreter(e.right)(t);case"LTE":return d.PF.interpreter(e.left)(t)<=d.PF.interpreter(e.right)(t);case"GTE":return d.PF.interpreter(e.left)(t)>=d.PF.interpreter(e.right)(t);case"EQ":return d.PF.interpreter(e.left)(t)==d.PF.interpreter(e.right)(t);case"NEQ":return d.PF.interpreter(e.left)(t)!=d.PF.interpreter(e.right)(t);case"MOD":return d.PF.interpreter(e.left)(t)%d.PF.interpreter(e.right)(t);case"VAR":return t;case"NUM":return e.val;default:throw new Error("Invalid Token found.")}}},d.PF.extractPluralExpr=function(e){e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(e)||(e=e.concat(";"));var t,n=/nplurals\=(\d+);/,i=/plural\=(.*);/,r=e.match(n),o={};if(!(r.length>1))throw new Error("nplurals not found in plural_forms string: "+e);if(o.nplurals=r[1],e=e.replace(n,""),t=e.match(i),!(t&&t.length>1))throw new Error("`plural` expression not found: "+e);return t[1]},d.PF.parser=function(){var e={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(e,t,n,i,r,o,s){var a=o.length-1;switch(r){case 1:return{type:"GROUP",expr:o[a-1]};case 2:this.$={type:"TERNARY",expr:o[a-4],truthy:o[a-2],falsey:o[a]};break;case 3:this.$={type:"OR",left:o[a-2],right:o[a]};break;case 4:this.$={type:"AND",left:o[a-2],right:o[a]};break;case 5:this.$={type:"LT",left:o[a-2],right:o[a]};break;case 6:this.$={type:"LTE",left:o[a-2],right:o[a]};break;case 7:this.$={type:"GT",left:o[a-2],right:o[a]};break;case 8:this.$={type:"GTE",left:o[a-2],right:o[a]};break;case 9:this.$={type:"NEQ",left:o[a-2],right:o[a]};break;case 10:this.$={type:"EQ",left:o[a-2],right:o[a]};break;case 11:this.$={type:"MOD",left:o[a-2],right:o[a]};break;case 12:this.$={type:"GROUP",expr:o[a-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(e)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(e){r.length=r.length-2*e,o.length=o.length-e,s.length=s.length-e}function n(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,r=[0],o=[null],s=[],a=this.table,u="",l=0,c=0,d=0,h=2,f=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var m,_,g,v,y,b,w,x,S,C={};;){if(g=r[r.length-1],this.defaultActions[g]?v=this.defaultActions[g]:(null==m&&(m=n()),v=a[g]&&a[g][m]),"undefined"==typeof v||!v.length||!v[0]){if(!d){S=[];for(b in a[g])this.terminals_[b]&&b>2&&S.push("'"+this.terminals_[b]+"'");var k="";k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+S.join(", ")+", got '"+this.terminals_[m]+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:p,expected:S})}if(3==d){if(m==f)throw new Error(k||"Parsing halted.");c=this.lexer.yyleng,u=this.lexer.yytext,l=this.lexer.yylineno,p=this.lexer.yylloc,m=n()}for(;;){if(h.toString()in a[g])break;if(0==g)throw new Error(k||"Parsing halted.");t(1),g=r[r.length-1]}_=m,m=h,g=r[r.length-1],v=a[g]&&a[g][h],d=3}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+m);switch(v[0]){case 1:r.push(m),o.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(v[1]),m=null,_?(m=_,_=null):(c=this.lexer.yyleng,u=this.lexer.yytext,l=this.lexer.yylineno,p=this.lexer.yylloc,d>0&&d--);break;case 2:if(w=this.productions_[v[1]][1],C.$=o[o.length-w],C._$={first_line:s[s.length-(w||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(w||1)].first_column,last_column:s[s.length-1].last_column},y=this.performAction.call(C,u,c,l,this.yy,v[1],o,s),"undefined"!=typeof y)return y;w&&(r=r.slice(0,-1*w*2),o=o.slice(0,-1*w),s=s.slice(0,-1*w)),r.push(this.productions_[v[1]][0]),o.push(C.$),s.push(C._$),x=a[r[r.length-2]][r[r.length-1]],r.push(x);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parseError)throw new Error(e);this.yy.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e;var t=e.match(/\n/);return t&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),r=0;r<i.length;r++)if(t=this._input.match(this.rules[i[r]]))return n=t[0].match(/\n.*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[r],this.conditionStack[this.conditionStack.length-1]),e?e:void 0;return""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.performAction=function(e,t,n,i){switch(n){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},e.rules=[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],e.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}},e}();return e.lexer=t,e}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.Jed=d):("function"==typeof define&&define.amd&&define("jed",[],function(){return d}),e.Jed=d)}(this),define("text",["module"],function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}function n(e,n,i,r){if(n===r)return!0;if(e===i){if("http"===e)return t(n,"80")===t(r,"80");if("https"===e)return t(n,"443")===t(r,"443")}return!1}var i,r,o,s,a,u=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,h=d&&location.protocol&&location.protocol.replace(/\:/,""),f=d&&location.hostname,p=d&&(location.port||void 0),m={},_=e.config&&e.config()||{};return i={version:"2.0.15",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:_.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=u[t];try{e=new ActiveXObject(n)}catch(e){}if(e){u=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.lastIndexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return o!==-1&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,i=n||t,o=i.indexOf("!"),o!==-1&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,o){var s,a,u,l=i.xdRegExp.exec(e);return!l||(s=l[2],a=l[3],a=a.split(":"),u=a[1],a=a[0],(!s||s===t)&&(!a||a.toLowerCase()===r.toLowerCase())&&(!u&&!a||n(s,u,t,o)))},finishLoad:function(e,t,n,r){n=t?i.strip(n):n,_.isBuild&&(m[e]=n),r(n)},load:function(e,t,n,r){if(r&&r.isBuild&&!r.inlineText)return void n();_.isBuild=r&&r.isBuild;var o=i.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=t.toUrl(s),u=_.useXhr||i.useXhr;return 0===a.indexOf("empty:")?void n():void(!d||u(a,h,f,p)?i.get(a,function(t){i.finishLoad(e,o.strip,t,n)},function(e){n.error&&n.error(e)}):t([s],function(e){i.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}))},write:function(e,t,n,r){if(m.hasOwnProperty(t)){var o=i.jsEscape(m[t]);n.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,n,r,o){var s=i.parseName(t),a=s.ext?"."+s.ext:"",u=s.moduleName+a,l=n.toUrl(s.moduleName+a)+".js";i.load(u,n,function(t){var n=function(e){return r(l,e)};n.asModule=function(e,t){return r.asModule(e,l,t)},i.write(e,u,n,o)},o)}},"node"===_.env||!_.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(r=require.nodeRequire("fs"),i.get=function(e,t,n){try{var i=r.readFileSync(e,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),t(i)}catch(e){n&&n(e)}}):"xhr"===_.env||!_.env&&i.createXhr()?i.get=function(e,t,n,r){var o,s=i.createXhr();if(s.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);_.onXhr&&_.onXhr(s,e),s.onreadystatechange=function(i){var r,o;4===s.readyState&&(r=s.status||0,r>399&&r<600?(o=new Error(e+" HTTP status: "+r),o.xhr=s,n&&n(o)):t(s.responseText),_.onXhrComplete&&_.onXhrComplete(s,e))},s.send(null)}:"rhino"===_.env||!_.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),u="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);u=String(n.toString())}finally{a.close()}t(u)}:("xpconnect"===_.env||!_.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in o,i.get=function(e,t){var n,i,r,u={};a&&(e=e.replace(/\//g,"\\")),r=new FileUtils.File(e);try{n=o["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(r,1,0,!1),i=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),i.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),u),i.close(),n.close(),t(u.value)}catch(e){throw new Error((r&&r.path||"")+": "+e)}}),i}),define("text!de",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=2; plural=(n != 1);",\n            "lang": "de"\n         },\n         "Consult the guides": [\n            null,\n            "Beachte unsere Ratgeber"\n         ],\n         "Write to us": [\n            null,\n            "Schreib an uns"\n         ],\n         "Chat with visitors": [\n            null,\n            "Besucher-Chat"\n         ],\n         "Ask a question": [\n            null,\n            "Stell eine Frage"\n         ],\n         "Make a suggestion": [\n            null,\n            "Mach einen Vorschlag"\n         ],\n         "Review this App": [\n            null,\n            "Bewerte diese App"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "Du hast den Chat noch nicht installiert."\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "Du kannst den Chat aktivieren, indem du die Kontakt-Seite deiner Webseite bearbeitest."\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "Veröffentliche deine Website, um den Chat zu aktivieren."\n         ],\n         "You have not received any message yet.": [\n            null,\n            "Du hast noch keine Nachricht erhalten."\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "Du kannst die Kontakt-Seite auf deiner veröffentlichten Website testen."\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "Kommunikationsfehler. Überprüfe bitte deine Internetverbindung."\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "Nachrichten werden für 30 Tage aufbewahrt."\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "Ein Begrüßungssatz oder ein Name"\n         ],\n         "I am visible online": [\n            null,\n            "Ich bin online sichtbar."\n         ],\n         "Notifications": [\n            null,\n            "Benachrichtigungen"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "Ein Besucher möchte Chatten"\n         ],\n         "Chat": [\n            null,\n            "Chat"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "Die Person ist nicht mehr online."\n         ],\n         "Your screen name will show as": [\n            null,\n            "Dein Benutzername lautet"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "Du kannst die Nachrichten deiner Leser mit der SimDif App beantworten"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "Damit die Änderungen wirksam werden, veröffentliche bitte diese Site erneut."\n         ],\n         "Chat with us": [\n            null,\n            "Chatte mit uns"\n         ],\n         "Email us": [\n            null,\n            "E-Mail uns"\n         ],\n         "What is your name?": [\n            null,\n            "Wie lautet dein Name?"\n         ],\n         "Your name": [\n            null,\n            "Dein Name"\n         ],\n         "Please ask your question": [\n            null,\n            "Stelle bitte deine Frage"\n         ],\n         "Your text": [\n            null,\n            "Dein Text"\n         ],\n         "Let\'s chat": [\n            null,\n            "Lass uns chatten"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "Ich bin momentan nicht für einen Chat verfügbar."\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "Bitte benutze das Formular oben, um mir eine E-Mail zu senden. Ich werde diese so schnell wie möglich bearbeiten."\n         ],\n         "Your message": [\n            null,\n            "Deine Nachricht"\n         ],\n         "Please check the box": [\n            null,\n            "Markiere bitte das Feld"\n         ],\n         "Verification": [\n            null,\n            "Verifizierung"\n         ],\n         "me": [\n            null,\n            "Ich"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            ""\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            "tippt"\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            "tippt nicht mehr"\n         ],\n         "has gone away": [\n            null,\n            "ist jetzt abwesend"\n         ],\n         "Show this menu": [\n            null,\n            "Dieses Menü anzeigen"\n         ],\n         "Write in the third person": [\n            null,\n            "In der dritten Person schreiben"\n         ],\n         "Remove messages": [\n            null,\n            "Nachrichten entfernen"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            "Sind Sie sicher, dass Sie alle Nachrichten dieses Chats löschen möchten?"\n         ],\n         "has gone offline": [\n            null,\n            "ist offline gegangen"\n         ],\n         "is busy": [\n            null,\n            "ist beschäftigt"\n         ],\n         "Clear all messages": [\n            null,\n            "Alle Nachrichten löschen"\n         ]\n      }\n   }\n}'}),define("text!es",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=2; plural=(n != 1);",\n            "lang": "es"\n         },\n         "Consult the guides": [\n            null,\n            "Consulta las guías"\n         ],\n         "Write to us": [\n            null,\n            "Escribenos"\n         ],\n         "Chat with visitors": [\n            null,\n            "Chatea con visitantes"\n         ],\n         "Ask a question": [\n            null,\n            "Haznos una pregunta"\n         ],\n         "Make a suggestion": [\n            null,\n            "Haznos una sugerencia"\n         ],\n         "Review this App": [\n            null,\n            "Comenta esta aplicación"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "Aún no has instalado el chat."\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "Puedes activar el chat editando la página de contacto de tu sitio web."\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "Publica tu sitio web para activar el chat."\n         ],\n         "You have not received any message yet.": [\n            null,\n            "Aún no has recibido ningún mensaje."\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "Puedes comprobar la página de contacto en tu sitio publicado."\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "Error de comunicación. Comprueba tu conexión a internet, por favor."\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "Los mensajes se conservan durante 30 días."\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "Una frase de bienvenida o un nombre."\n         ],\n         "I am visible online": [\n            null,\n            "Aparezco en línea"\n         ],\n         "Notifications": [\n            null,\n            "Notificaciones"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "Un visitante desea chatear"\n         ],\n         "Chat": [\n            null,\n            "Chatea"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "Esta persona ya no está en línea."\n         ],\n         "Your screen name will show as": [\n            null,\n            "Tu nombre aparecerá en la pantalla como"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "Puedes responder los mensajes de tu lector con la aplicación de SimDif"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "Publica este sitio de nuevo para introducir los cambios, por favor."\n         ],\n         "Chat with us": [\n            null,\n            "Chatea con nosotros"\n         ],\n         "Email us": [\n            null,\n            "Envíanos un correo electrónico"\n         ],\n         "What is your name?": [\n            null,\n            "¿Cómo te llamas?"\n         ],\n         "Your name": [\n            null,\n            "Tu nombre"\n         ],\n         "Please ask your question": [\n            null,\n            "Haz tu pregunta, por favor"\n         ],\n         "Your text": [\n            null,\n            "Tu texto"\n         ],\n         "Let\'s chat": [\n            null,\n            "Chateemos"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "No estoy disponible ahora mismo para un chat."\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "Por favor, utilice el formulario de arriba para enviarme un correo electrónico. Me pondré en contacto con usted rápidamente."\n         ],\n         "Your message": [\n            null,\n            "Tu mensaje"\n         ],\n         "Please check the box": [\n            null,\n            "Comprueba la bandeja de entrada, por favor"\n         ],\n         "Verification": [\n            null,\n            "Verificación"\n         ],\n         "me": [\n            null,\n            "yo"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            ""\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            ""\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            ""\n         ],\n         "has gone away": [\n            null,\n            "Este contacto está ausente"\n         ],\n         "Show this menu": [\n            null,\n            "Mostrar este menú"\n         ],\n         "Write in the third person": [\n            null,\n            "Escribir en tercera persona"\n         ],\n         "Remove messages": [\n            null,\n            "Eliminar mensajes"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            "¿Está seguro de querer limpiar los mensajes de esta conversación?"\n         ],\n         "has gone offline": [\n            null,\n            "Este contacto está desconectado"\n         ],\n         "is busy": [\n            null,\n            "ocupado"\n         ],\n         "Clear all messages": [\n            null,\n            "Mensaje personal"\n         ]\n      }\n   }\n}';
}),define("text!fr",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=2; plural=(n > 1);",\n            "lang": "fr"\n         },\n         "Consult the guides": [\n            null,\n            "Consulter les guides"\n         ],\n         "Write to us": [\n            null,\n            "Nous écrire"\n         ],\n         "Chat with visitors": [\n            null,\n            "Chatter avec les visiteurs"\n         ],\n         "Ask a question": [\n            null,\n            "Poser une question"\n         ],\n         "Make a suggestion": [\n            null,\n            "Faire une suggestion"\n         ],\n         "Review this App": [\n            null,\n            "Donner son avis"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "Vous n\'avez pas encore installé le Chat."\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "Vous pouvez activer le Chat en éditant la page de contact de votre site web."\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "Publiez votre site web pour activer le Chat."\n         ],\n         "You have not received any message yet.": [\n            null,\n            "Vous n\'avez pas encore reçu de messages."\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "Vous pouvez aller sur votre site publié et tester sa page de contact."\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "Erreur de communication. Veuillez vérifier votre connexion à internet."\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "Les messages sont conservés pendant 30 jours."\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "Un message d\'accueil ou votre nom"\n         ],\n         "I am visible online": [\n            null,\n            "Visible en ligne"\n         ],\n         "Notifications": [\n            null,\n            "Notifications"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "Un visiteur vous appelle sur le Chat"\n         ],\n         "Chat": [\n            null,\n            "Dialoguez"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "Cette personne n\'est plus en ligne."\n         ],\n         "Your screen name will show as": [\n            null,\n            "Votre nom ou pseudo"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "Vous pourrez répondre aux message avec l\'app SimDif."\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "Pour appliquer ce changement, n\'oubliez pas de republier votre site."\n         ],\n         "Chat with us": [\n            null,\n            "Dialoguez avec nous"\n         ],\n         "Email us": [\n            null,\n            "Envoyez-nous un mail"\n         ],\n         "What is your name?": [\n            null,\n            "Quel est votre nom ?"\n         ],\n         "Your name": [\n            null,\n            "Votre nom"\n         ],\n         "Please ask your question": [\n            null,\n            "Posez votre question"\n         ],\n         "Your text": [\n            null,\n            "Votre message"\n         ],\n         "Let\'s chat": [\n            null,\n            "Démarrer le Chat"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "Je ne suis pas disponible pour chatter pour le moment."\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "Merci d\'utiliser le formulaire ci-dessus. Je vous répondrai par mail dès que possible."\n         ],\n         "Your message": [\n            null,\n            "Votre message"\n         ],\n         "Please check the box": [\n            null,\n            "Veuillez cocher la case"\n         ],\n         "Verification": [\n            null,\n            "Verificación"\n         ],\n         "me": [\n            null,\n            "moi"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            "Un message très long a été reçu. Cela pourrait être lié à une attaque visant à dégrader la performance de la conversation. La sortie a été tronquée."\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            "écrit"\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            "a arrêté d’écrire"\n         ],\n         "has gone away": [\n            null,\n            "est parti"\n         ],\n         "Show this menu": [\n            null,\n            "Afficher ce menu"\n         ],\n         "Write in the third person": [\n            null,\n            "Écrire à la troisième personne"\n         ],\n         "Remove messages": [\n            null,\n            "Effacer les messages"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            "Voulez-vous vraiment supprimer les messages de cette conversation ?"\n         ],\n         "has gone offline": [\n            null,\n            "s’est déconnecté"\n         ],\n         "is busy": [\n            null,\n            "est occupé"\n         ],\n         "Clear all messages": [\n            null,\n            "Supprimer tous les messages"\n         ]\n      }\n   }\n}'}),define("text!id",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=2; plural=(n > 1);",\n            "lang": "id"\n         },\n         "Consult the guides": [\n            null,\n            "Coba lihat lagi di panduan"\n         ],\n         "Write to us": [\n            null,\n            "Kirim pesan kepada kami"\n         ],\n         "Chat with visitors": [\n            null,\n            "Chat dengan pengunjung"\n         ],\n         "Ask a question": [\n            null,\n            "Ada pertanyaan?"\n         ],\n         "Make a suggestion": [\n            null,\n            "Kirim saran"\n         ],\n         "Review this App": [\n            null,\n            "Buat resensi terhadap Aplikasi ini"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "Anda belum menginstalasi fungsi Chat."\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "Anda bisa mengaktivasi fungsi Chat dengan mengedit Laman Kontak Kami di situs Anda."\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "Publikasikan situs Anda untuk mengaktifasi fungsi Chat."\n         ],\n         "You have not received any message yet.": [\n            null,\n            "Anda belum menerima pesan apapun."\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "Coba cek Laman Kontak Kami di situs Anda."\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "Kesalahan jalur komunikasi. Coba cek koneksi internetnya."\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "Pesan yang masuk akan disimpan selama 30 hari."\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "Kalimat penyambut atau nama"\n         ],\n         "I am visible online": [\n            null,\n            "Saya bisa kelihatan di online"\n         ],\n         "Notifications": [\n            null,\n            "Notifikasi"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "Ada pengunjung yang ingin chatting"\n         ],\n         "Chat": [\n            null,\n            "Chat"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "Orang ini sudah tidak online lagi"\n         ],\n         "Your screen name will show as": [\n            null,\n            "Nama screen Anda akan tampil sbb.:"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "Anda bisa menjawab pesan-pesan melalui aplikasi SimDif"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "Agar perubahan bisa tampil online, harap publikasikan kembali situs ini"\n         ],\n         "Chat with us": [\n            null,\n            "Silakan memulai chat"\n         ],\n         "Email us": [\n            null,\n            "Silahkan email kami"\n         ],\n         "What is your name?": [\n            null,\n            "Siapa nama Anda?"\n         ],\n         "Your name": [\n            null,\n            "Nama Anda"\n         ],\n         "Please ask your question": [\n            null,\n            "Silakan tulis pertanyaannya"\n         ],\n         "Your text": [\n            null,\n            "Teks Anda"\n         ],\n         "Let\'s chat": [\n            null,\n            "Mari kita mulai..."\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "Saya sedang tidak bisa chatting..."\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "Silakan mengirim email melalui formulir diatas, saya akan berusaha menjawabnya secepat mungkin."\n         ],\n         "Your message": [\n            null,\n            "Pesan Anda"\n         ],\n         "Please check the box": [\n            null,\n            "Harap tandai boks ini"\n         ],\n         "Verification": [\n            null,\n            "Verifikasi"\n         ],\n         "me": [\n            null,\n            "saya"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            ""\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            ""\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            ""\n         ],\n         "has gone away": [\n            null,\n            "Teman ini tidak di tempat"\n         ],\n         "Show this menu": [\n            null,\n            "Tampilkan menu ini"\n         ],\n         "Write in the third person": [\n            null,\n            "Tulis ini menggunakan bahasa pihak ketiga"\n         ],\n         "Remove messages": [\n            null,\n            "Hapus pesan"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            ""\n         ],\n         "has gone offline": [\n            null,\n            "Teman ini tidak terhubung"\n         ],\n         "is busy": [\n            null,\n            "sibuk"\n         ],\n         "Clear all messages": [\n            null,\n            "Pesan pribadi"\n         ]\n      }\n   }\n}'}),define("text!it",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=2; plural=(n != 1);",\n            "lang": "it"\n         },\n         "Consult the guides": [\n            null,\n            "Consulta le guide"\n         ],\n         "Write to us": [\n            null,\n            "Scrivici"\n         ],\n         "Chat with visitors": [\n            null,\n            "Chat con gli utenti"\n         ],\n         "Ask a question": [\n            null,\n            "Fai una domanda"\n         ],\n         "Make a suggestion": [\n            null,\n            "Dai un suggerimento"\n         ],\n         "Review this App": [\n            null,\n            "Recensisci questa App"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "La chat non è stata ancora installata."\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "Puoi attivare la Chat editando la pagina di contatto nel tuo sito."\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "Per attivare la Chat pubblica il tuo sito."\n         ],\n         "You have not received any message yet.": [\n            null,\n            "Non hai ancora ricevuto nessun messaggio."\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "Puoi provare la tua pagina di contatto nel tuo sito pubblicato."\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "Comunicazione di errore. Ti preghiamo di controllare la tua connessione internet."\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "I messaggi vengono salvati per 30 giorni."\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "Un messaggio di benvenuto o un nome"\n         ],\n         "I am visible online": [\n            null,\n            "Sono visibile in linea"\n         ],\n         "Notifications": [\n            null,\n            "Notifiche"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "Un utente vuole chattare"\n         ],\n         "Chat": [\n            null,\n            "Chatta"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "Questa persona non è più in linea."\n         ],\n         "Your screen name will show as": [\n            null,\n            "Il tuo nome sarà visualizzato come"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "Puoi rispondere ai messaggi dei tuoi utenti con la App di SimDif"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "Per rendere effettive le modifiche ti preghiamo di pubblicare il sito."\n         ],\n         "Chat with us": [\n            null,\n            "Chatta con noi"\n         ],\n         "Email us": [\n            null,\n            "Inviaci un email"\n         ],\n         "What is your name?": [\n            null,\n            "Come ti chiami?"\n         ],\n         "Your name": [\n            null,\n            "Il tuo nome"\n         ],\n         "Please ask your question": [\n            null,\n            "Fai la tua domanda per favore"\n         ],\n         "Your text": [\n            null,\n            "Il tuo testo"\n         ],\n         "Let\'s chat": [\n            null,\n            "Parliamo"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "In questo momento non sono disponibile per la chat."\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "Ti prego di usare il formulario qui sotto per mandarmi una mail. Ti risponderò rapidamente."\n         ],\n         "Your message": [\n            null,\n            "Il tuo messaggio"\n         ],\n         "Please check the box": [\n            null,\n            "Seleziona la casella"\n         ],\n         "Verification": [\n            null,\n            "Verifica"\n         ],\n         "me": [\n            null,\n            "me"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            "Un grande messaggio è stato ricevuto. Questo potrebbe essere dovuto ad un attacco destinato a degradare le performance della chat. L\'output è stato accorciato."\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            "sta scrivendo"\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            "ha smesso di scrivere"\n         ],\n         "has gone away": [\n            null,\n            "si è allontanato"\n         ],\n         "Show this menu": [\n            null,\n            "Mostra questo menu"\n         ],\n         "Write in the third person": [\n            null,\n            "Scrivi in terza persona"\n         ],\n         "Remove messages": [\n            null,\n            "Rimuovi messaggi"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            "Sei sicuro di volere pulire i messaggi da questo chat box?"\n         ],\n         "has gone offline": [\n            null,\n            "è andato offline"\n         ],\n         "is busy": [\n            null,\n            "è occupato"\n         ],\n         "Clear all messages": [\n            null,\n            "Pulisci tutti i messaggi"\n         ]\n      }\n   }\n}'}),define("text!ja",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=1; plural=0;",\n            "lang": "ja"\n         },\n         "Consult the guides": [\n            null,\n            "ヘルプガイド"\n         ],\n         "Write to us": [\n            null,\n            "お問い合わせ"\n         ],\n         "Chat with visitors": [\n            null,\n            "訪問者とのチャット"\n         ],\n         "Ask a question": [\n            null,\n            "質問する"\n         ],\n         "Make a suggestion": [\n            null,\n            "提案する"\n         ],\n         "Review this App": [\n            null,\n            "アプリのレビューを投稿"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "チャットはインストールされていません。"\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "サイトのお問い合わせぺーじを編集して、チャットを有効にできます。"\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "チャットを有効するにはサイトを公開してください。"\n         ],\n         "You have not received any message yet.": [\n            null,\n            "メッセージは0通です。"\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "サイトを公開してお問い合わせページからチャットを開始してみて下さい。"\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "通信エラーが発生しました。インターネット接続をご確認ください。"\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "メッセージは30日間保存されます。"\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "あなたのお名前、営業時間など訪問者へお問い合わせページ上でお知らせしたいこと"\n         ],\n         "I am visible online": [\n            null,\n            "ステータス表示"\n         ],\n         "Notifications": [\n            null,\n            "通知"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "訪問者から着信あり"\n         ],\n         "Chat": [\n            null,\n            "チャット"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "相手はオフラインです。"\n         ],\n         "Your screen name will show as": [\n            null,\n            "ハンドルネーム"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "SimDifアプリで訪問者のメッセージに返信できます。"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "機能を有効にするために、サイトを再公開してください。"\n         ],\n         "Chat with us": [\n            null,\n            "チャット"\n         ],\n         "Email us": [\n            null,\n            "お問い合わせ"\n         ],\n         "What is your name?": [\n            null,\n            "お名前は？"\n         ],\n         "Your name": [\n            null,\n            "お名前を入力"\n         ],\n         "Please ask your question": [\n            null,\n            "メッセージ"\n         ],\n         "Your text": [\n            null,\n            "メッセージを入力"\n         ],\n         "Let\'s chat": [\n            null,\n            "チャット開始"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "只今、席を外しております。"\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "上記フォームにてお問い合せ頂ければ、後ほどこちらからご連絡いたします。"\n         ],\n         "Your message": [\n            null,\n            "ここにメッセージを入力"\n         ],\n         "Please check the box": [\n            null,\n            "チェックボックスをオンにしてください。"\n         ],\n         "Verification": [\n            null,\n            "確認"\n         ],\n         "me": [\n            null,\n            "私"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            ""\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            ""\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            ""\n         ],\n         "has gone away": [\n            null,\n            "この相手先は離席中です"\n         ],\n         "Show this menu": [\n            null,\n            "このメニューを表示"\n         ],\n         "Write in the third person": [\n            null,\n            "第三者に書く"\n         ],\n         "Remove messages": [\n            null,\n            "メッセージを削除"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            ""\n         ],\n         "has gone offline": [\n            null,\n            "この相手先はオフラインです"\n         ],\n         "is busy": [\n            null,\n            "取り込み中"\n         ],\n         "Clear all messages": [\n            null,\n            "私信"\n         ]\n      }\n   }\n}'}),define("text!nl",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=2; plural=(n != 1);",\n            "lang": "nl"\n         },\n         "Consult the guides": [\n            null,\n            "Raadpleeg de gidsen"\n         ],\n         "Write to us": [\n            null,\n            "Schrijf ons"\n         ],\n         "Chat with visitors": [\n            null,\n            "Chat met bezoekers"\n         ],\n         "Ask a question": [\n            null,\n            "Stel een vraag"\n         ],\n         "Make a suggestion": [\n            null,\n            "Doe een suggestie"\n         ],\n         "Review this App": [\n            null,\n            "Beoordeel deze applicatie"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "Je hebt de chatfunctie nog niet geïnstalleerd."\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "Je kunt de chatfunctie activeren door de de contactpagina van je website te bewerken."\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "Publiceer je website om de chatfunctie te activeren."\n         ],\n         "You have not received any message yet.": [\n            null,\n            "Je hebt nog geen berichten ontvangen."\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "Je zou eventueel de contactpagina van je gepubliceerde site kunnen testen."\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "Communicatie fout. Controleer je internetverbinding."\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "Berichten worden gedurende 30 dagen bewaard."\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "Een welkomstbericht of naam "\n         ],\n         "I am visible online": [\n            null,\n            "Ik ben online zichtbaar"\n         ],\n         "Notifications": [\n            null,\n            "Meldingen"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "Een bezoeker wil chatten"\n         ],\n         "Chat": [\n            null,\n            "Chat"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "Een bezoeker wil chatten"\n         ],\n         "Your screen name will show as": [\n            null,\n            "Je schermnaam wordt weergegeven als"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "Je kunt de berichten van je lezer beantwoorden met de SimDif App"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "Gelieve deze site opnieuw publiceren om de wijzigingen door te voeren."\n         ],\n         "Chat with us": [\n            null,\n            "Chat met ons"\n         ],\n         "Email us": [\n            null,\n            "E-mail ons"\n         ],\n         "What is your name?": [\n            null,\n            "Wat is jouw naam?"\n         ],\n         "Your name": [\n            null,\n            "Je naam"\n         ],\n         "Please ask your question": [\n            null,\n            "Stel hier alsjeblieft je vraag"\n         ],\n         "Your text": [\n            null,\n            "Je bericht"\n         ],\n         "Let\'s chat": [\n            null,\n            "Laten we chatten"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "Ik ben nu niet beschikbaar voor een chat."\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "Gebruik alsjeblieft het formulier hierboven om me een email te sturen. Ik zal je zo spoedig mogelijk antwoorden."\n         ],\n         "Your message": [\n            null,\n            "Jouw bericht"\n         ],\n         "Please check the box": [\n            null,\n            "Graag het vakje aanvinken"\n         ],\n         "Verification": [\n            null,\n            "Verificatie"\n         ],\n         "me": [\n            null,\n            "ikzelf"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            ""\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            "%1$s is aan typen"\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            "%1$s is aan typen"\n         ],\n         "has gone away": [\n            null,\n            "Conact is afwezig"\n         ],\n         "Show this menu": [\n            null,\n            "Toon dit menu"\n         ],\n         "Write in the third person": [\n            null,\n            "Schrijf in de 3de persoon"\n         ],\n         "Remove messages": [\n            null,\n            "Verwijder bericht"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            ""\n         ],\n         "has gone offline": [\n            null,\n            "Contact is offline"\n         ],\n         "is busy": [\n            null,\n            "bezet"\n         ],\n         "Clear all messages": [\n            null,\n            "Persoonlijk bericht"\n         ]\n      }\n   }\n}'}),define("text!pt",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=2; plural=(n != 1);",\n            "lang": "pt"\n         },\n         "Consult the guides": [\n            null,\n            "Consulte os manuais"\n         ],\n         "Write to us": [\n            null,\n            "Escreva-nos"\n         ],\n         "Chat with visitors": [\n            null,\n            "Converse com seus visitantes"\n         ],\n         "Ask a question": [\n            null,\n            "Faça uma pergunta"\n         ],\n         "Make a suggestion": [\n            null,\n            "Envie uma sugestão"\n         ],\n         "Review this App": [\n            null,\n            "Avalie este App"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "Você ainda não instalou o Chat."\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "Você pode ativar o Chat editando a página de contato de seu website."\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "Publique seu website para ativar o Chat."\n         ],\n         "You have not received any message yet.": [\n            null,\n            "Você ainda não recebeu nenhuma mensagem."\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "Você pode testar a página de contato em seu site publicado."\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "Erro de comunicação. Por favor, verifique sua conexão de internet."\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "As mensagens são guardadas por 30 dias."\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "Uma frase de boas-vindas ou um nome"\n         ],\n         "I am visible online": [\n            null,\n            "Estou visível online"\n         ],\n         "Notifications": [\n            null,\n            "Notificações"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "Um visitante quer conversar"\n         ],\n         "Chat": [\n            null,\n            "Converse"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "Esta pessoa não está mais online."\n         ],\n         "Your screen name will show as": [\n            null,\n            "Seu nome na tela será mostrado como"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "Você pode responder as mensagens de seu visitante com o App do SimDif"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "Por favor, publique novamente este site para que as mudanças entrem em vigor."\n         ],\n         "Chat with us": [\n            null,\n            "Converse conosco"\n         ],\n         "Email us": [\n            null,\n            "Envia-nos um email"\n         ],\n         "What is your name?": [\n            null,\n            "Qual é o seu nome?"\n         ],\n         "Your name": [\n            null,\n            "Seu nome"\n         ],\n         "Please ask your question": [\n            null,\n            "Por favor, faça sua pergunta"\n         ],\n         "Your text": [\n            null,\n            "Seu texto"\n         ],\n         "Let\'s chat": [\n            null,\n            "Vamos conversar"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "Não estou disponível neste momento para um Chat."\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "Por favor, use o formulário acima para me enviar um email. Responderei assim que possível."\n         ],\n         "Your message": [\n            null,\n            "Sua mensagem"\n         ],\n         "Please check the box": [\n            null,\n            "Por favor, marque a caixa"\n         ],\n         "Verification": [\n            null,\n            "Verificação"\n         ],\n         "me": [\n            null,\n            "eu"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            ""\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            "%1$s está digitando"\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            "%1$s está digitando"\n         ],\n         "has gone away": [\n            null,\n            "Este contato está ausente"\n         ],\n         "Show this menu": [\n            null,\n            "Mostrar o menu"\n         ],\n         "Write in the third person": [\n            null,\n            "Escrever em terceira pessoa"\n         ],\n         "Remove messages": [\n            null,\n            "Remover mensagens"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            "Tem certeza que deseja limpar as mensagens dessa caixa?"\n         ],\n         "has gone offline": [\n            null,\n            "Este contato está offline"\n         ],\n         "is busy": [\n            null,\n            "ocupado"\n         ],\n         "Clear all messages": [\n            null,\n            "Mensagem pessoal"\n         ]\n      }\n   }\n}';
}),define("text!ru",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);",\n            "lang": "ru"\n         },\n         "Consult the guides": [\n            null,\n            "Посмотреть руководства"\n         ],\n         "Write to us": [\n            null,\n            "Написать нам"\n         ],\n         "Chat with visitors": [\n            null,\n            "Запустить чат с посетителями"\n         ],\n         "Ask a question": [\n            null,\n            "Задать вопрос"\n         ],\n         "Make a suggestion": [\n            null,\n            "Предложить изменения"\n         ],\n         "Review this App": [\n            null,\n            "Написать отзыв"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "Вы еще не установили Чат."\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "Вы можете активировать Чат, отредактировав страницу Связаться вашего сайта."\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "Опубликуйте ваш сайт, чтобы активировать Чат."\n         ],\n         "You have not received any message yet.": [\n            null,\n            "Вы еще не получили сообщений."\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "Протестируйте страницу Связаться на вашем сайте."\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "Ошибка связи. Пожалуйста, проверьте ваше соединение с интернетом."\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "Сообщения хранятся 30 дней."\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "Приветствие или имя"\n         ],\n         "I am visible online": [\n            null,\n            "Я виден онлайн"\n         ],\n         "Notifications": [\n            null,\n            "Уведомления"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "Посетитель приглашает в чат"\n         ],\n         "Chat": [\n            null,\n            "Чат"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "Этот человек в данный момент не в сети"\n         ],\n         "Your screen name will show as": [\n            null,\n            "Ваше имя будет указано, как "\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "Вы можете ответить на сообщения посетителей через приложение SimDif"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "Пожалуйста, опубликуйте сайт снова, чтобы изменения вступили в силу."\n         ],\n         "Chat with us": [\n            null,\n            "Чат"\n         ],\n         "Email us": [\n            null,\n            "Эл. почта"\n         ],\n         "What is your name?": [\n            null,\n            "Как вас зовут?"\n         ],\n         "Your name": [\n            null,\n            "Ваше имя"\n         ],\n         "Please ask your question": [\n            null,\n            "Пожалуйста, задайте ваш вопрос"\n         ],\n         "Your text": [\n            null,\n            "Ваш текст"\n         ],\n         "Let\'s chat": [\n            null,\n            "Давайте поговорим"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "Я сейчас недоступен для общения в Чате."\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "Пожалуйста, напишите мне письмо на эл. почту с помощью формы выше. Я максимально быстро отвечу вам."\n         ],\n         "Your message": [\n            null,\n            "Ваше сообщение"\n         ],\n         "Please check the box": [\n            null,\n            "Пожалуйста, поставьте галочку в квадрате"\n         ],\n         "Verification": [\n            null,\n            "Проверка пользователя"\n         ],\n         "me": [\n            null,\n            "Я"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            ""\n         ],\n         "Typing from another device": [\n            null,\n            ""\n         ],\n         "is typing": [\n            null,\n            "набирает текст"\n         ],\n         "Stopped typing on the other device": [\n            null,\n            ""\n         ],\n         "has stopped typing": [\n            null,\n            "перестал набирать"\n         ],\n         "has gone away": [\n            null,\n            "отошёл"\n         ],\n         "Show this menu": [\n            null,\n            "Показать это меню"\n         ],\n         "Write in the third person": [\n            null,\n            "Вписать третьего человека"\n         ],\n         "Remove messages": [\n            null,\n            "Удалить сообщения"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            "Вы уверены, что хотите очистить сообщения из окна чата?"\n         ],\n         "has gone offline": [\n            null,\n            "вышел из сети"\n         ],\n         "is busy": [\n            null,\n            "занят"\n         ],\n         "Clear all messages": [\n            null,\n            "Очистить все сообщения"\n         ]\n      }\n   }\n}'}),define("text!th",[],function(){return'{\n   "domain": "converse",\n   "locale_data": {\n      "converse": {\n         "": {\n            "domain": "converse",\n            "plural_forms": "nplurals=2; plural=(n > 1);",\n            "lang": "th"\n         },\n         "Consult the guides": [\n            null,\n            "คำแนะนำ"\n         ],\n         "Write to us": [\n            null,\n            "เขียนถึงทีมงาน"\n         ],\n         "Chat with visitors": [\n            null,\n            "แชทกับผู้เข้าชม"\n         ],\n         "Ask a question": [\n            null,\n            "ถามคำถาม"\n         ],\n         "Make a suggestion": [\n            null,\n            "ข้อเสนอแนะ"\n         ],\n         "Review this App": [\n            null,\n            "รีวิวแอพ"\n         ],\n         "You did not install the Chat yet.": [\n            null,\n            "คุณยังไม่ได้เปิดใช้งานแชท"\n         ],\n         "You can activate the Chat editing the contact page of your website.": [\n            null,\n            "คุณสามารถเปิดใช้งานแชทได้ในหน้าติดต่อบนเว็บไซต์ของคุณ"\n         ],\n         "Publish your website to activate the Chat.": [\n            null,\n            "เผยแพร่เว็บไซต์ของคุณเพื่อเปิดใช้งานแชท"\n         ],\n         "You have not received any message yet.": [\n            null,\n            "คุณยังไม่ได้รับข้อความใดๆ"\n         ],\n         "You can test the contact page on your published site.": [\n            null,\n            "โดยคุณสามารถทดสอบส่งข้อความได้จากหน้าติดต่อบนเว็บไซต์ที่เผยแพร่แล้วของคุณ"\n         ],\n         "Communication error. Please check your internet connection.": [\n            null,\n            "เกิดข้อผิดพลาดในการเชื่อมต่อ กรุณาตรวจสอบการเชื่อมต่ออินเทอร์เน็ตของคุณ"\n         ],\n         "Messages are kept for 30 days.": [\n            null,\n            "ข้อความจะถูกเก็บไว้เป็นเวลา 30 วัน"\n         ],\n         "A welcome sentence or a name": [\n            null,\n            "ข้อความต้อนรับหรือชื่อ"\n         ],\n         "I am visible online": [\n            null,\n            "กำลังออนไลน์"\n         ],\n         "Notifications": [\n            null,\n            "การแจ้งเตือน"\n         ],\n         "A visitor wants to chat": [\n            null,\n            "ผู้เข้าชมต้องการแชทกับคุณ"\n         ],\n         "Chat": [\n            null,\n            "แชท"\n         ],\n         "This person is not online anymore.": [\n            null,\n            "บุคคลนี้ไม่ได้ออนไลน์ในขณะนี้"\n         ],\n         "Your screen name will show as": [\n            null,\n            "ชื่อที่จะแสดงให้ผู้ติดต่อเห็น"\n         ],\n         "You can answer the messages of your readers with the SimDif app.": [\n            null,\n            "คุณสามารถตอบกลับข้อความของผู้เข้าชมเว็บไซต์ของคุณได้จาก SimDif แอพพลิเคชัน"\n         ],\n         "Please publish this site again for the changes to take effect.": [\n            null,\n            "กรุณาเผยแพร่เว็บไซต์นี้อีกครั้งเพื่อให้การเปลี่ยนแปลงมีผล"\n         ],\n         "Chat with us": [\n            null,\n            "แชท"\n         ],\n         "Email us": [\n            null,\n            "อีเมล์"\n         ],\n         "What is your name?": [\n            null,\n            "คุณชื่ออะไร?"\n         ],\n         "Your name": [\n            null,\n            "ชื่อของคุณ"\n         ],\n         "Please ask your question": [\n            null,\n            "กรุณาถามคำถามของคุณ"\n         ],\n         "Your text": [\n            null,\n            "ข้อความของคุณ"\n         ],\n         "Let\'s chat": [\n            null,\n            "มาแชทกันเถอะ!!"\n         ],\n         "I am not available right now for a Chat.": [\n            null,\n            "ขออภัย  ยังไม่สามารถตอบแชทคุณได้ในขณะนี้"\n         ],\n         "Please use the form above to send me an email. I will get back to you rapidly.": [\n            null,\n            "คุณสามารถส่งข้อความได้ทางแบบฟอร์มอีเมล์ เราจะทำการตอบกลับให้เร็วที่สุด"\n         ],\n         "Your message": [\n            null,\n            "ข้อความของคุณ"\n         ],\n         "Please check the box": [\n            null,\n            "กรุณาทำเครื่องหมายในช่องว่าง"\n         ],\n         "Verification": [\n            null,\n            "ยืนยันตัวตน"\n         ],\n         "me": [\n            null,\n            "ฉัน"\n         ],\n         "A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened.": [\n            null,\n            "ได้รับข้อความขนาดใหญ่มาก ซึ่งเป็นไปได้ว่าเป็นการโจมตีเพื่อป้องกันปัญหา ข้อความจะถูกทำให้สั้นลง"\n         ],\n         "Typing from another device": [\n            null,\n            "กำลังพิมพ์ จากอุปกรณ์อื่น"\n         ],\n         "is typing": [\n            null,\n            "กำลังพิมพ์"\n         ],\n         "Stopped typing on the other device": [\n            null,\n            "หยุดพิมพ์ จากอุปกรณ์อื่น"\n         ],\n         "has stopped typing": [\n            null,\n            "หยุดพิมพ์"\n         ],\n         "has gone away": [\n            null,\n            "ไม่อยู่"\n         ],\n         "Show this menu": [\n            null,\n            "แสดงเมนูนี้"\n         ],\n         "Write in the third person": [\n            null,\n            "เขียนข้อความจากบุคคลอื่น"\n         ],\n         "Remove messages": [\n            null,\n            "ลบข้อความ"\n         ],\n         "Are you sure you want to clear the messages from this chat box?": [\n            null,\n            "ต้องการลบข้อความจากกล่องนี้ ใช่หรือไม่?"\n         ],\n         "has gone offline": [\n            null,\n            "ออกไปแล้ว"\n         ],\n         "is busy": [\n            null,\n            "ยุ่งอยู่"\n         ],\n         "Clear all messages": [\n            null,\n            "ล้างข้อความทั้งหมด"\n         ]\n      }\n   }\n}'}),function(e,t){define("locales",["jed","text!de","text!es","text!fr","text!id","text!it","text!ja","text!nl","text!pt","text!ru","text!th"],function(t,n){return e.locales={en:{},de:arguments[1],es:arguments[2],fr:arguments[3],id:arguments[4],it:arguments[5],ja:arguments[6],nl:arguments[7],pt:arguments[8],ru:arguments[9],th:arguments[10]},e.locales})}(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment/moment",t):e.moment=t()}(this,function(){"use strict";function e(){return yi.apply(null,arguments)}function t(e){yi=e}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){var t;for(t in e)return!1;return!0}function o(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,n,i){return vt(e,t,n,i,!0).utc()}function h(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(e){return null==e._pf&&(e._pf=h()),e._pf}function p(e){if(null==e._isValid){var t=f(e),n=wi.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=d(NaN);return null!=e?c(f(t),e):f(t).userInvalidated=!0,t}function _(e,t){var n,i,r;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),xi.length>0)for(n=0;n<xi.length;n++)i=xi[n],r=t[i],o(r)||(e[i]=r);return e}function g(t){_(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Si===!1&&(Si=!0,e.updateOffset(this),Si=!1)}function v(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function b(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=y(t)),n}function w(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&b(e[i])!==b(t[i]))&&s++;return s+o}function x(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,n){var i=!0;return c(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),i){for(var r,o=[],s=0;s<arguments.length;s++){if(r="","object"==typeof arguments[s]){r+="\n["+s+"] ";for(var a in arguments[0])r+=a+": "+arguments[0][a]+", ";r=r.slice(0,-2)}else r=arguments[s];o.push(r)}x(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),i=!1}return n.apply(this,arguments)},n)}function C(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),Ci[t]||(x(n),Ci[t]=!0)}function k(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function A(e){var t,n;for(n in e)t=e[n],k(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function T(e,t){var n,r=c({},e);for(n in t)l(t,n)&&(i(e[n])&&i(t[n])?(r[n]={},c(r[n],e[n]),c(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)l(e,n)&&!l(t,n)&&i(e[n])&&(r[n]=c({},r[n]));return r}function M(e){null!=e&&this.set(e)}function N(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return k(i)?i.call(t,n):i}function E(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function j(){return this._invalidDate}function D(e){return this._ordinal.replace("%d",e)}function R(e,t,n,i){var r=this._relativeTime[n];return k(r)?r(e,t,n,i):r.replace(/%d/i,e)}function L(e,t){var n=this._relativeTime[e>0?"future":"past"];return k(n)?n(t):n.replace(/%s/i,t)}function O(e,t){var n=e.toLowerCase();Li[n]=Li[n+"s"]=Li[t]=e}function I(e){return"string"==typeof e?Li[e]||Li[e.toLowerCase()]:void 0}function F(e){var t,n,i={};for(n in e)l(e,n)&&(t=I(n),t&&(i[t]=e[n]));return i}function q(e,t){Oi[e]=t}function P(e){var t=[];for(var n in e)t.push({unit:n,priority:Oi[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function H(t,n){return function(i){return null!=i?(B(this,t,i),e.updateOffset(this,n),this):Y(this,t)}}function Y(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function B(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function $(e){return e=I(e),k(this[e])?this[e]():this}function U(e,t){if("object"==typeof e){e=F(e);for(var n=P(e),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit])}else if(e=I(e),k(this[e]))return this[e](t);return this}function W(e,t,n){var i=""+Math.abs(e),r=t-i.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function z(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(Pi[e]=r),t&&(Pi[t[0]]=function(){return W(r.apply(this,arguments),t[1],t[2])}),n&&(Pi[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function J(e){var t,n,i=e.match(Ii);for(t=0,n=i.length;t<n;t++)Pi[i[t]]?i[t]=Pi[i[t]]:i[t]=V(i[t]);return function(t){var r,o="";for(r=0;r<n;r++)o+=k(i[r])?i[r].call(t,e):i[r];return o}}function G(e,t){return e.isValid()?(t=X(t,e.localeData()),qi[t]=qi[t]||J(t),qi[t](e)):e.localeData().invalidDate()}function X(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Fi.lastIndex=0;i>=0&&Fi.test(e);)e=e.replace(Fi,n),Fi.lastIndex=0,i-=1;return e}function Q(e,t,n){ir[e]=k(t)?t:function(e,i){return e&&n?n:t}}function K(e,t){return l(ir,e)?ir[e](t._strict,t._locale):new RegExp(Z(e))}function Z(e){return ee(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}))}function ee(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function te(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),s(t)&&(i=function(e,n){n[t]=b(e)}),n=0;n<e.length;n++)rr[e[n]]=i}function ne(e,t){te(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function ie(e,t,n){null!=t&&l(rr,e)&&rr[e](t,n._a,n,e)}function re(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function oe(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||mr).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone}function se(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[mr.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ae(e,t,n){var i,r,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=d([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(r=pr.call(this._shortMonthsParse,s),r!==-1?r:null):(r=pr.call(this._longMonthsParse,s),r!==-1?r:null):"MMM"===t?(r=pr.call(this._shortMonthsParse,s),r!==-1?r:(r=pr.call(this._longMonthsParse,s),r!==-1?r:null)):(r=pr.call(this._longMonthsParse,s),r!==-1?r:(r=pr.call(this._shortMonthsParse,s),r!==-1?r:null))}function ue(e,t,n){var i,r,o;if(this._monthsParseExact)return ae.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=d([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function le(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=b(t);else if(t=e.localeData().monthsParse(t),!s(t))return e;return n=Math.min(e.date(),re(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ce(t){return null!=t?(le(this,t),e.updateOffset(this,!0),this):Y(this,"Month")}function de(){return re(this.year(),this.month())}function he(e){return this._monthsParseExact?(l(this,"_monthsRegex")||pe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=vr),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function fe(e){return this._monthsParseExact?(l(this,"_monthsRegex")||pe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=yr),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pe(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],o=[];for(t=0;t<12;t++)n=d([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),o.sort(e),t=0;t<12;t++)i[t]=ee(i[t]),r[t]=ee(r[t]);for(t=0;t<24;t++)o[t]=ee(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function me(e){return _e(e)?366:365}function _e(e){return e%4===0&&e%100!==0||e%400===0}function ge(){return _e(this.year())}function ve(e,t,n,i,r,o,s){var a=new Date(e,t,n,i,r,o,s);return e<100&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function ye(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function be(e,t,n){var i=7+t-n,r=(7+ye(e,0,i).getUTCDay()-t)%7;return-r+i-1}function we(e,t,n,i,r){var o,s,a=(7+n-i)%7,u=be(e,i,r),l=1+7*(t-1)+a+u;return l<=0?(o=e-1,s=me(o)+l):l>me(e)?(o=e+1,s=l-me(e)):(o=e,s=l),{year:o,dayOfYear:s}}function xe(e,t,n){var i,r,o=be(e.year(),t,n),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?(r=e.year()-1,i=s+Se(r,t,n)):s>Se(e.year(),t,n)?(i=s-Se(e.year(),t,n),r=e.year()+1):(r=e.year(),i=s),{week:i,year:r}}function Se(e,t,n){var i=be(e,t,n),r=be(e+1,t,n);return(me(e)-i+r)/7}function Ce(e){return xe(e,this._week.dow,this._week.doy).week}function ke(){return this._week.dow}function Ae(){return this._week.doy}function Te(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Me(e){var t=xe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ne(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ee(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function je(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone}function De(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Re(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Le(e,t,n){var i,r,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=d([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(r=pr.call(this._weekdaysParse,s),r!==-1?r:null):"ddd"===t?(r=pr.call(this._shortWeekdaysParse,s),r!==-1?r:null):(r=pr.call(this._minWeekdaysParse,s),r!==-1?r:null):"dddd"===t?(r=pr.call(this._weekdaysParse,s),r!==-1?r:(r=pr.call(this._shortWeekdaysParse,s),r!==-1?r:(r=pr.call(this._minWeekdaysParse,s),r!==-1?r:null))):"ddd"===t?(r=pr.call(this._shortWeekdaysParse,s),r!==-1?r:(r=pr.call(this._weekdaysParse,s),r!==-1?r:(r=pr.call(this._minWeekdaysParse,s),r!==-1?r:null))):(r=pr.call(this._minWeekdaysParse,s),r!==-1?r:(r=pr.call(this._weekdaysParse,s),r!==-1?r:(r=pr.call(this._shortWeekdaysParse,s),r!==-1?r:null)))}function Oe(e,t,n){var i,r,o;if(this._weekdaysParseExact)return Le.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=d([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Ie(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ne(e,this.localeData()),this.add(e-t,"d")):t}function Fe(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function qe(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ee(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Pe(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=kr),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function He(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ar),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ye(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Tr),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Be(){function e(e,t){return t.length-e.length}var t,n,i,r,o,s=[],a=[],u=[],l=[];for(t=0;t<7;t++)n=d([2e3,1]).day(t),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),o=this.weekdays(n,""),s.push(i),a.push(r),u.push(o),l.push(i),l.push(r),l.push(o);for(s.sort(e),a.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)a[t]=ee(a[t]),u[t]=ee(u[t]),l[t]=ee(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function $e(){return this.hours()%12||12}function Ue(){return this.hours()||24}function We(e,t){z(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ze(e,t){return t._meridiemParse}function Ve(e){return"p"===(e+"").toLowerCase().charAt(0)}function Je(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ge(e){return e?e.toLowerCase().replace("_","-"):e}function Xe(e){for(var t,n,i,r,o=0;o<e.length;){for(r=Ge(e[o]).split("-"),t=r.length,n=Ge(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=Qe(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&w(r,n,!0)>=t-1)break;t--}o++}return null}function Qe(e){var t=null;if(!Dr[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Mr._abbr,require("./locale/"+e),Ke(t)}catch(e){}return Dr[e]}function Ke(e,t){var n;return e&&(n=o(t)?tt(e):Ze(e,t),n&&(Mr=n)),Mr._abbr}function Ze(e,t){if(null!==t){var n=jr;if(t.abbr=e,null!=Dr[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Dr[e]._config;else if(null!=t.parentLocale){if(null==Dr[t.parentLocale])return Rr[t.parentLocale]||(Rr[t.parentLocale]=[]),Rr[t.parentLocale].push({name:e,config:t}),null;n=Dr[t.parentLocale]._config}return Dr[e]=new M(T(n,t)),Rr[e]&&Rr[e].forEach(function(e){Ze(e.name,e.config)}),Ke(e),Dr[e]}return delete Dr[e],null}function et(e,t){if(null!=t){var n,i=jr;null!=Dr[e]&&(i=Dr[e]._config),t=T(i,t),n=new M(t),n.parentLocale=Dr[e],Dr[e]=n,Ke(e)}else null!=Dr[e]&&(null!=Dr[e].parentLocale?Dr[e]=Dr[e].parentLocale:null!=Dr[e]&&delete Dr[e]);return Dr[e]}function tt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Mr;if(!n(e)){if(t=Qe(e))return t;e=[e]}return Xe(e)}function nt(){return Ti(Dr)}function it(e){var t,n=e._a;return n&&f(e).overflow===-2&&(t=n[sr]<0||n[sr]>11?sr:n[ar]<1||n[ar]>re(n[or],n[sr])?ar:n[ur]<0||n[ur]>24||24===n[ur]&&(0!==n[lr]||0!==n[cr]||0!==n[dr])?ur:n[lr]<0||n[lr]>59?lr:n[cr]<0||n[cr]>59?cr:n[dr]<0||n[dr]>999?dr:-1,f(e)._overflowDayOfYear&&(t<or||t>ar)&&(t=ar),f(e)._overflowWeeks&&t===-1&&(t=hr),f(e)._overflowWeekday&&t===-1&&(t=fr),f(e).overflow=t),e}function rt(e){var t,n,i,r,o,s,a=e._i,u=Lr.exec(a)||Or.exec(a);if(u){for(f(e).iso=!0,t=0,n=Fr.length;t<n;t++)if(Fr[t][1].exec(u[1])){r=Fr[t][0],i=Fr[t][2]!==!1;break}if(null==r)return void(e._isValid=!1);if(u[3]){for(t=0,n=qr.length;t<n;t++)if(qr[t][1].exec(u[3])){o=(u[2]||" ")+qr[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(u[4]){if(!Ir.exec(u[4]))return void(e._isValid=!1);s="Z"}e._f=r+(o||"")+(s||""),dt(e)}else e._isValid=!1}function ot(e){var t,n,i,r,o,s,a,u,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},c="YXWVUTSRQPONZABCDEFGHIKLM";if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=Hr.exec(t)){if(i=n[1]?"ddd"+(5===n[1].length?", ":" "):"",r="D MMM "+(n[2].length>10?"YYYY ":"YY "),o="HH:mm"+(n[4]?":ss":""),n[1]){var d=new Date(n[2]),h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()];if(n[1].substr(0,3)!==h)return f(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:0===u?a=" +0000":(u=c.indexOf(n[5][1].toUpperCase())-12,a=(u<0?" -":" +")+(""+u).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:a=l[n[5]];break;default:a=l[" GMT"]}n[5]=a,e._i=n.splice(1).join(""),s=" ZZ",e._f=i+r+o+s,dt(e),f(e).rfc2822=!0}else e._isValid=!1}function st(t){var n=Pr.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(rt(t),void(t._isValid===!1&&(delete t._isValid,ot(t),t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t)))))}function at(e,t,n){return null!=e?e:null!=t?t:n;
}function ut(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function lt(e){var t,n,i,r,o=[];if(!e._d){for(i=ut(e),e._w&&null==e._a[ar]&&null==e._a[sr]&&ct(e),null!=e._dayOfYear&&(r=at(e._a[or],i[or]),(e._dayOfYear>me(r)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),n=ye(r,0,e._dayOfYear),e._a[sr]=n.getUTCMonth(),e._a[ar]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ur]&&0===e._a[lr]&&0===e._a[cr]&&0===e._a[dr]&&(e._nextDay=!0,e._a[ur]=0),e._d=(e._useUTC?ye:ve).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ur]=24)}}function ct(e){var t,n,i,r,o,s,a,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,s=4,n=at(t.GG,e._a[or],xe(yt(),1,4).year),i=at(t.W,1),r=at(t.E,1),(r<1||r>7)&&(u=!0);else{o=e._locale._week.dow,s=e._locale._week.doy;var l=xe(yt(),o,s);n=at(t.gg,e._a[or],l.year),i=at(t.w,l.week),null!=t.d?(r=t.d,(r<0||r>6)&&(u=!0)):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(u=!0)):r=o}i<1||i>Se(n,o,s)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(a=we(n,i,r,o,s),e._a[or]=a.year,e._dayOfYear=a.dayOfYear)}function dt(t){if(t._f===e.ISO_8601)return void rt(t);if(t._f===e.RFC_2822)return void ot(t);t._a=[],f(t).empty=!0;var n,i,r,o,s,a=""+t._i,u=a.length,l=0;for(r=X(t._f,t._locale).match(Ii)||[],n=0;n<r.length;n++)o=r[n],i=(a.match(K(o,t))||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&f(t).unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),l+=i.length),Pi[o]?(i?f(t).empty=!1:f(t).unusedTokens.push(o),ie(o,i,t)):t._strict&&!i&&f(t).unusedTokens.push(o);f(t).charsLeftOver=u-l,a.length>0&&f(t).unusedInput.push(a),t._a[ur]<=12&&f(t).bigHour===!0&&t._a[ur]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[ur]=ht(t._locale,t._a[ur],t._meridiem),lt(t),it(t)}function ht(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function ft(e){var t,n,i,r,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],dt(t),p(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==i||o<i)&&(i=o,n=t));c(e,n||t)}function pt(e){if(!e._d){var t=F(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lt(e)}}function mt(e){var t=new g(it(_t(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function _t(e){var t=e._i,i=e._f;return e._locale=e._locale||tt(e._l),null===t||void 0===i&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),v(t)?new g(it(t)):(a(t)?e._d=t:n(i)?ft(e):i?dt(e):gt(e),p(e)||(e._d=null),e))}function gt(t){var r=t._i;o(r)?t._d=new Date(e.now()):a(r)?t._d=new Date(r.valueOf()):"string"==typeof r?st(t):n(r)?(t._a=u(r.slice(0),function(e){return parseInt(e,10)}),lt(t)):i(r)?pt(t):s(r)?t._d=new Date(r):e.createFromInputFallback(t)}function vt(e,t,o,s,a){var u={};return o!==!0&&o!==!1||(s=o,o=void 0),(i(e)&&r(e)||n(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=o,u._i=e,u._f=t,u._strict=s,mt(u)}function yt(e,t,n,i){return vt(e,t,n,i,!1)}function bt(e,t){var i,r;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return yt();for(i=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](i)||(i=t[r]);return i}function wt(){var e=[].slice.call(arguments,0);return bt("isBefore",e)}function xt(){var e=[].slice.call(arguments,0);return bt("isAfter",e)}function St(e){for(var t in e)if(Ur.indexOf(t)===-1||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<Ur.length;++i)if(e[Ur[i]]){if(n)return!1;parseFloat(e[Ur[i]])!==b(e[Ur[i]])&&(n=!0)}return!0}function Ct(){return this._isValid}function kt(){return Ut(NaN)}function At(e){var t=F(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||0,s=t.day||0,a=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=St(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=tt(),this._bubble()}function Tt(e){return e instanceof At}function Mt(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Nt(e,t){z(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+W(~~(e/60),2)+t+W(~~e%60,2)})}function Et(e,t){var n=(t||"").match(e);if(null===n)return null;var i=n[n.length-1]||[],r=(i+"").match(Wr)||["-",0,0],o=+(60*r[1])+b(r[2]);return 0===o?0:"+"===r[0]?o:-o}function jt(t,n){var i,r;return n._isUTC?(i=n.clone(),r=(v(t)||a(t)?t.valueOf():yt(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+r),e.updateOffset(i,!1),i):yt(t).local()}function Dt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Rt(t,n,i){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(t=Et(er,t),null===t)return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&n&&(r=Dt(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!n||this._changeInProgress?Gt(this,Ut(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Dt(this)}function Lt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ot(e){return this.utcOffset(0,e)}function It(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Dt(this),"m")),this}function Ft(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Et(Zi,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function qt(e){return!!this.isValid()&&(e=e?yt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Pt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ht(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(_(e,this),e=_t(e),e._a){var t=e._isUTC?d(e._a):yt(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Yt(){return!!this.isValid()&&!this._isUTC}function Bt(){return!!this.isValid()&&this._isUTC}function $t(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ut(e,t){var n,i,r,o=e,a=null;return Tt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(o={},t?o[t]=e:o.milliseconds=e):(a=zr.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:b(a[ar])*n,h:b(a[ur])*n,m:b(a[lr])*n,s:b(a[cr])*n,ms:b(Mt(1e3*a[dr]))*n}):(a=Vr.exec(e))?(n="-"===a[1]?-1:1,o={y:Wt(a[2],n),M:Wt(a[3],n),w:Wt(a[4],n),d:Wt(a[5],n),h:Wt(a[6],n),m:Wt(a[7],n),s:Wt(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Vt(yt(o.from),yt(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new At(o),Tt(e)&&l(e,"_locale")&&(i._locale=e._locale),i}function Wt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function zt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Vt(e,t){var n;return e.isValid()&&t.isValid()?(t=jt(t,e),e.isBefore(t)?n=zt(e,t):(n=zt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Jt(e,t){return function(n,i){var r,o;return null===i||isNaN(+i)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=Ut(n,i),Gt(this,r,e),this}}function Gt(t,n,i,r){var o=n._milliseconds,s=Mt(n._days),a=Mt(n._months);t.isValid()&&(r=null==r||r,o&&t._d.setTime(t._d.valueOf()+o*i),s&&B(t,"Date",Y(t,"Date")+s*i),a&&le(t,Y(t,"Month")+a*i),r&&e.updateOffset(t,s||a))}function Xt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Qt(t,n){var i=t||yt(),r=jt(i,this).startOf("day"),o=e.calendarFormat(this,r)||"sameElse",s=n&&(k(n[o])?n[o].call(this,i):n[o]);return this.format(s||this.localeData().calendar(o,this,yt(i)))}function Kt(){return new g(this)}function Zt(e,t){var n=v(e)?e:yt(e);return!(!this.isValid()||!n.isValid())&&(t=I(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function en(e,t){var n=v(e)?e:yt(e);return!(!this.isValid()||!n.isValid())&&(t=I(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function tn(e,t,n,i){return i=i||"()",("("===i[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))}function nn(e,t){var n,i=v(e)?e:yt(e);return!(!this.isValid()||!i.isValid())&&(t=I(t||"millisecond"),"millisecond"===t?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function rn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function on(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sn(e,t,n){var i,r,o,s;return this.isValid()?(i=jt(e,this),i.isValid()?(r=6e4*(i.utcOffset()-this.utcOffset()),t=I(t),"year"===t||"month"===t||"quarter"===t?(s=an(this,i),"quarter"===t?s/=3:"year"===t&&(s/=12)):(o=this-i,s="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-r)/864e5:"week"===t?(o-r)/6048e5:o),n?s:y(s)):NaN):NaN}function an(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(r,"months");return t-o<0?(n=e.clone().add(r-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(r+1,"months"),i=(t-o)/(n-o)),-(r+i)||0}function un(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ln(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?G(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):k(Date.prototype.toISOString)?this.toDate().toISOString():G(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function cn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]';return this.format(n+i+r+o)}function dn(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=G(this,t);return this.localeData().postformat(n)}function hn(e,t){return this.isValid()&&(v(e)&&e.isValid()||yt(e).isValid())?Ut({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fn(e){return this.from(yt(),e)}function pn(e,t){return this.isValid()&&(v(e)&&e.isValid()||yt(e).isValid())?Ut({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mn(e){return this.to(yt(),e)}function _n(e){var t;return void 0===e?this._locale._abbr:(t=tt(e),null!=t&&(this._locale=t),this)}function gn(){return this._locale}function vn(e){switch(e=I(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function yn(e){return e=I(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function bn(){return this._d.valueOf()-6e4*(this._offset||0)}function wn(){return Math.floor(this.valueOf()/1e3)}function xn(){return new Date(this.valueOf())}function Sn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Cn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function kn(){return this.isValid()?this.toISOString():null}function An(){return p(this)}function Tn(){return c({},f(this))}function Mn(){return f(this).overflow}function Nn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function En(e,t){z(0,[e,e.length],0,t)}function jn(e){return On.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Dn(e){return On.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Rn(){return Se(this.year(),1,4)}function Ln(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)}function On(e,t,n,i,r){var o;return null==e?xe(this,i,r).year:(o=Se(e,i,r),t>o&&(t=o),In.call(this,e,t,n,i,r))}function In(e,t,n,i,r){var o=we(e,t,n,i,r),s=ye(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Fn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function qn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Pn(e,t){t[dr]=b(1e3*("0."+e))}function Hn(){return this._isUTC?"UTC":""}function Yn(){return this._isUTC?"Coordinated Universal Time":""}function Bn(e){return yt(1e3*e)}function $n(){return yt.apply(null,arguments).parseZone()}function Un(e){return e}function Wn(e,t,n,i){var r=tt(),o=d().set(i,t);return r[n](o,e)}function zn(e,t,n){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return Wn(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=Wn(e,i,n,"month");return r}function Vn(e,t,n,i){"boolean"==typeof e?(s(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,s(t)&&(n=t,t=void 0),t=t||"");var r=tt(),o=e?r._week.dow:0;if(null!=n)return Wn(t,(n+o)%7,i,"day");var a,u=[];for(a=0;a<7;a++)u[a]=Wn(t,(a+o)%7,i,"day");return u}function Jn(e,t){return zn(e,t,"months")}function Gn(e,t){return zn(e,t,"monthsShort")}function Xn(e,t,n){return Vn(e,t,n,"weekdays")}function Qn(e,t,n){return Vn(e,t,n,"weekdaysShort")}function Kn(e,t,n){return Vn(e,t,n,"weekdaysMin")}function Zn(){var e=this._data;return this._milliseconds=ro(this._milliseconds),this._days=ro(this._days),this._months=ro(this._months),e.milliseconds=ro(e.milliseconds),e.seconds=ro(e.seconds),e.minutes=ro(e.minutes),e.hours=ro(e.hours),e.months=ro(e.months),e.years=ro(e.years),this}function ei(e,t,n,i){var r=Ut(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function ti(e,t){return ei(this,e,t,1)}function ni(e,t){return ei(this,e,t,-1)}function ii(e){return e<0?Math.floor(e):Math.ceil(e)}function ri(){var e,t,n,i,r,o=this._milliseconds,s=this._days,a=this._months,u=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*ii(si(a)+s),s=0,a=0),u.milliseconds=o%1e3,e=y(o/1e3),u.seconds=e%60,t=y(e/60),u.minutes=t%60,n=y(t/60),u.hours=n%24,s+=y(n/24),r=y(oi(s)),a+=r,s-=ii(si(r)),i=y(a/12),a%=12,u.days=s,u.months=a,u.years=i,this}function oi(e){return 4800*e/146097}function si(e){return 146097*e/4800}function ai(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if(e=I(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+oi(t),"month"===e?n:n/12;switch(t=this._days+Math.round(si(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function ui(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN}function li(e){return function(){return this.as(e)}}function ci(e){return e=I(e),this.isValid()?this[e+"s"]():NaN}function di(e){return function(){return this.isValid()?this._data[e]:NaN}}function hi(){return y(this.days()/7)}function fi(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function pi(e,t,n){var i=Ut(e).abs(),r=wo(i.as("s")),o=wo(i.as("m")),s=wo(i.as("h")),a=wo(i.as("d")),u=wo(i.as("M")),l=wo(i.as("y")),c=r<=xo.ss&&["s",r]||r<xo.s&&["ss",r]||o<=1&&["m"]||o<xo.m&&["mm",o]||s<=1&&["h"]||s<xo.h&&["hh",s]||a<=1&&["d"]||a<xo.d&&["dd",a]||u<=1&&["M"]||u<xo.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,fi.apply(null,c)}function mi(e){return void 0===e?wo:"function"==typeof e&&(wo=e,!0)}function _i(e,t){return void 0!==xo[e]&&(void 0===t?xo[e]:(xo[e]=t,"s"===e&&(xo.ss=t-1),!0))}function gi(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=pi(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function vi(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i=So(this._milliseconds)/1e3,r=So(this._days),o=So(this._months);e=y(i/60),t=y(e/60),i%=60,e%=60,n=y(o/12),o%=12;var s=n,a=o,u=r,l=t,c=e,d=i,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(l||c||d?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var yi,bi;bi=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var wi=bi,xi=e.momentProperties=[],Si=!1,Ci={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var ki;ki=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Ai,Ti=ki,Mi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ni={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ei="Invalid date",ji="%d",Di=/\d{1,2}/,Ri={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Li={},Oi={},Ii=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Fi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,qi={},Pi={},Hi=/\d/,Yi=/\d\d/,Bi=/\d{3}/,$i=/\d{4}/,Ui=/[+-]?\d{6}/,Wi=/\d\d?/,zi=/\d\d\d\d?/,Vi=/\d\d\d\d\d\d?/,Ji=/\d{1,3}/,Gi=/\d{1,4}/,Xi=/[+-]?\d{1,6}/,Qi=/\d+/,Ki=/[+-]?\d+/,Zi=/Z|[+-]\d\d:?\d\d/gi,er=/Z|[+-]\d\d(?::?\d\d)?/gi,tr=/[+-]?\d+(\.\d{1,3})?/,nr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ir={},rr={},or=0,sr=1,ar=2,ur=3,lr=4,cr=5,dr=6,hr=7,fr=8;Ai=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var pr=Ai;z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),z("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("month","M"),q("month",8),Q("M",Wi),Q("MM",Wi,Yi),Q("MMM",function(e,t){return t.monthsShortRegex(e)}),Q("MMMM",function(e,t){return t.monthsRegex(e)}),te(["M","MM"],function(e,t){t[sr]=b(e)-1}),te(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[sr]=r:f(n).invalidMonth=e});var mr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,_r="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),gr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),vr=nr,yr=nr;z("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),O("year","y"),q("year",1),Q("Y",Ki),Q("YY",Wi,Yi),Q("YYYY",Gi,$i),Q("YYYYY",Xi,Ui),Q("YYYYYY",Xi,Ui),te(["YYYYY","YYYYYY"],or),te("YYYY",function(t,n){n[or]=2===t.length?e.parseTwoDigitYear(t):b(t)}),te("YY",function(t,n){n[or]=e.parseTwoDigitYear(t)}),te("Y",function(e,t){t[or]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)};var br=H("FullYear",!0);z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),O("week","w"),O("isoWeek","W"),q("week",5),q("isoWeek",5),Q("w",Wi),Q("ww",Wi,Yi),Q("W",Wi),Q("WW",Wi,Yi),ne(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=b(e)});var wr={dow:0,doy:6};z("d",0,"do","day"),z("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),z("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),z("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),O("day","d"),O("weekday","e"),O("isoWeekday","E"),q("day",11),q("weekday",11),q("isoWeekday",11),Q("d",Wi),Q("e",Wi),Q("E",Wi),Q("dd",function(e,t){return t.weekdaysMinRegex(e)}),Q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Q("dddd",function(e,t){return t.weekdaysRegex(e)}),ne(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:f(n).invalidWeekday=e}),ne(["d","e","E"],function(e,t,n,i){t[i]=b(e)});var xr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Sr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Cr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),kr=nr,Ar=nr,Tr=nr;z("H",["HH",2],0,"hour"),z("h",["hh",2],0,$e),z("k",["kk",2],0,Ue),z("hmm",0,0,function(){return""+$e.apply(this)+W(this.minutes(),2)}),z("hmmss",0,0,function(){return""+$e.apply(this)+W(this.minutes(),2)+W(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+W(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+W(this.minutes(),2)+W(this.seconds(),2)}),We("a",!0),We("A",!1),O("hour","h"),q("hour",13),Q("a",ze),Q("A",ze),Q("H",Wi),Q("h",Wi),Q("k",Wi),Q("HH",Wi,Yi),Q("hh",Wi,Yi),Q("kk",Wi,Yi),Q("hmm",zi),Q("hmmss",Vi),Q("Hmm",zi),Q("Hmmss",Vi),te(["H","HH"],ur),te(["k","kk"],function(e,t,n){var i=b(e);t[ur]=24===i?0:i}),te(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),te(["h","hh"],function(e,t,n){t[ur]=b(e),f(n).bigHour=!0}),te("hmm",function(e,t,n){var i=e.length-2;t[ur]=b(e.substr(0,i)),t[lr]=b(e.substr(i)),f(n).bigHour=!0}),te("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[ur]=b(e.substr(0,i)),t[lr]=b(e.substr(i,2)),t[cr]=b(e.substr(r)),f(n).bigHour=!0}),te("Hmm",function(e,t,n){var i=e.length-2;t[ur]=b(e.substr(0,i)),t[lr]=b(e.substr(i))}),te("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[ur]=b(e.substr(0,i)),t[lr]=b(e.substr(i,2)),t[cr]=b(e.substr(r))});var Mr,Nr=/[ap]\.?m?\.?/i,Er=H("Hours",!0),jr={calendar:Mi,longDateFormat:Ni,invalidDate:Ei,ordinal:ji,dayOfMonthOrdinalParse:Di,relativeTime:Ri,months:_r,monthsShort:gr,week:wr,weekdays:xr,weekdaysMin:Cr,weekdaysShort:Sr,meridiemParse:Nr},Dr={},Rr={},Lr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Or=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ir=/Z|[+-]\d\d(?::?\d\d)?/,Fr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],qr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Pr=/^\/?Date\((\-?\d+)/i,Hr=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;e.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var Yr=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=yt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),Br=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=yt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}),$r=function(){return Date.now?Date.now():+new Date},Ur=["year","quarter","month","week","day","hour","minute","second","millisecond"];Nt("Z",":"),Nt("ZZ",""),Q("Z",er),Q("ZZ",er),te(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Et(er,e)});var Wr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var zr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Vr=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ut.fn=At.prototype,Ut.invalid=kt;var Jr=Jt(1,"add"),Gr=Jt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xr=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),En("gggg","weekYear"),En("ggggg","weekYear"),En("GGGG","isoWeekYear"),En("GGGGG","isoWeekYear"),O("weekYear","gg"),O("isoWeekYear","GG"),q("weekYear",1),q("isoWeekYear",1),Q("G",Ki),Q("g",Ki),Q("GG",Wi,Yi),Q("gg",Wi,Yi),Q("GGGG",Gi,$i),Q("gggg",Gi,$i),Q("GGGGG",Xi,Ui),Q("ggggg",Xi,Ui),ne(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=b(e)}),ne(["gg","GG"],function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)}),z("Q",0,"Qo","quarter"),O("quarter","Q"),q("quarter",7),Q("Q",Hi),te("Q",function(e,t){t[sr]=3*(b(e)-1)}),z("D",["DD",2],"Do","date"),O("date","D"),q("date",9),Q("D",Wi),Q("DD",Wi,Yi),Q("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),te(["D","DD"],ar),te("Do",function(e,t){t[ar]=b(e.match(Wi)[0],10)});var Qr=H("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),O("dayOfYear","DDD"),q("dayOfYear",4),Q("DDD",Ji),Q("DDDD",Bi),te(["DDD","DDDD"],function(e,t,n){n._dayOfYear=b(e)}),z("m",["mm",2],0,"minute"),O("minute","m"),q("minute",14),Q("m",Wi),Q("mm",Wi,Yi),te(["m","mm"],lr);var Kr=H("Minutes",!1);z("s",["ss",2],0,"second"),O("second","s"),q("second",15),Q("s",Wi),Q("ss",Wi,Yi),te(["s","ss"],cr);var Zr=H("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),O("millisecond","ms"),q("millisecond",16),Q("S",Ji,Hi),Q("SS",Ji,Yi),Q("SSS",Ji,Bi);var eo;for(eo="SSSS";eo.length<=9;eo+="S")Q(eo,Qi);for(eo="S";eo.length<=9;eo+="S")te(eo,Pn);var to=H("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var no=g.prototype;no.add=Jr,no.calendar=Qt,no.clone=Kt,no.diff=sn,no.endOf=yn,no.format=dn,no.from=hn,no.fromNow=fn,no.to=pn,no.toNow=mn,no.get=$,no.invalidAt=Mn,no.isAfter=Zt,no.isBefore=en,no.isBetween=tn,no.isSame=nn,no.isSameOrAfter=rn,no.isSameOrBefore=on,no.isValid=An,no.lang=Xr,no.locale=_n,no.localeData=gn,no.max=Br,no.min=Yr,no.parsingFlags=Tn,no.set=U,no.startOf=vn,no.subtract=Gr,no.toArray=Sn,no.toObject=Cn,no.toDate=xn,no.toISOString=ln,no.inspect=cn,no.toJSON=kn,no.toString=un,no.unix=wn,no.valueOf=bn,no.creationData=Nn,no.year=br,no.isLeapYear=ge,no.weekYear=jn,no.isoWeekYear=Dn,no.quarter=no.quarters=Fn,no.month=ce,no.daysInMonth=de,no.week=no.weeks=Te,no.isoWeek=no.isoWeeks=Me,no.weeksInYear=Ln,no.isoWeeksInYear=Rn,no.date=Qr,no.day=no.days=Ie,no.weekday=Fe,no.isoWeekday=qe,no.dayOfYear=qn,no.hour=no.hours=Er,no.minute=no.minutes=Kr,no.second=no.seconds=Zr,no.millisecond=no.milliseconds=to,no.utcOffset=Rt,no.utc=Ot,no.local=It,no.parseZone=Ft,no.hasAlignedHourOffset=qt,no.isDST=Pt,no.isLocal=Yt,no.isUtcOffset=Bt,no.isUtc=$t,no.isUTC=$t,no.zoneAbbr=Hn,no.zoneName=Yn,no.dates=S("dates accessor is deprecated. Use date instead.",Qr),no.months=S("months accessor is deprecated. Use month instead",ce),no.years=S("years accessor is deprecated. Use year instead",br),no.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Lt),no.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ht);var io=M.prototype;io.calendar=N,io.longDateFormat=E,io.invalidDate=j,io.ordinal=D,io.preparse=Un,io.postformat=Un,io.relativeTime=R,io.pastFuture=L,io.set=A,io.months=oe,io.monthsShort=se,io.monthsParse=ue,io.monthsRegex=fe,io.monthsShortRegex=he,io.week=Ce,io.firstDayOfYear=Ae,io.firstDayOfWeek=ke,io.weekdays=je,io.weekdaysMin=Re,io.weekdaysShort=De,io.weekdaysParse=Oe,io.weekdaysRegex=Pe,io.weekdaysShortRegex=He,io.weekdaysMinRegex=Ye,io.isPM=Ve,io.meridiem=Je,Ke("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=S("moment.lang is deprecated. Use moment.locale instead.",Ke),e.langData=S("moment.langData is deprecated. Use moment.localeData instead.",tt);var ro=Math.abs,oo=li("ms"),so=li("s"),ao=li("m"),uo=li("h"),lo=li("d"),co=li("w"),ho=li("M"),fo=li("y"),po=di("milliseconds"),mo=di("seconds"),_o=di("minutes"),go=di("hours"),vo=di("days"),yo=di("months"),bo=di("years"),wo=Math.round,xo={ss:44,s:45,m:45,h:22,d:26,M:11},So=Math.abs,Co=At.prototype;return Co.isValid=Ct,Co.abs=Zn,Co.add=ti,Co.subtract=ni,Co.as=ai,Co.asMilliseconds=oo,Co.asSeconds=so,Co.asMinutes=ao,Co.asHours=uo,Co.asDays=lo,Co.asWeeks=co,Co.asMonths=ho,Co.asYears=fo,Co.valueOf=ui,Co._bubble=ri,Co.get=ci,Co.milliseconds=po,Co.seconds=mo,Co.minutes=_o,Co.hours=go,Co.days=vo,Co.weeks=hi,Co.months=yo,Co.years=bo,Co.humanize=gi,Co.toISOString=vi,Co.toString=vi,Co.toJSON=vi,Co.locale=_n,Co.localeData=gn,Co.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",vi),Co.lang=Xr,z("X",0,0,"unix"),z("x",0,0,"valueOf"),Q("x",Ki),Q("X",tr),te("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),te("x",function(e,t,n){n._d=new Date(b(e))}),e.version="2.18.1",t(yt),e.fn=no,e.min=wt,e.max=xt,e.now=$r,e.utc=d,e.unix=Bn,e.months=Jn,e.isDate=a,e.locale=Ke,e.invalid=m,e.duration=Ut,e.isMoment=v,e.weekdays=Xn,e.parseZone=$n,e.localeData=tt,e.isDuration=Tt,e.monthsShort=Gn,e.weekdaysMin=Kn,e.defineLocale=Ze,e.updateLocale=et,e.locales=nt,e.weekdaysShort=Qn,e.normalizeUnits=I,e.relativeTimeRounding=mi,e.relativeTimeThreshold=_i,e.calendarFormat=Xt,e.prototype=no,e}),define("moment",["moment/moment"],function(e){return e}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/de",["../moment"],t):t(e.moment)}(this,function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],
y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}var n=e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/es",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/fr",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t=e.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}});return t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/id",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t=e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});return t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/it",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t=e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/ja",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t=e.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 HH:mm dddd",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日 HH:mm dddd"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}});return t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/nl",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,o=e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}});return o}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/pt",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t=e.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/ru",["../moment"],t):t(e.moment)}(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){var r={mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===i?n?"минута":"минуту":e+" "+t(r[i],+e)}var i=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],r=e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:n,mm:n,h:"час",hh:n,d:"день",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:7}});return r}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/th",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t=e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}});return t}),function(e,t){define("moment_with_locales",["moment","moment/locale/de","moment/locale/es","moment/locale/fr","moment/locale/id","moment/locale/it","moment/locale/ja","moment/locale/nl","moment/locale/pt","moment/locale/ru","moment/locale/th"],function(e){return e})}(this),function(e,t){if("function"==typeof define&&define.amd)define("strophe",[],t);else{var n=t();e.Strophe=n.Strophe,e.$build=n.$build,e.$iq=n.$iq,e.$msg=n.$msg,e.$pres=n.$pres,e.SHA1=n.SHA1,e.MD5=n.MD5,e.b64_hmac_sha1=n.b64_hmac_sha1,e.b64_sha1=n.b64_sha1,e.str_hmac_sha1=n.str_hmac_sha1,e.str_sha1=n.str_sha1}}(this,function(){var e,t,n;return function(i){function r(e,t){return w.call(e,t)}function o(e,t){var n,i,r,o,s,a,u,l,c,d,h,f,p=t&&t.split("/"),m=y.map,_=m&&m["*"]||{};if(e){for(e=e.split("/"),s=e.length-1,y.nodeIdCompat&&S.test(e[s])&&(e[s]=e[s].replace(S,"")),"."===e[0].charAt(0)&&p&&(f=p.slice(0,p.length-1),e=f.concat(e)),c=0;c<e.length;c++)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(0===c||1===c&&".."===e[2]||".."===e[c-1])continue;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((p||_)&&m){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),p)for(d=p.length;d>0;d-=1)if(r=m[p.slice(0,d).join("/")],r&&(r=r[i])){o=r,a=c;break}if(o)break;!u&&_&&_[i]&&(u=_[i],l=c)}!o&&u&&(o=u,a=l),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function s(e,t){return function(){var n=x.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),p.apply(i,n.concat([e,t]))}}function a(e){return function(t){return o(t,e)}}function u(e){return function(t){g[e]=t}}function l(e){if(r(v,e)){var t=v[e];delete v[e],b[e]=!0,f.apply(i,t)}if(!r(g,e)&&!r(b,e))throw new Error("No "+e);return g[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(e){return e?c(e):[]}function h(e){return function(){return y&&y.config&&y.config[e]||{}}}var f,p,m,_,g={},v={},y={},b={},w=Object.prototype.hasOwnProperty,x=[].slice,S=/\.js$/;m=function(e,t){var n,i=c(e),r=i[0],s=t[1];return e=i[1],r&&(r=o(r,s),n=l(r)),r?e=n&&n.normalize?n.normalize(e,a(s)):o(e,s):(e=o(e,s),i=c(e),r=i[0],e=i[1],r&&(n=l(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},_={require:function(e){return s(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:h(e)}}},f=function(e,t,n,o){var a,c,h,f,p,y,w,x=[],S=typeof n;if(o=o||e,y=d(o),"undefined"===S||"function"===S){for(t=!t.length&&n.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(f=m(t[p],y),c=f.f,"require"===c)x[p]=_.require(e);else if("exports"===c)x[p]=_.exports(e),w=!0;else if("module"===c)a=x[p]=_.module(e);else if(r(g,c)||r(v,c)||r(b,c))x[p]=l(c);else{if(!f.p)throw new Error(e+" missing "+c);f.p.load(f.n,s(o,!0),u(c),{}),x[p]=g[c]}h=n?n.apply(g[e],x):void 0,e&&(a&&a.exports!==i&&a.exports!==g[e]?g[e]=a.exports:h===i&&w||(g[e]=h))}else e&&(g[e]=n)},e=t=p=function(e,t,n,r,o){if("string"==typeof e)return _[e]?_[e](t):l(m(e,d(t)).f);if(!e.splice){if(y=e,y.deps&&p(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=i}return t=t||function(){},"function"==typeof n&&(n=r,r=o),r?f(i,e,t,n):setTimeout(function(){f(i,e,t,n)},4),p},p.config=function(e){return p(e)},e._defined=g,n=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(g,e)||r(v,e)||(v[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("node_modules/almond/almond.js",function(){}),function(e,t){return"function"==typeof n&&n.amd?void n("strophe-polyfill",[],function(){return t(e)}):t(e)}(this,function(e){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,i=Array.prototype.concat,r=n.call(arguments,1);return function(){return t.apply(e?e:this,i.call(r,n.call(arguments,0)))}}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),o=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),i=0;i<o;){var s;i in r&&(s=r[i],e.call(n,s,i,r)),i++}});var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.btoa||(e.btoa=function(e){var n,i,r,o,s,a,u,l="",c=0;do n=e.charCodeAt(c++),i=e.charCodeAt(c++),r=e.charCodeAt(c++),o=n>>2,s=(3&n)<<4|i>>4,a=(15&i)<<2|r>>6,u=63&r,isNaN(i)?(s=(3&n)<<4,a=u=64):isNaN(r)&&(u=64),l=l+t.charAt(o)+t.charAt(s)+t.charAt(a)+t.charAt(u);while(c<e.length);return l}),e.atob||(e.atob=function(e){var n,i,r,o,s,a,u,l="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=t.indexOf(e.charAt(c++)),s=t.indexOf(e.charAt(c++)),a=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),n=o<<2|s>>4,i=(15&s)<<4|a>>2,r=(3&a)<<6|u,l+=String.fromCharCode(n),64!==a&&(l+=String.fromCharCode(i)),64!==u&&(l+=String.fromCharCode(r));while(c<e.length);return l})}),function(e,t){"function"==typeof n&&n.amd?n("strophe-sha1",[],function(){return t()}):e.SHA1=t()}(this,function(){function e(e,i){e[i>>5]|=128<<24-i%32,e[(i+64>>9<<4)+15]=i;var s,a,u,l,c,d,h,f,p=new Array(80),m=1732584193,_=-271733879,g=-1732584194,v=271733878,y=-1009589776;for(s=0;s<e.length;s+=16){for(l=m,c=_,d=g,h=v,f=y,a=0;a<80;a++)a<16?p[a]=e[s+a]:p[a]=o(p[a-3]^p[a-8]^p[a-14]^p[a-16],1),u=r(r(o(m,5),t(a,_,g,v)),r(r(y,p[a]),n(a))),y=v,v=g,g=o(_,30),_=m,m=u;m=r(m,l),_=r(_,c),g=r(g,d),v=r(v,h),y=r(y,f)}return[m,_,g,v,y]}function t(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function n(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function i(t,n){var i=s(t);i.length>16&&(i=e(i,8*t.length));for(var r=new Array(16),o=new Array(16),a=0;a<16;a++)r[a]=909522486^i[a],o[a]=1549556828^i[a];var u=e(r.concat(s(n)),512+8*n.length);return e(o.concat(u),672)}function r(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}function s(e){for(var t=[],n=255,i=0;i<8*e.length;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&n)<<24-i%32;return t}function a(e){for(var t="",n=255,i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>24-i%32&n);return t}function u(e){for(var t,n,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",o=0;o<4*e.length;o+=3)for(t=(e[o>>2]>>8*(3-o%4)&255)<<16|(e[o+1>>2]>>8*(3-(o+1)%4)&255)<<8|e[o+2>>2]>>8*(3-(o+2)%4)&255,n=0;n<4;n++)r+=8*o+6*n>32*e.length?"=":i.charAt(t>>6*(3-n)&63);return r}return{b64_hmac_sha1:function(e,t){return u(i(e,t))},b64_sha1:function(t){return u(e(s(t),8*t.length))},binb2str:a,core_hmac_sha1:i,str_hmac_sha1:function(e,t){return a(i(e,t))},str_sha1:function(t){return a(e(s(t),8*t.length))}}}),function(e,t){"function"==typeof n&&n.amd?n("strophe-md5",[],function(){return t()}):e.MD5=t()}(this,function(){var e=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},t=function(e,t){return e<<t|e>>>32-t},n=function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},i=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},r=function(e){for(var t="0123456789abcdef",n="",i=0;i<4*e.length;i++)n+=t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15);return n},o=function(n,i,r,o,s,a){return e(t(e(e(i,n),e(o,a)),s),r)},s=function(e,t,n,i,r,s,a){return o(t&n|~t&i,e,t,r,s,a)},a=function(e,t,n,i,r,s,a){return o(t&i|n&~i,e,t,r,s,a)},u=function(e,t,n,i,r,s,a){return o(t^n^i,e,t,r,s,a)},l=function(e,t,n,i,r,s,a){return o(n^(t|~i),e,t,r,s,a)},c=function(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;for(var i,r,o,c,d=1732584193,h=-271733879,f=-1732584194,p=271733878,m=0;m<t.length;m+=16)i=d,r=h,o=f,c=p,d=s(d,h,f,p,t[m+0],7,-680876936),p=s(p,d,h,f,t[m+1],12,-389564586),f=s(f,p,d,h,t[m+2],17,606105819),h=s(h,f,p,d,t[m+3],22,-1044525330),d=s(d,h,f,p,t[m+4],7,-176418897),p=s(p,d,h,f,t[m+5],12,1200080426),f=s(f,p,d,h,t[m+6],17,-1473231341),h=s(h,f,p,d,t[m+7],22,-45705983),d=s(d,h,f,p,t[m+8],7,1770035416),p=s(p,d,h,f,t[m+9],12,-1958414417),f=s(f,p,d,h,t[m+10],17,-42063),h=s(h,f,p,d,t[m+11],22,-1990404162),d=s(d,h,f,p,t[m+12],7,1804603682),p=s(p,d,h,f,t[m+13],12,-40341101),f=s(f,p,d,h,t[m+14],17,-1502002290),h=s(h,f,p,d,t[m+15],22,1236535329),d=a(d,h,f,p,t[m+1],5,-165796510),p=a(p,d,h,f,t[m+6],9,-1069501632),f=a(f,p,d,h,t[m+11],14,643717713),h=a(h,f,p,d,t[m+0],20,-373897302),d=a(d,h,f,p,t[m+5],5,-701558691),p=a(p,d,h,f,t[m+10],9,38016083),f=a(f,p,d,h,t[m+15],14,-660478335),h=a(h,f,p,d,t[m+4],20,-405537848),d=a(d,h,f,p,t[m+9],5,568446438),p=a(p,d,h,f,t[m+14],9,-1019803690),f=a(f,p,d,h,t[m+3],14,-187363961),h=a(h,f,p,d,t[m+8],20,1163531501),d=a(d,h,f,p,t[m+13],5,-1444681467),p=a(p,d,h,f,t[m+2],9,-51403784),f=a(f,p,d,h,t[m+7],14,1735328473),h=a(h,f,p,d,t[m+12],20,-1926607734),d=u(d,h,f,p,t[m+5],4,-378558),p=u(p,d,h,f,t[m+8],11,-2022574463),f=u(f,p,d,h,t[m+11],16,1839030562),h=u(h,f,p,d,t[m+14],23,-35309556),d=u(d,h,f,p,t[m+1],4,-1530992060),p=u(p,d,h,f,t[m+4],11,1272893353),f=u(f,p,d,h,t[m+7],16,-155497632),h=u(h,f,p,d,t[m+10],23,-1094730640),d=u(d,h,f,p,t[m+13],4,681279174),p=u(p,d,h,f,t[m+0],11,-358537222),f=u(f,p,d,h,t[m+3],16,-722521979),h=u(h,f,p,d,t[m+6],23,76029189),d=u(d,h,f,p,t[m+9],4,-640364487),p=u(p,d,h,f,t[m+12],11,-421815835),f=u(f,p,d,h,t[m+15],16,530742520),h=u(h,f,p,d,t[m+2],23,-995338651),d=l(d,h,f,p,t[m+0],6,-198630844),p=l(p,d,h,f,t[m+7],10,1126891415),f=l(f,p,d,h,t[m+14],15,-1416354905),h=l(h,f,p,d,t[m+5],21,-57434055),d=l(d,h,f,p,t[m+12],6,1700485571),p=l(p,d,h,f,t[m+3],10,-1894986606),f=l(f,p,d,h,t[m+10],15,-1051523),h=l(h,f,p,d,t[m+1],21,-2054922799),d=l(d,h,f,p,t[m+8],6,1873313359),p=l(p,d,h,f,t[m+15],10,-30611744),f=l(f,p,d,h,t[m+6],15,-1560198380),h=l(h,f,p,d,t[m+13],21,1309151649),d=l(d,h,f,p,t[m+4],6,-145523070),p=l(p,d,h,f,t[m+11],10,-1120210379),f=l(f,p,d,h,t[m+2],15,718787259),h=l(h,f,p,d,t[m+9],21,-343485551),d=e(d,i),h=e(h,r),f=e(f,o),p=e(p,c);return[d,h,f,p]},d={hexdigest:function(e){return r(c(n(e),8*e.length))},hash:function(e){return i(c(n(e),8*e.length))}};return d}),function(e,t){"function"==typeof n&&n.amd?n("strophe-utils",[],function(){return t()}):e.stropheUtils=t()}(this,function(){var e={utf16to8:function(e){var t,n,i="",r=e.length;for(t=0;t<r;t++)n=e.charCodeAt(t),n>=0&&n<=127?i+=e.charAt(t):n>2047?(i+=String.fromCharCode(224|n>>12&15),i+=String.fromCharCode(128|n>>6&63),i+=String.fromCharCode(128|n>>0&63)):(i+=String.fromCharCode(192|n>>6&31),i+=String.fromCharCode(128|n>>0&63));return i},addCookies:function(e){var t,n,i,r,o,s,a;for(t in e||{})o="",s="",a="",n=e[t],i="object"==typeof n,r=escape(unescape(i?n.value:n)),i&&(o=n.expires?";expires="+n.expires:"",s=n.domain?";domain="+n.domain:"",a=n.path?";path="+n.path:""),document.cookie=t+"="+r+o+s+a}};return e}),function(e,t){if("function"==typeof n&&n.amd)n("strophe-core",["strophe-sha1","strophe-md5","strophe-utils"],function(){return t.apply(this,arguments)});else{var i=t(e.SHA1,e.MD5,e.stropheUtils);e.Strophe=i.Strophe,e.$build=i.$build,e.$iq=i.$iq,e.$msg=i.$msg,e.$pres=i.$pres,e.SHA1=i.SHA1,e.MD5=i.MD5,e.b64_hmac_sha1=i.SHA1.b64_hmac_sha1,e.b64_sha1=i.SHA1.b64_sha1,e.str_hmac_sha1=i.SHA1.str_hmac_sha1,e.str_sha1=i.SHA1.str_sha1}}(this,function(e,t,n){function i(e,t){return new a.Builder(e,t)}function r(e){return new a.Builder("message",e)}function o(e){return new a.Builder("iq",e)}function s(e){return new a.Builder("presence",e)}var a;return a={VERSION:"1.2.14",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<a.XHTML.tags.length;t++)if(e===a.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if("undefined"!=typeof a.XHTML.attributes[e]&&a.XHTML.attributes[e].length>0)for(var n=0;n<a.XHTML.attributes[e].length;n++)if(t===a.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<a.XHTML.css.length;t++)if(e===a.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){a.NS[e]=t},forEachChild:function(e,t,n){var i,r;for(i=0;i<e.childNodes.length;i++)r=e.childNodes[i],r.nodeType!==a.ElementType.NORMAL||t&&!this.isTagEqual(r,t)||n(r)},isTagEqual:function(e,t){return e.tagName===t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return a._xmlGenerator||(a._xmlGenerator=a._makeGenerator()),a._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(t){e=null}return e},xmlElement:function(e){if(!e)return null;var t,n,i,r=a.xmlGenerator().createElement(e);for(t=1;t<arguments.length;t++){var o=arguments[t];if(o)if("string"==typeof o||"number"==typeof o)r.appendChild(a.xmlTextNode(o));else if("object"==typeof o&&"function"==typeof o.sort)for(n=0;n<o.length;n++){var s=o[n];"object"==typeof s&&"function"==typeof s.sort&&void 0!==s[1]&&null!==s[1]&&r.setAttribute(s[0],s[1])}else if("object"==typeof o)for(i in o)o.hasOwnProperty(i)&&void 0!==o[i]&&null!==o[i]&&r.setAttribute(i,o[i])}return r},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;")},xmlunescape:function(e){return e=e.replace(/\&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&apos;/g,"'"),e=e.replace(/&quot;/g,'"')},xmlTextNode:function(e){return a.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;if(DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType===a.ElementType.TEXT&&(t+=e.nodeValue);
for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===a.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return a.xmlescape(t)},copyElement:function(e){var t,n;if(e.nodeType===a.ElementType.NORMAL){for(n=a.xmlElement(e.tagName),t=0;t<e.attributes.length;t++)n.setAttribute(e.attributes[t].nodeName,e.attributes[t].value);for(t=0;t<e.childNodes.length;t++)n.appendChild(a.copyElement(e.childNodes[t]))}else e.nodeType===a.ElementType.TEXT&&(n=a.xmlGenerator().createTextNode(e.nodeValue));return n},createHtml:function(e){var t,n,i,r,o,s,u,l,c,d,h;if(e.nodeType===a.ElementType.NORMAL)if(r=e.nodeName.toLowerCase(),a.XHTML.validTag(r))try{for(n=a.xmlElement(r),t=0;t<a.XHTML.attributes[r].length;t++)if(o=a.XHTML.attributes[r][t],s=e.getAttribute(o),"undefined"!=typeof s&&null!==s&&""!==s&&s!==!1&&0!==s)if("style"===o&&"object"==typeof s&&"undefined"!=typeof s.cssText&&(s=s.cssText),"style"===o){for(u=[],l=s.split(";"),i=0;i<l.length;i++)c=l[i].split(":"),d=c[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),a.XHTML.validCSS(d)&&(h=c[1].replace(/^\s*/,"").replace(/\s*$/,""),u.push(d+": "+h));u.length>0&&(s=u.join("; "),n.setAttribute(o,s))}else n.setAttribute(o,s);for(t=0;t<e.childNodes.length;t++)n.appendChild(a.createHtml(e.childNodes[t]))}catch(e){n=a.xmlTextNode("")}else for(n=a.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(a.createHtml(e.childNodes[t]));else if(e.nodeType===a.ElementType.FRAGMENT)for(n=a.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(a.createHtml(e.childNodes[t]));else e.nodeType===a.ElementType.TEXT&&(n=a.xmlTextNode(e.nodeValue));return n},escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=a.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){"undefined"!=typeof e.stack&&a.fatal(e.stack),e.sourceURL?a.fatal("error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message):e.fileName?a.fatal("error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message):a.fatal("error: "+e.message)},log:function(e,t){},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var t;if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var n,i,r=e.nodeName;for(e.getAttribute("_realname")&&(r=e.getAttribute("_realname")),t="<"+r,n=0;n<e.attributes.length;n++)"_realname"!==e.attributes[n].nodeName&&(t+=" "+e.attributes[n].nodeName+"='"+a.xmlescape(e.attributes[n].value)+"'");if(e.childNodes.length>0){for(t+=">",n=0;n<e.childNodes.length;n++)switch(i=e.childNodes[n],i.nodeType){case a.ElementType.NORMAL:t+=a.serialize(i);break;case a.ElementType.TEXT:t+=a.xmlescape(i.nodeValue);break;case a.ElementType.CDATA:t+="<![CDATA["+i.nodeValue+"]]>"}t+="</"+r+">"}else t+="/>";return t},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){a._connectionPlugins[e]=t}},a.Builder=function(e,t){"presence"!==e&&"message"!==e&&"iq"!==e||(t&&!t.xmlns?t.xmlns=a.NS.CLIENT:t||(t={xmlns:a.NS.CLIENT})),this.nodeTree=a.xmlElement(e,t),this.node=this.nodeTree},a.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return a.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var i=a.xmlElement(e,t,n);return this.node.appendChild(i),"string"!=typeof n&&"number"!=typeof n&&(this.node=i),this},cnode:function(e){var t,n=a.xmlGenerator();try{t=void 0!==n.importNode}catch(e){t=!1}var i=t?n.importNode(e,!0):a.copyElement(e);return this.node.appendChild(i),this.node=i,this},t:function(e){var t=a.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=document.createElement("body");t.innerHTML=e;for(var n=a.createHtml(t);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},a.Handler=function(e,t,n,i,r,o,s){this.handler=e,this.ns=t,this.name=n,this.type=i,this.id=r,this.options=s||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(a.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=o?a.getBareJidFromJid(o):null:this.from=o,this.user=!0},a.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=!1;if(!this.ns)return!0;var n=this;return a.forEachChild(e,null,function(e){n.getNamespace(e)===n.ns&&(t=!0)}),t=t||this.getNamespace(e)===this.ns},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=a.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!a.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?this.type.indexOf(n)===-1:n!==this.type)||this.id&&e.getAttribute("id")!==this.id||this.from&&t!==this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(e){throw a._handleError(e),e}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},a.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},a.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},a.Connection=function(e,t){this.service=e,this.options=t||{};var i=this.options.protocol||"";0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===i.indexOf("ws")?this._proto=new a.Websocket(this):this._proto=new a.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100),n.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms);for(var r in a._connectionPlugins)if(a._connectionPlugins.hasOwnProperty(r)){var o=a._connectionPlugins[r],s=function(){};s.prototype=o,this[r]=new s,this[r].init(this)}},a.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,i,r,o,s){this.jid=e,this.authzid=a.getBareJidFromJid(this.jid),this.authcid=s||a.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=a.getDomainFromJid(this.jid),this._changeConnectStatus(a.Status.CONNECTING,null),this._proto._connect(i,r,o)},attach:function(e,t,n,i,r,o,s){if(!(this._proto instanceof a.Bosh))throw{name:"StropheSessionError",message:'The "attach" method can only be used with a BOSH connection.'};this._proto._attach(e,t,n,i,r,o,s)},restore:function(e,t,n,i,r){if(!this._sessionCachingSupported())throw{name:"StropheSessionError",message:'The "restore" method can only be used with a BOSH connection.'};this._proto._restore(e,t,n,i,r)},_sessionCachingSupported:function(){if(this._proto instanceof a.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;t<e.length;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(e,t,n,i){var r=null,o=this;"function"==typeof e.tree&&(e=e.tree());var s=e.getAttribute("id");if(s||(s=this.getUniqueId("sendPresence"),e.setAttribute("id",s)),"function"==typeof t||"function"==typeof n){var a=this.addHandler(function(e){r&&o.deleteTimedHandler(r);var i=e.getAttribute("type");"error"===i?n&&n(e):t&&t(e)},null,"presence",null,s);i&&(r=this.addTimedHandler(i,function(){return o.deleteHandler(a),n&&n(null),!1}))}return this.send(e),s},sendIQ:function(e,t,n,i){var r=null,o=this;"function"==typeof e.tree&&(e=e.tree());var s=e.getAttribute("id");if(s||(s=this.getUniqueId("sendIQ"),e.setAttribute("id",s)),"function"==typeof t||"function"==typeof n){var a=this.addHandler(function(e){r&&o.deleteTimedHandler(r);var i=e.getAttribute("type");if("result"===i)t&&t(e);else{if("error"!==i)throw{name:"StropheError",message:"Got bad IQ type of "+i};n&&n(e)}},null,"iq",["error","result"],s);i&&(r=this.addTimedHandler(i,function(){return o.deleteHandler(a),n&&n(null),!1}))}return this.send(e),s},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100)},addTimedHandler:function(e,t){var n=new a.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,i,r,o,s){var u=new a.Handler(e,t,n,i,r,o,s);return this.addHandlers.push(u),u},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},e=e||[a.SASLAnonymous,a.SASLExternal,a.SASLMD5,a.SASLOAuthBearer,a.SASLPlain,a.SASLSHA1],e.forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){if(this._changeConnectStatus(a.Status.DISCONNECTING,e),a.info("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=s({xmlns:a.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else a.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(e,t){for(var n in a._connectionPlugins)if(a._connectionPlugins.hasOwnProperty(n)){var i=this[n];if(i.statusChanged)try{i.statusChanged(e,t)}catch(e){a.error(""+n+" plugin caused an exception changing status: "+e)}}if(this.connect_callback)try{this.connect_callback(e,t)}catch(e){a._handleError(e),a.error("User connection callback caused an exception: "+e)}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),a.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(a.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){a.info("_dataRecv called");var n=this._proto._reqToData(e);if(null!==n){this.xmlInput!==a.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==a.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(a.serialize(n)));for(var i,r;this.removeHandlers.length>0;)r=this.removeHandlers.pop(),i=this.handlers.indexOf(r),i>=0&&this.handlers.splice(i,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();var o,s,u=n.getAttribute("type");if(null!==u&&"terminate"===u){if(this.disconnecting)return;return o=n.getAttribute("condition"),s=n.getElementsByTagName("conflict"),null!==o?("remote-stream-error"===o&&s.length>0&&(o="conflict"),this._changeConnectStatus(a.Status.CONNFAIL,o)):this._changeConnectStatus(a.Status.CONNFAIL,"unknown"),void this._doDisconnect(o)}var l=this;a.forEachChild(n,null,function(e){var t,n;for(n=l.handlers,l.handlers=[],t=0;t<n.length;t++){var i=n[t];try{!i.isMatch(e)||!l.authenticated&&i.user?l.handlers.push(i):i.run(e)&&l.handlers.push(i)}catch(e){a.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}}})}},mechanisms:{},_connect_cb:function(e,t,n){a.info("_connect_cb was called"),this.connected=!0;var i;try{i=this._proto._reqToData(e)}catch(e){if("badformat"!==e)throw e;this._changeConnectStatus(a.Status.CONNFAIL,"bad-format"),this._doDisconnect("bad-format")}if(i){this.xmlInput!==a.Connection.prototype.xmlInput&&(i.nodeName===this._proto.strip&&i.childNodes.length?this.xmlInput(i.childNodes[0]):this.xmlInput(i)),this.rawInput!==a.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(a.serialize(i)));var r=this._proto._connect_cb(i);if(r!==a.Status.CONNFAIL){var o;if(o=i.getElementsByTagNameNS?i.getElementsByTagNameNS(a.NS.STREAM,"features").length>0:i.getElementsByTagName("stream:features").length>0||i.getElementsByTagName("features").length>0,!o)return void this._proto._no_auth_received(t);var s,u,l=[],c=i.getElementsByTagName("mechanism");if(c.length>0)for(s=0;s<c.length;s++)u=a.getText(c[s]),this.mechanisms[u]&&l.push(this.mechanisms[u]);return 0===l.length&&0===i.getElementsByTagName("auth").length?void this._proto._no_auth_received(t):void(this.do_authentication!==!1&&this.authenticate(l))}}},sortMechanismsByPriority:function(e){var t,n,i,r;for(t=0;t<e.length-1;++t){for(i=t,n=t+1;n<e.length;++n)e[n].prototype.priority>e[i].prototype.priority&&(i=n);i!==t&&(r=e[t],e[t]=e[i],e[i]=r)}return e},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);var t=0,n=!1;for(t=0;t<e.length;++t)if(e[t].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[t],this._sasl_mechanism.onStart(this);var r=i("auth",{xmlns:a.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var o=this._sasl_mechanism.onChallenge(this,null);r.t(btoa(o))}this.send(r.tree()),n=!0;break}return n},_attemptLegacyAuth:function(){null===a.getNodeFromJid(this.jid)?(this._changeConnectStatus(a.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect("x-strophe-bad-non-anon-jid")):(this._changeConnectStatus(a.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(o({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:a.NS.AUTH}).c("username",{}).t(a.getNodeFromJid(this.jid)).tree()))},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(e){var t=atob(a.getText(e)),n=this._sasl_mechanism.onChallenge(this,t),r=i("response",{xmlns:a.NS.SASL});return""!==n&&r.t(btoa(n)),this.send(r.tree()),!0},_auth1_cb:function(e){var t=o({type:"set",id:"_auth_2"}).c("query",{xmlns:a.NS.AUTH}).c("username",{}).t(a.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return a.getResourceFromJid(this.jid)||(this.jid=a.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(a.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){if(this._sasl_data["server-signature"]){var t,n=atob(a.getText(e)),i=/([a-z]+)=([^,]+)(,|$)/,r=n.match(i);if("v"===r[1]&&(t=r[2]),t!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}a.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var o=[],s=function(e,t){for(;e.length;)this.deleteHandler(e.pop());return this._sasl_auth1_cb.bind(this)(t),!1};return o.push(this._addSysHandler(function(e){s.bind(this)(o,e)}.bind(this),null,"stream:features",null,null)),o.push(this._addSysHandler(function(e){s.bind(this)(o,e)}.bind(this),a.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(e){this.features=e;var t,n;for(t=0;t<e.childNodes.length;t++)n=e.childNodes[t],"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(a.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var i=a.getResourceFromJid(this.jid);return i?this.send(o({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:a.NS.BIND}).c("resource",{}).t(i).tree()):this.send(o({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:a.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if("error"===e.getAttribute("type")){a.info("SASL binding failed.");var t,n=e.getElementsByTagName("conflict");return n.length>0&&(t="conflict"),this._changeConnectStatus(a.Status.AUTHFAIL,t),!1}var i,r=e.getElementsByTagName("bind");return r.length>0?(i=r[0].getElementsByTagName("jid"),void(i.length>0&&(this.jid=a.getText(i[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(o({type:"set",id:"_session_auth_2"}).c("session",{xmlns:a.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null))))):(a.info("SASL binding failed."),this._changeConnectStatus(a.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(e){if("result"===e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null);else if("error"===e.getAttribute("type"))return a.info("Session creation failed."),this._changeConnectStatus(a.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(a.Status.AUTHFAIL,null),!1},_auth2_cb:function(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(a.Status.AUTHFAIL,null),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new a.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,i,r){var o=new a.Handler(e,t,n,i,r);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){return a.info("_onDisconnectTimeout was called"),this._changeConnectStatus(a.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var e,t,n,i;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)t=this.removeTimeds.pop(),e=this.timedHandlers.indexOf(t),e>=0&&this.timedHandlers.splice(e,1);var r=(new Date).getTime();for(i=[],e=0;e<this.timedHandlers.length;e++)t=this.timedHandlers[e],!this.authenticated&&t.user||(n=t.lastCalled+t.period,n-r<=0?t.run()&&i.push(t):i.push(t));this.timedHandlers=i,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100))}},a.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},a.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},a.SASLAnonymous=function(){},a.SASLAnonymous.prototype=new a.SASLMechanism("ANONYMOUS",!1,20),a.SASLAnonymous.prototype.test=function(e){return null===e.authcid},a.SASLPlain=function(){},a.SASLPlain.prototype=new a.SASLMechanism("PLAIN",!0,30),a.SASLPlain.prototype.test=function(e){return null!==e.authcid},a.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass,n.utf16to8(t)},a.SASLSHA1=function(){},a.SASLSHA1.prototype=new a.SASLMechanism("SCRAM-SHA-1",!0,50),a.SASLSHA1.prototype.test=function(e){return null!==e.authcid},a.SASLSHA1.prototype.onChallenge=function(i,r,o){var s=o||t.hexdigest(1234567890*Math.random()),a="n="+n.utf16to8(i.authcid);return a+=",r=",a+=s,i._sasl_data.cnonce=s,i._sasl_data["client-first-message-bare"]=a,a="n,,"+a,this.onChallenge=function(t,i){for(var r,o,s,a,u,l,c,d,h,f,p,m,_="c=biws,",g=t._sasl_data["client-first-message-bare"]+","+i+",",v=t._sasl_data.cnonce,y=/([a-z]+)=([^,]+)(,|$)/;i.match(y);){var b=i.match(y);switch(i=i.replace(b[0],""),b[1]){case"r":r=b[2];break;case"s":o=b[2];break;case"i":s=b[2]}}if(r.substr(0,v.length)!==v)return t._sasl_data={},t._sasl_failure_cb();for(_+="r="+r,g+=_,o=atob(o),o+="\0\0\0",h=n.utf16to8(t.pass),a=l=e.core_hmac_sha1(h,o),c=1;c<s;c++){for(u=e.core_hmac_sha1(h,e.binb2str(l)),d=0;d<5;d++)a[d]^=u[d];l=u}for(a=e.binb2str(a),f=e.core_hmac_sha1(a,"Client Key"),p=e.str_hmac_sha1(a,"Server Key"),m=e.core_hmac_sha1(e.str_sha1(e.binb2str(f)),g),t._sasl_data["server-signature"]=e.b64_hmac_sha1(p,g),d=0;d<5;d++)f[d]^=m[d];return _+=",p="+btoa(e.binb2str(f))}.bind(this),a},a.SASLMD5=function(){},a.SASLMD5.prototype=new a.SASLMechanism("DIGEST-MD5",!1,40),a.SASLMD5.prototype.test=function(e){return null!==e.authcid},a.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},a.SASLMD5.prototype.onChallenge=function(e,i,r){for(var o,s=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,a=r||t.hexdigest(""+1234567890*Math.random()),u="",l=null,c="",d="";i.match(s);)switch(o=i.match(s),i=i.replace(o[0],""),o[2]=o[2].replace(/^"(.+)"$/,"$1"),o[1]){case"realm":u=o[2];break;case"nonce":c=o[2];break;case"qop":d=o[2];break;case"host":l=o[2]}var h=e.servtype+"/"+e.domain;null!==l&&(h=h+"/"+l);var f=n.utf16to8(e.authcid+":"+u+":"+this._connection.pass),p=t.hash(f)+":"+c+":"+a,m="AUTHENTICATE:"+h,_="";return _+="charset=utf-8,",_+="username="+this._quote(n.utf16to8(e.authcid))+",",_+="realm="+this._quote(u)+",",_+="nonce="+this._quote(c)+",",_+="nc=00000001,",_+="cnonce="+this._quote(a)+",",_+="digest-uri="+this._quote(h)+",",_+="response="+t.hexdigest(t.hexdigest(p)+":"+c+":00000001:"+a+":auth:"+t.hexdigest(m))+",",_+="qop=auth",this.onChallenge=function(){return""},_},a.SASLOAuthBearer=function(){},a.SASLOAuthBearer.prototype=new a.SASLMechanism("OAUTHBEARER",!0,60),a.SASLOAuthBearer.prototype.test=function(e){return null!==e.pass},a.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="",t+="auth=Bearer ",t+=e.pass,t+="",t+="",n.utf16to8(t)},a.SASLExternal=function(){},a.SASLExternal.prototype=new a.SASLMechanism("EXTERNAL",!0,10),a.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},{Strophe:a,$build:i,$iq:o,$msg:r,$pres:s,SHA1:e,MD5:t,b64_hmac_sha1:e.b64_hmac_sha1,b64_sha1:e.b64_sha1,str_hmac_sha1:e.str_hmac_sha1,str_sha1:e.str_sha1}}),function(e,t){return"function"==typeof n&&n.amd?void n("strophe-bosh",["strophe-core"],function(e){return t(e.Strophe,e.$build)}):t(Strophe,$build)}(this,function(e,t){return e.Request=function(t,n,i,r){this.id=++e._requestId,this.xmlData=t,this.data=e.serialize(t),this.origFunc=n,this.func=n,this.rid=i,this.date=NaN,this.sends=r||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var e=new Date;return(e-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var e=new Date;return(e-this.dead)/1e3},this.xhr=this._newXHR()},e.Request.prototype={getResponse:function(){var t=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(t=this.xhr.responseXML.documentElement,"parsererror"===t.tagName)throw e.error("invalid response received"),e.error("responseText: "+this.xhr.responseText),e.error("responseXML: "+e.serialize(this.xhr.responseXML)),"parsererror"}else if(this.xhr.responseText)throw e.error("invalid response received"),e.error("responseText: "+this.xhr.responseText),"badformat";return t},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8")):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},e.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this._requests=[]},e.Bosh.prototype={strip:null,_buildBody:function(){var n=t("body",{rid:this.rid++,xmlns:e.NS.HTTPBIND});return null!==this.sid&&n.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),n},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(t,n,i){this.wait=t||this.wait,this.hold=n||this.hold,this.errors=0;var r=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":e.NS.BOSH});i&&r.attrs({route:i});var o=this._conn._connect_cb;this._requests.push(new e.Request(r.tree(),this._onRequestStateChange.bind(this,o.bind(this._conn)),r.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(t,n,i,r,o,s,a){this._conn.jid=t,this.sid=n,this.rid=i,this._conn.connect_callback=r,this._conn.domain=e.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=o||this.wait,this.hold=s||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(e.Status.ATTACHED,null)},_restore:function(t,n,i,r,o){var s=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!("undefined"!=typeof s&&null!==s&&s.rid&&s.sid&&s.jid&&("undefined"==typeof t||null===t||e.getBareJidFromJid(s.jid)===e.getBareJidFromJid(t)||null===e.getNodeFromJid(t)&&e.getDomainFromJid(s.jid)===t)))throw{name:"StropheSessionError",message:"_restore: no restoreable session."};this._conn.restored=!0,this._attach(s.jid,s.sid,s.rid,n,i,r,o)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(t){var n,i,r=t.getAttribute("type");if(null!==r&&"terminate"===r)return n=t.getAttribute("condition"),e.error("BOSH-Connection failed: "+n),i=t.getElementsByTagName("conflict"),null!==n?("remote-stream-error"===n&&i.length>0&&(n="conflict"),this._conn._changeConnectStatus(e.Status.CONNFAIL,n)):this._conn._changeConnectStatus(e.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),e.Status.CONNFAIL;this.sid||(this.sid=t.getAttribute("sid"));var o=t.getAttribute("requests");o&&(this.window=parseInt(o,10));var s=t.getAttribute("hold");s&&(this.hold=parseInt(s,10));var a=t.getAttribute("wait");a&&(this.wait=parseInt(a,10));var u=t.getAttribute("inactivity");u&&(this.inactivity=parseInt(u,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t,n=this._getRequestStatus(e);t=this._conn.protocolErrorHandlers.HTTP[n],t&&t.call(this,n)},_hitError:function(t){this.errors++,e.warn("request errored, status: "+t+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(t){t=t?t.bind(this._conn):this._conn._connect_cb.bind(this._conn);var n=this._buildBody();this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,t.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(var e;this._requests.length>0;)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}},_onIdle:function(){var t=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===t.length&&!this._conn.disconnecting&&(e.info("no requests during idle cycle, sending blank request"),t.push(null)),!this._conn.paused){if(this._requests.length<2&&t.length>0){for(var n=this._buildBody(),i=0;i<t.length;i++)null!==t[i]&&("restart"===t[i]?n.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":e.NS.BOSH}):n.cnode(t[i]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var r=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),
r>Math.floor(e.TIMEOUT*this.wait)&&(e.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(e.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(t,n){var i;if(4===t.xhr.readyState)try{i=t.xhr.status}catch(t){e.error("Caught an error while retrieving a request's status, reqStatus: "+i)}return"undefined"==typeof i&&(i="number"==typeof n?n:0),i},_onRequestStateChange:function(t,n){if(e.debug("request id "+n.id+"."+n.sends+" state changed to "+n.xhr.readyState),n.abort)return void(n.abort=!1);if(4===n.xhr.readyState){var i=this._getRequestStatus(n);if(this.disconnecting&&i>=400)return this._hitError(i),void this._callProtocolErrorHandlers(n);var r=i>0&&i<500,o=n.sends>this._conn.maxRetries;if((r||o)&&(this._removeRequest(n),e.debug("request id "+n.id+" should now be removed")),200===i){var s=this._requests[0]===n,a=this._requests[1]===n;(a||s&&this._requests.length>0&&this._requests[0].age()>Math.floor(e.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(n.rid)+1),e.debug("request id "+n.id+"."+n.sends+" got 200"),t(n),this.errors=0}else 0===i||i>=400&&i<600||i>=12e3?(e.error("request id "+n.id+"."+n.sends+" error "+i+" happened"),this._hitError(i),this._callProtocolErrorHandlers(n),i>=400&&i<500&&(this._conn._changeConnectStatus(e.Status.DISCONNECTING,null),this._conn._doDisconnect())):e.error("request id "+n.id+"."+n.sends+" error "+i+" happened");r||o?o&&!this._conn.connected&&this._conn._changeConnectStatus(e.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(t){var n=this,i=this._requests[t],r=this._getRequestStatus(i,-1);if(i.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();var o=i.age(),s=!isNaN(o)&&o>Math.floor(e.TIMEOUT*this.wait),a=null!==i.dead&&i.timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait),u=4===i.xhr.readyState&&(r<1||r>=500);if((s||a||u)&&(a&&e.error("Request "+this._requests[t].id+" timed out (secondary), restarting"),i.abort=!0,i.xhr.abort(),i.xhr.onreadystatechange=function(){},this._requests[t]=new e.Request(i.xmlData,i.origFunc,i.rid,i.sends),i=this._requests[t]),0===i.xhr.readyState){e.debug("request id "+i.id+"."+i.sends+" posting");try{var l=this._conn.options.contentType||"text/xml; charset=utf-8";i.xhr.open("POST",this._conn.service,!this._conn.options.sync),"undefined"!=typeof i.xhr.setRequestHeader&&i.xhr.setRequestHeader("Content-Type",l),this._conn.options.withCredentials&&(i.xhr.withCredentials=!0)}catch(t){return e.error("XHR open failed: "+t.toString()),this._conn.connected||this._conn._changeConnectStatus(e.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var c=function(){if(i.date=new Date,n._conn.options.customHeaders){var e=n._conn.options.customHeaders;for(var t in e)e.hasOwnProperty(t)&&i.xhr.setRequestHeader(t,e[t])}i.xhr.send(i.data)};if(i.sends>1){var d=1e3*Math.min(Math.floor(e.TIMEOUT*this.wait),Math.pow(i.sends,3));setTimeout(function(){c()},d)}else c();i.sends++,this._conn.xmlOutput!==e.Connection.prototype.xmlOutput&&(i.xmlData.nodeName===this.strip&&i.xmlData.childNodes.length?this._conn.xmlOutput(i.xmlData.childNodes[0]):this._conn.xmlOutput(i.xmlData)),this._conn.rawOutput!==e.Connection.prototype.rawOutput&&this._conn.rawOutput(i.data)}else e.debug("_processRequest: "+(0===t?"first":"second")+" request has readyState of "+i.xhr.readyState)},_removeRequest:function(t){e.debug("removing request");var n;for(n=this._requests.length-1;n>=0;n--)t===this._requests[n]&&this._requests.splice(n,1);t.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(e){if("parsererror"!==e)throw e;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(t){e.info("_sendTerminate was called");var n=this._buildBody().attrs({type:"terminate"});t&&n.cnode(t.tree());var i=new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"));this._requests.push(i),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?e.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):e.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},e}),function(e,t){return"function"==typeof n&&n.amd?void n("strophe-websocket",["strophe-core"],function(e){return t(e.Strophe,e.$build)}):t(Strophe,$build)}(this,function(e,t){return e.Websocket=function(e){this._conn=e,this.strip="wrapper";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var n="";n+="ws"===e.options.protocol&&"https:"!==window.location.protocol?"ws":"wss",n+="://"+window.location.host,n+=0!==t.indexOf("/")?window.location.pathname+t:t,e.service=n}},e.Websocket.prototype={_buildStream:function(){return t("open",{xmlns:e.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(t,n){var i;if(i=t.getElementsByTagNameNS?t.getElementsByTagNameNS(e.NS.STREAM,"error"):t.getElementsByTagName("stream:error"),0===i.length)return!1;for(var r=i[0],o="",s="",a="urn:ietf:params:xml:ns:xmpp-streams",u=0;u<r.childNodes.length;u++){var l=r.childNodes[u];if(l.getAttribute("xmlns")!==a)break;"text"===l.nodeName?s=l.textContent:o=l.nodeName}var c="WebSocket stream error: ";return c+=o?o:"unknown",s&&(c+=" - "+s),e.error(c),this._conn._changeConnectStatus(n,o),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(t){var n=this._check_streamerror(t,e.Status.CONNFAIL);if(n)return e.Status.CONNFAIL},_handleStreamStart:function(t){var n=!1,i=t.getAttribute("xmlns");"string"!=typeof i?n="Missing xmlns in <open />":i!==e.NS.FRAMING&&(n="Wrong xmlns in <open />: "+i);var r=t.getAttribute("version");return"string"!=typeof r?n="Missing version in <open />":"1.0"!==r&&(n="Wrong version in <open />: "+r),!n||(this._conn._changeConnectStatus(e.Status.CONNFAIL,n),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(t){if(0===t.data.indexOf("<open ")||0===t.data.indexOf("<?xml")){var n=t.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===n)return;var i=(new DOMParser).parseFromString(n,"text/xml").documentElement;this._conn.xmlInput(i),this._conn.rawInput(t.data),this._handleStreamStart(i)&&this._connect_cb(i)}else if(0===t.data.indexOf("<close ")){this._conn.rawInput(t.data),this._conn.xmlInput(t);var r=t.getAttribute("see-other-uri");r?(this._conn._changeConnectStatus(e.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=r,this._connect()):(this._conn._changeConnectStatus(e.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect())}else{var o=this._streamWrap(t.data),s=(new DOMParser).parseFromString(o,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(s,null,t.data)}},_disconnect:function(n){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){n&&this._conn.send(n);var i=t("close",{xmlns:e.NS.FRAMING});this._conn.xmlOutput(i);var r=e.serialize(i);this._conn.rawOutput(r);try{this.socket.send(r)}catch(t){e.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){e.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(e){return"<wrapper>"+e+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.close()}catch(e){}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(t){this._conn.connected&&!this._conn.disconnecting?(e.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):t&&1006===t.code&&!this._conn.connected&&this.socket?(e.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(e.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):e.info("Websocket closed")},_no_auth_received:function(t){e.error("Server did not send any auth methods"),this._conn._changeConnectStatus(e.Status.CONNFAIL,"Server did not send any auth methods"),t&&(t=t.bind(this._conn))(),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(t){e.error("Websocket error "+t),this._conn._changeConnectStatus(e.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()},_onIdle:function(){var t=this._conn._data;if(t.length>0&&!this._conn.paused){for(var n=0;n<t.length;n++)if(null!==t[n]){var i,r;i="restart"===t[n]?this._buildStream().tree():t[n],r=e.serialize(i),this._conn.xmlOutput(i),this._conn.rawOutput(r),this.socket.send(r)}this._conn._data=[]}},_onMessage:function(t){var n,i,r='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(t.data===r)return this._conn.rawInput(r),this._conn.xmlInput(t),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===t.data.search("<open ")){if(n=(new DOMParser).parseFromString(t.data,"text/xml").documentElement,!this._handleStreamStart(n))return}else i=this._streamWrap(t.data),n=(new DOMParser).parseFromString(i,"text/xml").documentElement;return this._check_streamerror(n,e.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===n.firstChild.nodeName&&"unavailable"===n.firstChild.getAttribute("type")?(this._conn.xmlInput(n),void this._conn.rawInput(e.serialize(n))):void this._conn._dataRecv(n,t.data)},_onOpen:function(){e.info("Websocket open");var t=this._buildStream();this._conn.xmlOutput(t.tree());var n=e.serialize(t);this._conn.rawOutput(n),this.socket.send(n)},_reqToData:function(e){return e},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},e}),function(e){"function"==typeof n&&n.amd&&n("strophe",["strophe-core","strophe-bosh","strophe-websocket"],function(e){return e})}(this),t(["strophe-polyfill"]),t("strophe")}),function(e){"use strict";var t={},n="function"==typeof requirejs&&requirejs.nodeRequire,i=function(e){return e.replace(/(\/$)/,"")};define("tpl",["require","exports","module","lodash"],function(e,r){function o(e,t,n){return["define('",e,"!",t,"', ","['lodash'], ",["function(_) {","return ",n,";","}"].join(""),");\n"].join("")}function s(e){var t=a.extend({ext:".html",root:e.baseUrl,templateSettings:{}},e.lodashLoader);return t.root&&"/"!==t.root.slice(-1)&&(t.root+="/"),a.extend(a.templateSettings,t.templateSettings),t}var a=e("lodash");r.version="1.0.1",r.load=function(r,o,u,l){var c;l||(l=e.rawConfig,c=!0);var d="",h=s(l);i(l.baseUrl)===i(h.root)&&(h.root="");var f=e.toUrl(h.root+r+h.ext);if(c&&0!==f.indexOf(l.baseUrl)&&(f=i(l.baseUrl)+f),l.isBuild){var p=n("fs");try{d=String(p.readFileSync(f))}catch(e){"/"===f.slice(0,1)&&(f=f.slice(1)),d=String(p.readFileSync(f))}return t[r]=a.template(d),u()}var m=new XMLHttpRequest;m.onreadystatechange=function(){if(4===m.readyState){var e=a.clone(h.templateSettings);e.sourceURL=f,t[r]=a.template(m.responseText,e),u(t[r])}},m.open("GET",f,!0),m.send(null)},r.write=function(e,n,i){var r=t[n].source;i(o(e,n,r))},r.compile=function(e,t,n,i,r){function a(n){i.write(o(e,t,n))}s(r),i.read(t,a,i.error)}})}("object"==typeof global?global:this),define("tpl!field",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<field var="'+__e(name)+'">',_.isArray(value)?(__p+="\n    ",_.each(value,function(e){__p+="<value>"+__e(e)+"</value>"}),__p+="\n"):__p+="\n    <value>"+__e(value)+"</value>\n",__p+="</field>\n";return __p}}),define("tpl!select_option",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<option value="'+__e(value)+'" ',selected&&(__p+=' selected="selected" '),__p+=" >"+__e(label)+"</option>\n";return __p}}),define("tpl!form_select",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+="<label>"+__e(label)+'</label>\n<select name="'+__e(name)+'"  ',multiple&&(__p+=' multiple="multiple" '),__p+=">"+(null==(__t=options)?"":__t)+"</select>\n";return __p}}),define("tpl!form_textarea",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<label class="label-ta">'+__e(label)+'</label>\n<textarea name="'+__e(name)+'">'+__e(value)+"</textarea>\n";return __p}}),define("tpl!form_checkbox",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<label>"+__e(label)+'</label>\n<input name="'+__e(name)+'" type="'+__e(type)+'" '+__e(checked)+">\n";return __p}}),define("tpl!form_username",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)label&&(__p+="\n<label>\n    "+__e(label)+"\n</label>\n"),__p+='\n<div class="input-group">\n    <input name="'+__e(name)+'" type="'+__e(type)+'"\n        ',value&&(__p+=' value="'+__e(value)+'" '),__p+="\n        ",required&&(__p+=' class="required" '),__p+=' />\n    <span title="'+__e(domain)+'">'+__e(domain)+"</span>\n</div>\n";return __p}}),define("tpl!form_input",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)label&&(__p+="\n<label>\n    "+__e(label)+"\n</label>\n"),__p+='\n<input name="'+__e(name)+'" type="'+__e(type)+'" \n    ',value&&(__p+=' value="'+__e(value)+'" '),__p+="\n    ",required&&(__p+=' class="required" '),__p+=" >\n";return __p}}),define("tpl!form_captcha",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)label&&(__p+="\n<label>\n    "+__e(label)+"\n</label>\n"),__p+='\n<img src="data:'+__e(type)+";base64,"+__e(data)+'">\n<input name="'+__e(name)+'" type="text" ',required&&(__p+=' class="required" '),__p+=" >\n\n\n";return __p}}),function(e,t){define("utils",["jquery.noconflict","sizzle","jquery.browser","lodash.noconflict","locales","moment_with_locales","strophe","tpl!field","tpl!select_option","tpl!form_select","tpl!form_textarea","tpl!form_checkbox","tpl!form_username","tpl!form_input","tpl!form_captcha"],t)}(this,function(e,t,n,i,r,o,s,a,u,l,c,d,h,f,p){"use strict";r=r||{},s=s.Strophe;var m={"text-private":"password","text-single":"text",fixed:"label",boolean:"checkbox",hidden:"hidden","jid-multi":"textarea","list-single":"dropdown","list-multi":"dropdown"},_=function(e,t){e.classList.remove("visible"),i.isFunction(t)&&t()},g=function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText},v=function(t){var n=new e.Deferred,i=new Image,r=window.setTimeout(function(){n.reject(),i=null},3e3);return i.onerror=i.onabort=function(){clearTimeout(r),n.reject()},i.onload=function(){clearTimeout(r),n.resolve(i)},i.src=t,n.promise()};e.fn.hasScrollBar=function(){return!!e.contains(document,this.get(0))&&this.parent().height()<this.get(0).scrollHeight};var y=i.throttle(function(e,t){e.innerHTML=t},500);e.fn.addHyperlinks=function(){return this.length>0&&this.each(function(e,t){var n,r,o=t.innerHTML,s=o.match(/\b(https?:\/\/|www\.|https?:\/\/www\.)[^\s<]{2,200}\b/g);if(s)for(e=0;e<s.length;e++)n=0===s[e].indexOf("http://")||0===s[e].indexOf("https://")?"":"http://",r=encodeURI(decodeURI(s[e])).replace(/[!'()]/g,escape).replace(/\*/g,"%2A"),o=o.replace(s[e],'<a target="_blank" rel="noopener" href="'+n+r+'">'+s[e]+"</a>");t.innerHTML=o,i.forEach(s,function(e){v(g(e)).then(function(e){e.className="chat-image",y(t.querySelector("a"),e.outerHTML)})})}),this},e.fn.addEmoticons=function(t){return t&&this.length>0&&this.each(function(t,n){var i=e(n).html();i=i.replace(/&gt;:\)/g,'<span class="emoticon icon-evil"></span>'),i=i.replace(/:\)/g,'<span class="emoticon icon-smiley"></span>'),i=i.replace(/:\-\)/g,'<span class="emoticon icon-smiley"></span>'),i=i.replace(/;\)/g,'<span class="emoticon icon-wink"></span>'),i=i.replace(/;\-\)/g,'<span class="emoticon icon-wink"></span>'),i=i.replace(/:D/g,'<span class="emoticon icon-grin"></span>'),i=i.replace(/:\-D/g,'<span class="emoticon icon-grin"></span>'),i=i.replace(/:P/g,'<span class="emoticon icon-tongue"></span>'),i=i.replace(/:\-P/g,'<span class="emoticon icon-tongue"></span>'),i=i.replace(/:p/g,'<span class="emoticon icon-tongue"></span>'),i=i.replace(/:\-p/g,'<span class="emoticon icon-tongue"></span>'),i=i.replace(/8\)/g,'<span class="emoticon icon-cool"></span>'),i=i.replace(/:S/g,'<span class="emoticon icon-confused"></span>'),i=i.replace(/:\\/g,'<span class="emoticon icon-wondering"></span>'),i=i.replace(/:\/ /g,'<span class="emoticon icon-wondering"></span>'),i=i.replace(/&gt;:\(/g,'<span class="emoticon icon-angry"></span>'),i=i.replace(/:\(/g,'<span class="emoticon icon-sad"></span>'),i=i.replace(/:\-\(/g,'<span class="emoticon icon-sad"></span>'),i=i.replace(/:O/g,'<span class="emoticon icon-shocked"></span>'),i=i.replace(/:\-O/g,'<span class="emoticon icon-shocked"></span>'),i=i.replace(/\=\-O/g,'<span class="emoticon icon-shocked"></span>'),i=i.replace(/\(\^.\^\)b/g,'<span class="emoticon icon-thumbs-up"></span>'),i=i.replace(/&lt;3/g,'<span class="emoticon icon-heart"></span>'),e(n).html(i)}),this};var b={__:function(e){if(!b.isConverseLocale(this.locale)||"en"===this.locale)return Jed.sprintf.apply(Jed,arguments);"undefined"==typeof this.jed&&(this.jed=new Jed(window.JSON.parse(r[this.locale])));var t=this.jed.translate(e);return arguments.length>1?t.fetch.apply(t,[].slice.call(arguments,1)):t.fetch()},___:function(e){return e},isLocaleAvailable:function(e,t){if(t(e))return e;var n=e.split("-")[0];return n!==e&&t(n)?n:void 0},fadeIn:function(t,n){return e.fx.off?(t.classList.remove("hidden"),void(i.isFunction(n)&&n())):void(i.includes(t.classList,"hidden")?(setTimeout(i.partial(_,t,n),351),t.classList.add("visible"),t.classList.remove("hidden")):_(t,n))},isSameBareJID:function(e,t){return s.getBareJidFromJid(e).toLowerCase()===s.getBareJidFromJid(t).toLowerCase()},isNewMessage:function(e){return e instanceof Element?!t('result[xmlns="'+s.NS.MAM+'"]',e).length:!e.get("archive_id")},isOTRMessage:function(e){var t=e.querySelector("body"),n=i.isNull(t)?void 0:t.textContent;return n&&!!n.match(/^\?OTR/)},isHeadlineMessage:function(e){var t=e.getAttribute("from");return"headline"===e.getAttribute("type")||"error"!==e.getAttribute("type")&&!i.isNil(t)&&!i.includes(t,"@")},merge:function e(t,n){for(var r in n)i.isObject(t[r])?e(t[r],n[r]):t[r]=n[r]},applyUserSettings:function e(t,n,r){for(var o in n)i.isUndefined(r[o])||(i.isObject(n[o])&&!i.isArray(n[o])?e(t[o],n[o],r[o]):t[o]=r[o])},refreshWebkit:function(){e.browser.webkit&&window.requestAnimationFrame&&window.requestAnimationFrame(function(){var e=document.getElementById("conversejs");e.style.display="none";e.offsetHeight;e.style.display="block"})},webForm2xForm:function(t){var n,i=e(t);if(i.is("[type=checkbox]"))n=i.is(":checked")&&1||0;else if(i.is("textarea")){n=[];for(var r=i.val().split("\n"),o=0;o<r.length;o++){var s=e.trim(r[o]);""!==s&&n.push(s)}}else n=i.val();return e(a({name:i.attr("name"),value:n}))[0]},contains:function(e,t){return function(n){if("object"==typeof e){var r=!1;return i.forEach(e,function(e){r=r||i.includes(n.get(e).toLowerCase(),t.toLowerCase())}),r}if("string"==typeof e)return i.includes(n.get(e).toLowerCase(),t.toLowerCase());throw new TypeError("contains: wrong attribute type. Must be string or array.")}},xForm2webForm:function(t,n){var r,o,s,a,_,g=[];if("list-single"===t.attr("type")||"list-multi"===t.attr("type")){for(_=[],s=t.children("value"),r=0;r<s.length;r++)_.push(e(s[r]).text());for(o=t.children("option"),r=0;r<o.length;r++)a=e(o[r]).find("value").text(),g.push(u({value:a,label:e(o[r]).attr("label"),selected:i.startsWith(_,a),required:t.find("required").length}));return l({name:t.attr("var"),label:t.attr("label"),options:g.join(""),multiple:"list-multi"===t.attr("type"),required:t.find("required").length})}return"fixed"===t.attr("type")?e('<p class="form-help">').text(t.find("value").text()):"jid-multi"===t.attr("type")?c({name:t.attr("var"),label:t.attr("label")||"",value:t.find("value").text(),required:t.find("required").length}):"boolean"===t.attr("type")?d({name:t.attr("var"),type:m[t.attr("type")],label:t.attr("label")||"",checked:"1"===t.find("value").text()&&'checked="1"'||"",required:t.find("required").length}):t.attr("type")&&"username"===t.attr("var")?h({domain:" @"+this.domain,name:t.attr("var"),type:m[t.attr("type")],label:t.attr("label")||"",value:t.find("value").text(),required:t.find("required").length}):t.attr("type")?f({name:t.attr("var"),type:m[t.attr("type")],label:t.attr("label")||"",value:t.find("value").text(),required:t.find("required").length}):"ocr"===t.attr("var")?i.reduce(i.map(t.find("uri"),e.proxy(function(e){return p({label:this.$field.attr("label"),name:this.$field.attr("var"),data:this.$stanza.find('data[cid="'+e.textContent.replace(/^cid:/,"")+'"]').text(),type:e.getAttribute("type"),required:this.$field.find("required").length})},{$stanza:n,$field:t})),function(e,t){return e+t},""):void 0}};return b.detectLocale=function(e){var t,n;if(window.navigator.userLanguage&&(t=b.isLocaleAvailable(window.navigator.userLanguage,e)),window.navigator.languages&&!t)for(n=0;n<window.navigator.languages.length&&!t;n++)t=b.isLocaleAvailable(window.navigator.languages[n],e);return window.navigator.browserLanguage&&!t&&(t=b.isLocaleAvailable(window.navigator.browserLanguage,e)),window.navigator.language&&!t&&(t=b.isLocaleAvailable(window.navigator.language,e)),window.navigator.systemLanguage&&!t&&(t=b.isLocaleAvailable(window.navigator.systemLanguage,e)),t||"en"},b.isConverseLocale=function(e){return!!i.isString(e)&&i.includes(i.keys(r||{}),e)},b.isMomentLocale=function(e){return!!i.isString(e)&&i.includes(o.locales(),e)},b.getLocale=function(e,t){return i.isString(e)&&("en"===e||t(e))?e:b.detectLocale(t)||"en"},b.isOfType=function(e,t){return t.get("type")==e},b.isInstance=function(e,t){return t instanceof e},b.getAttribute=function(e,t){return t.get(e)},b.contains.not=function(e,t){return function(n){return!b.contains(e,t)(n)}},b.createElementsFromString=function(e,t){var n,i=document.createDocumentFragment(),r=document.createElement("body");for(r.innerHTML=t;n=r.firstChild;)i.appendChild(n);e.appendChild(i),i=r=null},b.isPersistableModel=function(e){return e.collection&&e.collection.browserStorage},b.safeSave=function(e,t){b.isPersistableModel(e)?e.save(t):e.set(t)},b}),function(e,t){if("function"==typeof define&&define.amd)define("pluggable",["exports","lodash"],t);else if("undefined"!=typeof exports)t(exports,require("lodash"));else{var n={exports:{}};t(n.exports,e._),e.pluggable=n.exports}}(this,function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){this.name=t,this.plugged=e,"undefined"==typeof this.plugged.__super__?this.plugged.__super__={}:"string"==typeof this.plugged.__super__&&(this.plugged.__super__={__string__:this.plugged.__super__}),this.plugged.__super__[t]=this.plugged,this.plugins={},this.initialized_plugins=[]}function r(e,t,n){"undefined"==typeof n&&(n="pluginSocket"),"undefined"==typeof t&&(t="plugged");var r={};return r[n]=new i(e,t),o.extend(e,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.enable=void 0;var o=n(t),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o.extend(i.prototype,{wrappedOverride:function(e,t,n,i){return"function"==typeof n&&("undefined"==typeof this.__super__&&(this.__super__=i),this.__super__[e]=n.bind(this)),t.apply(this,o.drop(arguments,4))},_overrideAttribute:function(e,t){var n=t.overrides[e];if("function"==typeof n){var i={};i[this.name]=this.plugged;var r=o.partial(this.wrappedOverride,e,n,this.plugged[e],i);this.plugged[e]=r}else this.plugged[e]=n},_extendObject:function(e,t){e.prototype.__super__||(e.prototype.__super__={},e.prototype.__super__[this.name]=this.plugged);var n=this;o.each(t,function(t,i){if("events"===i)e.prototype[i]=o.extend(t,e.prototype[i]);else if("function"==typeof t){var r={};r[n.name]=n.plugged;var s=o.partial(n.wrappedOverride,i,t,e.prototype[i],r);e.prototype[i]=s}else e.prototype[i]=t})},loadOptionalDependencies:function(e){var t=this;o.each(e.optional_dependencies,function(n){var i=t.plugins[n];if(i){if(o.includes(i.optional_dependencies,e.__name__))throw'Found a circular dependency between the plugins "'+e.__name__+'" and "'+n+'"';t.initializePlugin(i)}else t.throwUndefinedDependencyError('Could not find optional dependency "'+n+'" for the plugin "'+e.__name__+"\". If it's needed, make sure it's loaded by require.js")})},throwUndefinedDependencyError:function(e){if(this.plugged.strict_plugin_dependencies)throw e;return void console.log(e)},applyOverrides:function(e){var t=this;o.each(Object.keys(e.overrides||{}),function(n){var i=e.overrides[n];"object"===("undefined"==typeof i?"undefined":s(i))?"undefined"==typeof t.plugged[n]?t.throwUndefinedDependencyError('Error: Plugin "'+e.__name__+'" tried to override '+n+" but it's not found."):t._extendObject(t.plugged[n],i):t._overrideAttribute(n,e)})},initializePlugin:function(e){o.includes(o.keys(this.allowed_plugins),e.__name__)&&(o.includes(this.initialized_plugins,e.__name__)||(o.extend(e,this.properties),e.optional_dependencies&&this.loadOptionalDependencies(e),this.applyOverrides(e),"function"==typeof e.initialize&&e.initialize.bind(e)(this),this.initialized_plugins.push(e.__name__)))},registerPlugin:function(e,t){if(e in this.plugins)throw new Error("Error: Plugin name "+e+" is already taken");t.__name__=e,this.plugins[e]=t},initializePlugins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o.size(this.plugins)&&(this.properties=e,this.allowed_plugins=o.pickBy(this.plugins,function(e,i){return(!t.length||t.length&&o.includes(t,i))&&!o.includes(n,i)}),o.each(o.values(this.allowed_plugins),this.initializePlugin.bind(this)))}}),e.enable=r,e.default={enable:r}}),define("underscore",["lodash"],function(e){return e.noConflict()}),function(e){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(e){}e(t,exports,i,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,i){var r=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,r){return n[t](this[i],u(e,this),r)};case 4:return function(e,r,o){return n[t](this[i],u(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},a=function(e,t,i){n.each(t,function(t,r){n[r]&&(e.prototype[r]=s(t,r,i))})},u=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?l(e):n.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},d=/\s+/,h=function(e,t,i,r,o){var s,a=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=n.keys(i);a<s.length;a++)t=h(e,t,s[a],i[s[a]],o)}else if(i&&d.test(i))for(s=i.split(d);a<s.length;a++)t=e(t,s[a],r,o);else t=e(t,i,r,o);return t};c.on=function(e,t,n){return f(this,e,t,n)};var f=function(e,t,n,i,r){if(e._events=h(p,e._events||{},t,n,{context:i,ctx:e,listening:r}),r){var o=e._listeners||(e._listeners={});o[r.id]=r}return e};c.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[r];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[r]={obj:e,objId:r,id:a,listeningTo:o,count:0}}return f(e,t,i,this,s),this};var p=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:o,ctx:o||s,listening:a})}return e};c.off=function(e,t,n){return this._events?(this._events=h(m,this._events,e,t,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var o=e?[e._listenId]:n.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(t,i,this)}return this};var m=function(e,t,i,r){if(e){var o,s=0,a=r.context,u=r.listeners;if(t||i||a){for(var l=t?[t]:n.keys(e);s<l.length;s++){t=l[s];var c=e[t];if(!c)break;for(var d=[],h=0;h<c.length;h++){var f=c[h];i&&i!==f.callback&&i!==f.callback._callback||a&&a!==f.context?d.push(f):(o=f.listening,o&&0===--o.count&&(delete u[o.id],delete o.listeningTo[o.objId]))}d.length?e[t]=d:delete e[t]}return e}for(var p=n.keys(u);s<p.length;s++)o=u[p[s]],delete u[o.id],delete o.listeningTo[o.objId]}};c.once=function(e,t,i){var r=h(_,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(r,t,i)},c.listenToOnce=function(e,t,i){var r=h(_,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,r)};var _=function(e,t,i,r){if(i){var o=e[t]=n.once(function(){r(t,o),i.apply(this,arguments)});o._callback=i}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return h(g,this._events,e,void 0,n),this};var g=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&v(r,i),o&&v(o,[t].concat(i))}return e},v=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};c.bind=c.on,c.unbind=c.off,n.extend(t,c);var y=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){
return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,s=i.silent,a=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,d=this._previousAttributes;for(var h in r)t=r[h],n.isEqual(l[h],t)||a.push(h),n.isEqual(d[h],t)?delete c[h]:c[h]=t,o?delete l[h]:l[h]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=i);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,l[a[f]],i)}if(u)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,i={};for(var r in e){var o=e[r];n.isEqual(t[r],o)||(i[r]=o)}return!!n.size(i)&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;return!!t.set(r,e)&&(i&&i.call(e.context,t,n,e),void t.trigger("sync",t,n,e))},Y(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0,parse:!0},i);var o=i.wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var s=this,a=i.success,u=this.attributes;i.success=function(e){s.attributes=u;var t=i.parse?s.parse(e,i):e;return o&&(t=n.extend({},r,t)),!(t&&!s.set(t,i))&&(a&&a.call(i.context,s,e,i),void s.trigger("sync",s,e,i))},Y(this,i),r&&o&&(this.attributes=n.extend({},u,r));var l=this.isNew()?"create":i.patch?"patch":"update";"patch"!==l||i.attrs||(i.attrs=r);var c=this.sync(l,this,i);return this.attributes=u,c},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&o(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(Y(this,e),s=this.sync("delete",this,e)),r||o(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||H();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(y,b,"attributes");var w=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},x={add:!0,remove:!0,merge:!0},S={add:!0,remove:!1},C=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),o=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;i<o;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+o+n]=r[i]};n.extend(w.prototype,c,{model:y,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,S))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),i?r[0]:r},set:function(e,t){if(null!=e){t=n.extend({},x,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,s,a=[],u=[],l=[],c=[],d={},h=t.add,f=t.merge,p=t.remove,m=!1,_=this.comparator&&null==r&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){o=e[s];var v=this.get(o);if(v){if(f&&o!==v){var y=this._isModel(o)?o.attributes:o;t.parse&&(y=v.parse(y,t)),v.set(y,t),l.push(v),_&&!m&&(m=v.hasChanged(g))}d[v.cid]||(d[v.cid]=!0,a.push(v)),e[s]=v}else h&&(o=e[s]=this._prepareModel(o,t),o&&(u.push(o),this._addReference(o,t),d[o.cid]=!0,a.push(o)))}if(p){for(s=0;s<this.length;s++)o=this.models[s],d[o.cid]||c.push(o);c.length&&this._removeModels(c,t)}var b=!1,w=!_&&h&&p;if(a.length&&w?(b=this.length!==a.length||n.some(this.models,function(e,t){return e!==a[t]}),this.models.length=0,C(this.models,a,0),this.length=this.models.length):u.length&&(_&&(m=!0),C(this.models,u,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(s=0;s<u.length;s++)null!=r&&(t.index=r+s),o=u[s],o.trigger("add",o,this,t);(m||b)&&this.trigger("sort",this,t),(u.length||c.length||l.length)&&(t.changes={added:u,removed:c,merged:l},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},Y(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var i=t.wait;if(e=this._prepareModel(e,t),!e)return!1;i||this.add(e,t);var r=this,o=t.success;return t.success=function(e,t,n){i&&r.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof y},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var k={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(w,k,"models");var A=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,M)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,M=["model","collection","el","id","attributes","className","tagName","events"];n.extend(A.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match(T);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,r){var o=N[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||H()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var u=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,u&&u.call(r.context,e,t,n)};var l=r.xhr=t.ajax(n.extend(s,r));return i.trigger("request",i,l,r),l};var N={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,R=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,c,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,function(n){var s=o._extractParameters(e,n);o.execute(r,s,i)!==!1&&(o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),t.history.trigger("route",o,i,s))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(L,"\\$&").replace(j,"(?:$1)?").replace(D,function(e,t){return t?e:"([^/?]+)"}).replace(R,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var O=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,q=/#.*$/;O.started=!1,n.extend(O.prototype,c,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(I,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");if(O.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(F,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!O.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(q,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new O;var P=function(e,t){var i,r=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};y.extend=w.extend=E.extend=A.extend=O.extend=P;var H=function(){throw new Error('A "url" property or function must be specified')},Y=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t}),define("backbone.noconflict",["backbone"],function(e){return e.noConflict()}),function(e,t){"function"==typeof define&&define.amd?define("strophe.disco",["strophe"],function(e){return t(e.Strophe,e.$build,e.$iq,e.$msg,e.$pres),e}):t(e.Strophe,e.$build,e.$iq,e.$msg,e.$pres)}(this,function(e,t,n,i,r){e.addConnectionPlugin("disco",{_connection:null,_identities:[],_features:[],_items:[],init:function(t){this._connection=t,this._identities=[],this._features=[],this._items=[],t.addHandler(this._onDiscoInfo.bind(this),e.NS.DISCO_INFO,"iq","get",null,null),t.addHandler(this._onDiscoItems.bind(this),e.NS.DISCO_ITEMS,"iq","get",null,null)},addIdentity:function(e,t,n,i){for(var r=0;r<this._identities.length;r++)if(this._identities[r].category==e&&this._identities[r].type==t&&this._identities[r].name==n&&this._identities[r].lang==i)return!1;return this._identities.push({category:e,type:t,name:n,lang:i}),!0},addFeature:function(e){for(var t=0;t<this._features.length;t++)if(this._features[t]==e)return!1;return this._features.push(e),!0},removeFeature:function(e){for(var t=0;t<this._features.length;t++)if(this._features[t]===e)return this._features.splice(t,1),!0;return!1},addItem:function(e,t,n,i){return!(n&&!i)&&(this._items.push({jid:e,name:t,node:n,call_back:i}),!0)},info:function(t,i,r,o,s){var a={xmlns:e.NS.DISCO_INFO};i&&(a.node=i);var u=n({from:this._connection.jid,to:t,type:"get"}).c("query",a);this._connection.sendIQ(u,r,o,s)},items:function(t,i,r,o,s){var a={xmlns:e.NS.DISCO_ITEMS};i&&(a.node=i);var u=n({from:this._connection.jid,to:t,type:"get"}).c("query",a);this._connection.sendIQ(u,r,o,s)},_buildIQResult:function(e,t){var i=e.getAttribute("id"),r=e.getAttribute("from"),o=n({type:"result",id:i});return null!==r&&o.attrs({to:r}),o.c("query",t)},_onDiscoInfo:function(t){var n,i=t.getElementsByTagName("query")[0].getAttribute("node"),r={xmlns:e.NS.DISCO_INFO};i&&(r.node=i);var o=this._buildIQResult(t,r);for(n=0;n<this._identities.length;n++)r={category:this._identities[n].category,type:this._identities[n].type},this._identities[n].name&&(r.name=this._identities[n].name),this._identities[n].lang&&(r["xml:lang"]=this._identities[n].lang),o.c("identity",r).up();for(n=0;n<this._features.length;n++)o.c("feature",{var:this._features[n]}).up();return this._connection.send(o.tree()),!0},_onDiscoItems:function(t){var n,i,r={xmlns:e.NS.DISCO_ITEMS},o=t.getElementsByTagName("query")[0].getAttribute("node");if(o){for(r.node=o,n=[],i=0;i<this._items.length;i++)if(this._items[i].node==o){n=this._items[i].call_back(t);break}}else n=this._items;var s=this._buildIQResult(t,r);for(i=0;i<n.length;i++){var a={jid:n[i].jid};n[i].name&&(a.name=n[i].name),n[i].node&&(a.node=n[i].node),s.c("item",a).up()}return this._connection.send(s.tree()),!0}})}),function(e,t){"object"==typeof exports&&"function"==typeof require?module.exports=t(require("backbone"),require("underscore")):"function"==typeof define&&define.amd?define("backbone.browserStorage",["backbone","underscore"],function(n,i){return t(n||e.Backbone,i||e._)}):t(Backbone,_)}(this,function(e,t){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function i(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}function r(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function o(e,t){for(var n in t)e[n]=t[n];return e}function s(e,n,i){var r;if("local"===i&&!window.localStorage)throw"Backbone.browserStorage: Environment does not support localStorage.";if("session"===i&&!window.sessionStorage)throw"Backbone.browserStorage: Environment does not support sessionStorage.";if(this.name=e,this.serializer=n||{serialize:function(e){return t.isObject(e)?JSON.stringify(e):e},deserialize:function(e){return e&&JSON.parse(e)}},"session"===i)this.store=window.sessionStorage;else{if("local"!==i)throw"Backbone.browserStorage: No storage type was specified";this.store=window.localStorage}r=this.store.getItem(this.name),this.records=r&&r.split(",")||[]}e.BrowserStorage={local:function(e,t){return s.bind(this,e,t,"local")()},session:function(e,t){return s.bind(this,e,t,"session")()}};var a={save:function(){this.store.setItem(this.name,this.records.join(","))},create:function(e){return e.id||(e.id=i(),e.set(e.idAttribute,e.id)),this.store.setItem(this._itemName(e.id),this.serializer.serialize(e)),this.records.push(e.id.toString()),this.save(),this.find(e)!==!1},update:function(e){this.store.setItem(this._itemName(e.id),this.serializer.serialize(e));var t=e.id.toString();return r(this.records,t)||(this.records.push(t),this.save()),this.find(e)!==!1},find:function(e){return this.serializer.deserialize(this.store.getItem(this._itemName(e.id)))},findAll:function(){for(var e,t,n=[],i=0;i<this.records.length;i++)e=this.records[i],t=this.serializer.deserialize(this.store.getItem(this._itemName(e))),null!==t&&n.push(t);return n},destroy:function(e){this.store.removeItem(this._itemName(e.id));for(var t=e.id.toString(),n=0;n<this.records.length;n++)this.records[n]===t&&this.records.splice(n,1);return this.save(),e},browserStorage:function(){return{session:sessionStorage,local:localStorage}},_clear:function(){var e,t=this.store;e=new RegExp("^"+this.name.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"-"),t.removeItem(this.name);for(var n in t)e.test(n)&&t.removeItem(n);this.records.length=0},_storageSize:function(){return this.store.length},_itemName:function(e){return this.name+"-"+e}};return o(e.BrowserStorage.session.prototype,a),o(e.BrowserStorage.local.prototype,a),e.BrowserStorage.sync=e.localSync=function(t,n,i){var r,o,s=n.browserStorage||n.collection.browserStorage,a=e.$?e.$.Deferred&&e.$.Deferred():e.Deferred&&e.Deferred();try{switch(t){case"read":r=void 0!==n.id?s.find(n):s.findAll();break;case"create":r=s.create(n);break;case"update":r=s.update(n);break;case"delete":r=s.destroy(n)}}catch(e){o=22===e.code&&0===s._storageSize()?"Private browsing is unsupported":e.message}return r?(i&&i.success&&("0.9.10"===e.VERSION?i.success(n,r,i):i.success(r)),a&&a.resolve(r)):(o=o?o:"Record Not Found",i&&i.error&&("0.9.10"===e.VERSION?i.error(n,o,i):i.error(o)),a&&a.reject(o)),i&&i.complete&&i.complete(r),a&&a.promise()},e.ajaxSync=e.sync,e.getSyncMethod=function(t){return t.browserStorage||t.collection&&t.collection.browserStorage?e.localSync:e.ajaxSync},e.sync=function(t,n,i){return e.getSyncMethod(n).apply(this,[t,n,i])},e.BrowserStorage}),function(e,t){"function"==typeof define&&define.amd?define("backbone.overview",["underscore","backbone"],t):t(_||e._,Backbone||e.Backbone)}(this,function(e,t){"use strict";var n=t.Overview=function(n){var i=this;this.views={},this.keys=e.partial(e.keys,this.views),this.getAll=e.partial(e.identity,this.views),this.get=function(e){return i.views[e]},this.xget=function(t){return e.filter(i.views,function(e,n){return n!==t})},this.add=function(e,t){return i.views[e]=t,t},this.remove=function(e){"undefined"==typeof e&&(new t.View).remove.apply(i);var n=i.views[e];if(n)return delete i.views[e],n.remove(),n},this.removeAll=function(){return e.each(e.keys(i.views),i.remove),i},t.View.apply(this,Array.prototype.slice.apply(arguments))},i=["all","any","chain","collect","contains","detect","difference","drop","each","every","filter","find","first","foldl","foldr","forEach","head","include","indexOf","initial","inject","invoke","isEmpty","last","lastIndexOf","map","max","min","reduce","reduceRight","reject","rest","sample","select","shuffle","size","some","sortBy","tail","take","toArray","without"];return e.each(i,function(t){n.prototype[t]=function(){var n=Array.prototype.slice.call(arguments);return n.unshift(this.views),e[t].apply(e,n)}}),e.extend(n.prototype,t.View.prototype),n.extend=t.View.extend,t.Overview}),function(e,t){define("converse-core",["sizzle","jquery.noconflict","lodash.noconflict","lodash.converter","polyfill","utils","moment_with_locales","strophe","pluggable","backbone.noconflict","strophe.disco","backbone.browserStorage","backbone.overview"],t)}(this,function(e,t,n,i,r,o,s,a,u,l){var c=i(n.runInContext()),d=a.$build,h=a.$iq,f=a.$msg,p=a.$pres,m=a.SHA1.b64_sha1;a=a.Strophe,n.templateSettings={escape:/\{\{\{([\s\S]+?)\}\}\}/g,evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g};var _={};_.templates={},n.extend(_,l.Events),_.promises={cachedRoster:new t.Deferred,chatBoxesFetched:new t.Deferred,connected:new t.Deferred,pluginsInitialized:new t.Deferred,roster:new t.Deferred,rosterContactsFetched:new t.Deferred,rosterGroupsFetched:new t.Deferred,rosterInitialized:new t.Deferred,statusInitialized:new t.Deferred},_.emit=function(e){_.trigger.apply(this,arguments);var t=_.promises[e];n.isUndefined(t)||t.resolve()},_.core_plugins=["converse-bookmarks","converse-chatview","converse-controlbox","converse-core","converse-dragresize","converse-headline","converse-mam","converse-minimize","converse-muc","converse-notification","converse-otr","converse-ping","converse-register","converse-roomslist","converse-rosterview","converse-vcard"],u.enable(_,"_converse","pluggable"),_.STATUS_WEIGHTS={offline:6,unavailable:5,xa:4,away:3,dnd:2,chat:1,online:1},_.PRETTY_CHAT_STATUS={offline:"Offline",unavailable:"Unavailable",xa:"Extended Away",away:"Away",dnd:"Do not disturb",chat:"Chattty",online:"Online"},_.ANONYMOUS="anonymous",_.CLOSED="closed",_.EXTERNAL="external",_.LOGIN="login",_.LOGOUT="logout",_.OPENED="opened",_.PREBIND="prebind";var g={0:"ERROR",1:"CONNECTING",2:"CONNFAIL",3:"AUTHENTICATING",4:"AUTHFAIL",5:"CONNECTED",6:"DISCONNECTED",7:"DISCONNECTING",8:"ATTACHED",9:"REDIRECT"},v="image/png",y="iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAIAAABt+uBvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gwHCy455JBsggAABkJJREFUeNrtnM1PE1sUwHvvTD8otWLHST/Gimi1CEgr6M6FEWuIBo2pujDVsNDEP8GN/4MbN7oxrlipG2OCgZgYlxAbkRYw1KqkIDRCSkM7nXvvW8x7vjyNeQ9m7p1p3z1LQk/v/Dhz7vkEXL161cHl9wI5Ag6IA+KAOCAOiAPigDggLhwQB2S+iNZ+PcYY/SWEEP2HAAAIoSAIoihCCP+ngDDGtVotGAz29/cfOXJEUZSOjg6n06lp2sbGRqlUWlhYyGazS0tLbrdbEASrzgksyeYJId3d3el0uqenRxRFAAAA4KdfIIRgjD9+/Pj8+fOpqSndslofEIQwHA6Pjo4mEon//qmFhYXHjx8vLi4ihBgDEnp7e9l8E0Jo165dQ0NDd+/eDYVC2/qsJElDQ0OEkKWlpa2tLZamxAhQo9EIBoOjo6MXL17csZLe3l5FUT59+lQul5l5JRaAVFWNRqN37tw5ceKEQVWRSOTw4cOFQuHbt2+iKLYCIISQLMu3b99OJpOmKAwEAgcPHszn8+vr6wzsiG6UQQhxuVyXLl0aGBgwUW0sFstkMl6v90fo1KyAMMYDAwPnzp0zXfPg4GAqlWo0Gk0MiBAiy/L58+edTqf5Aa4onj59OhaLYYybFRCEMBaL0fNxBw4cSCQStN0QRUBut3t4eJjq6U+dOiVJElVPRBFQIBDo6+ujCqirqyscDlONGykC2lYyYSR6pBoQQapHZwAoHo/TuARYAOrs7GQASFEUqn6aIiBJkhgA6ujooFpUo6iaTa7koFwnaoWadLNe81tbWwzoaJrWrICWl5cZAFpbW6OabVAEtLi4yABQsVjUNK0pAWWzWQaAcrlcswKanZ1VVZUqHYRQEwOq1Wpv3ryhCmh6erpcLjdrNl+v1ycnJ+l5UELI27dvv3//3qxxEADgy5cvExMT9Mznw4cPtFtAdAPFarU6Pj5eKpVM17yxsfHy5cvV1VXazXu62gVBKBQKT58+rdVqJqrFGL948eLdu3dU8/g/H4FBUaJYLAqC0NPTY9brMD4+PjY25mDSracOCABACJmZmXE6nUePHjWu8NWrV48ePSKEsGlAs7Agfd5nenq6Wq0mk0kjDzY2NvbkyRMIIbP2PLvhBUEQ8vl8NpuNx+M+n29bzhVjvLKycv/+/YmJCcazQuwA6YzW1tYmJyf1SY+2trZ/rRk1Go1SqfT69esHDx4UCgVmNaa/zZ/9ABUhRFXVYDB48uTJeDweiUQkSfL7/T9MA2NcqVTK5fLy8vL8/PzU1FSxWHS5XJaM4wGr9sUwxqqqer3eUCgkSZJuUBBCfTRvc3OzXC6vrKxUKhWn02nhCJ5lM4oQQo/HgxD6+vXr58+fHf8sDOp+HQDg8XgclorFU676dKLlo6yWRdItIBwQB8QBcUCtfosRQjRNQwhhjPUC4w46WXryBSHU1zgEQWBz99EFhDGu1+t+v//48ePxeFxRlD179ng8nh0Efgiher2+vr6ur3HMzMysrq7uTJVdACGEurq6Ll++nEgkPB7Pj9jPoDHqOxyqqubz+WfPnuVyuV9XPeyeagAAAoHArVu3BgcHab8CuVzu4cOHpVKJUnfA5GweY+xyuc6cOXPv3r1IJMLAR8iyPDw8XK/Xi8Wiqqqmm5KZgBBC7e3tN27cuHbtGuPVpf7+/lAoNDs7W61WzfVKpgHSSzw3b95MpVKW3MfRaDQSiczNzVUqFRMZmQOIEOL1eq9fv3727FlL1t50URRFluX5+flqtWpWEGAOIFEUU6nUlStXLKSjy759+xwOx9zcnKZpphzGHMzhcDiTydgk9r1w4YIp7RPTAAmCkMlk2FeLf/tIEKbTab/fbwtAhJBoNGrutpNx6e7uPnTokC1eMU3T0um0DZPMkZER6wERQnw+n/FFSxpy7Nix3bt3WwwIIcRgIWnHkkwmjecfRgGx7DtuV/r6+iwGhDHev3+/bQF1dnYaH6E2CkiWZdsC2rt3r8WAHA5HW1ubbQGZcjajgOwTH/4qNko1Wlg4IA6IA+KAOKBWBUQIsfNojyliKIoRRfH9+/dut9umf3wzpoUNNQ4BAJubmwz+ic+OxefzWWlBhJD29nbug7iT5sIBcUAcEAfEAXFAHBAHxOVn+QMrmWpuPZx12gAAAABJRU5ErkJggg==";return _.log=function(e,t){var i;i=n.isUndefined(console)||n.isUndefined(console.log)?{log:n.noop,error:n.noop}:console,t===a.LogLevel.ERROR?i.log("ERROR: "+e):t===a.LogLevel.WARN?i.log("WARNING: "+e):t===a.LogLevel.FATAL?i.log("FATAL: "+e):_.debug&&(t===a.LogLevel.DEBUG?i.log("DEBUG: "+e):t===a.LogLevel.INFO?i.log("INFO: "+e):i.log(e))},_.initialize=function(i,r){"use strict";i=n.isUndefined(i)?{}:i;var u=new t.Deferred;n.isUndefined(_.chatboxes)||(_.connection.reset(),_.off(),_.stopListening(),_._tearDown());var c;"onpagehide"in window?c="pagehide":"onbeforeunload"in window?c="beforeunload":"onunload"in window&&(c="unload"),a.log=function(e,t){_.log(e+" "+t,e)},a.error=function(e){_.log(e,a.LogLevel.ERROR)},a.addNamespace("CARBONS","urn:xmpp:carbons:2"),a.addNamespace("CHATSTATES","http://jabber.org/protocol/chatstates"),a.addNamespace("CSI","urn:xmpp:csi:0"),a.addNamespace("DELAY","urn:xmpp:delay"),a.addNamespace("HINTS","urn:xmpp:hints"),a.addNamespace("MAM","urn:xmpp:mam:2"),a.addNamespace("NICK","http://jabber.org/protocol/nick"),a.addNamespace("PUBSUB","http://jabber.org/protocol/pubsub"),a.addNamespace("ROSTERX","http://jabber.org/protocol/rosterx"),a.addNamespace("RSM","http://jabber.org/protocol/rsm"),a.addNamespace("XFORM","jabber:x:data"),this.TIMEOUTS={PAUSED:1e4,INACTIVE:9e4},this.locale=o.getLocale(i.i18n,o.isConverseLocale),s.locale||(s.locale=s.lang),s.locale(o.getLocale(i.i18n,o.isMomentLocale));var f=_.__=o.__.bind(_);if(_.___=o.___,this.INACTIVE="inactive",this.ACTIVE="active",this.COMPOSING="composing",this.PAUSED="paused",this.GONE="gone",this.default_settings={allow_contact_requests:!0,allow_non_roster_messaging:!1,animate:!0,authentication:"login",auto_away:0,auto_login:!1,auto_reconnect:!1,auto_subscribe:!1,auto_xa:0,blacklisted_plugins:[],bosh_service_url:void 0,connection_options:{},credentials_url:null,csi_waiting_time:0,debug:!1,default_state:"online",expose_rid_and_sid:!1,filter_by_resource:!1,forward_messages:!1,hide_offline_users:!1,include_offline_state:!1,jid:void 0,keepalive:!0,locked_domain:void 0,message_carbons:!0,message_storage:"session",password:void 0,prebind_url:null,priority:0,registration_domain:"",rid:void 0,roster_groups:!0,
show_only_online_users:!1,show_send_button:!1,sid:void 0,storage:"session",strict_plugin_dependencies:!1,synchronize_availability:!0,websocket_url:void 0,whitelisted_plugins:[],xhr_custom_status:!1,xhr_custom_status_url:""},n.assignIn(this,this.default_settings),n.assignIn(this,n.pick(i,n.keys(this.default_settings))),this.authentication===_.ANONYMOUS&&this.auto_login&&!this.jid)throw new Error("Config Error: you need to provide the server's domain via the 'jid' option when using anonymous authentication with auto_login.");return t.fx.off=!this.animate,this.callback=r||n.noop,this.send_initial_presence=!0,this.msg_counter=0,this.user_settings=i,this.getViewForChatBox=function(e){if(e)return _.chatboxviews.get(e.get("id"))},this.generateResource=function(){return"/converse.js-"+Math.floor(139749825*Math.random()).toString()},this.sendCSI=function(e){_.connection.send(d(e,{xmlns:a.NS.CSI})),_.inactive=e===_.INACTIVE},this.onUserActivity=function(){_.idle_seconds>0&&(_.idle_seconds=0),_.connection.authenticated&&(_.inactive&&_.sendCSI(_.ACTIVE),_.auto_changed_status===!0&&(_.auto_changed_status=!1,_.xmppstatus.setStatus(_.default_state)))},this.onEverySecond=function(){if(_.connection.authenticated){var e=_.xmppstatus.getStatus();_.idle_seconds++,_.csi_waiting_time>0&&_.idle_seconds>_.csi_waiting_time&&!_.inactive&&_.sendCSI(_.INACTIVE),_.auto_away>0&&_.idle_seconds>_.auto_away&&"away"!==e&&"xa"!==e&&"dnd"!==e?(_.auto_changed_status=!0,_.xmppstatus.setStatus("away")):_.auto_xa>0&&_.idle_seconds>_.auto_xa&&"xa"!==e&&"dnd"!==e&&(_.auto_changed_status=!0,_.xmppstatus.setStatus("xa"))}},this.registerIntervalHandler=function(){_.auto_away<1&&_.auto_xa<1&&_.csi_waiting_time<1||(_.idle_seconds=0,_.auto_changed_status=!1,window.addEventListener("click",_.onUserActivity),window.addEventListener("focus",_.onUserActivity),window.addEventListener("keypress",_.onUserActivity),window.addEventListener("mousemove",_.onUserActivity),window.addEventListener(c,_.onUserActivity),_.everySecondTrigger=window.setInterval(_.onEverySecond,1e3))},this.giveFeedback=function(e,t,i){var r=document.querySelectorAll(".conn-feedback");n.forEach(r,function(n){n.classList.add("conn-feedback"),n.textContent=e,t?n.classList.add(t):n.classList.remove("error")}),_.emit("feedback",{klass:t,message:i,subject:e})},this.rejectPresenceSubscription=function(e,t){var n=p({to:e,type:"unsubscribed"});t&&""!==t&&n.c("status").t(t),_.connection.send(n)},this.reconnect=n.debounce(function(){_.log("RECONNECTING"),_.log("The connection has dropped, attempting to reconnect."),_.giveFeedback(f("Reconnecting"),"warn",f("The connection has dropped, attempting to reconnect.")),_.connection.reconnecting=!0,_._tearDown(),_.logIn(null,!0)},3e3,{leading:!0}),this.disconnect=function(){_.log("DISCONNECTED"),delete _.connection.reconnecting,_.connection.reset(),_._tearDown(),_.chatboxviews.closeAllChatBoxes(),_.emit("disconnected")},this.onDisconnected=function(){return _.disconnection_cause===a.Status.AUTHFAIL?_.credentials_url&&_.auto_reconnect?(_.emit("will-reconnect"),_.reconnect()):_.disconnect():_.disconnection_cause!==_.LOGOUT&&"host-unknown"!==_.disconnection_reason&&_.auto_reconnect?(_.emit("will-reconnect"),void _.reconnect()):_.disconnect()},this.setDisconnectionCause=function(e,t,i){n.isUndefined(e)?(delete _.disconnection_cause,delete _.disconnection_reason):(n.isUndefined(_.disconnection_cause)||i)&&(_.disconnection_cause=e,_.disconnection_reason=t)},this.onConnectStatusChanged=function(e,t){_.log("Status changed to: "+g[e]),e===a.Status.CONNECTED||e===a.Status.ATTACHED?(_.send_initial_presence=!0,_.setDisconnectionCause(),_.connection.reconnecting?(_.log(e===a.Status.CONNECTED?"Reconnected":"Reattached"),_.onConnected(!0)):(_.log(e===a.Status.CONNECTED?"Connected":"Attached"),_.connection.restored&&(_.send_initial_presence=!1),_.onConnected())):e===a.Status.DISCONNECTED?(_.setDisconnectionCause(e,t),_.onDisconnected()):e===a.Status.ERROR?_.giveFeedback(f("Connection error"),"error",f("An error occurred while connecting to the chat server.")):e===a.Status.CONNECTING?_.giveFeedback(f("Connecting")):e===a.Status.AUTHENTICATING?_.giveFeedback(f("Authenticating")):e===a.Status.AUTHFAIL?(_.giveFeedback(f("Authentication Failed"),"error"),_.setDisconnectionCause(e,t,!0),_.onDisconnected()):e===a.Status.CONNFAIL?(_.giveFeedback(f("Connection failed"),"error",f("An error occurred while connecting to the chat server: "+t)),_.setDisconnectionCause(e,t)):e===a.Status.DISCONNECTING&&_.setDisconnectionCause(e,t)},this.incrementMsgCounter=function(){this.msg_counter+=1;var e=this.msg_counter;document.title.search(/^Messages \(\d+\) /)===-1?document.title="Messages ("+e+") "+document.title:document.title=document.title.replace(/^Messages \(\d+\) /,"Messages ("+e+") ")},this.clearMsgCounter=function(){this.msg_counter=0,document.title.search(/^Messages \(\d+\) /)!==-1&&(document.title=document.title.replace(/^Messages \(\d+\) /,""))},this.initStatus=function(){var e=new t.Deferred;this.xmppstatus=new this.XMPPStatus;var n=m("converse.xmppstatus-"+_.bare_jid);return this.xmppstatus.id=n,this.xmppstatus.browserStorage=new l.BrowserStorage[_.storage](n),this.xmppstatus.fetch({success:e.resolve,error:e.resolve}),_.emit("statusInitialized"),e.promise()},this.initSession=function(){this.session=new l.Model;var e=m("converse.bosh-session");this.session.id=e,this.session.browserStorage=new l.BrowserStorage[_.storage](e),this.session.fetch()},this.clearSession=function(){n.isUndefined(this.roster)||this.roster.browserStorage._clear(),!n.isUndefined(this.session)&&this.session.browserStorage&&this.session.browserStorage._clear()},this.logOut=function(){_.chatboxviews.closeAllChatBoxes(),_.clearSession(),_.setDisconnectionCause(_.LOGOUT,void 0,!0),n.isUndefined(_.connection)?_._tearDown():_.connection.disconnect(),_.emit("logout")},this.saveWindowState=function(e,t){var n,i="visible",r="hidden",o={focus:i,focusin:i,pageshow:i,blur:r,focusout:r,pagehide:r};e=e||document.createEvent("Events"),n=e.type in o?o[e.type]:document[t]?"hidden":"visible","visible"===n&&_.clearMsgCounter(),_.windowState=n,_.emit("windowStateChanged",{state:n})},this.registerGlobalEventHandlers=function(){var e="hidden";e in document?document.addEventListener("visibilitychange",n.partial(_.saveWindowState,n,e)):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",n.partial(_.saveWindowState,n,e)):(e="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n.partial(_.saveWindowState,n,e)):(e="msHidden")in document?document.addEventListener("msvisibilitychange",n.partial(_.saveWindowState,n,e)):"onfocusin"in document?document.onfocusin=document.onfocusout=n.partial(_.saveWindowState,n,e):window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n.partial(_.saveWindowState,n,e),void 0!==document[e]&&n.partial(_.saveWindowState,n,e)({type:document[e]?"blur":"focus"})},this.enableCarbons=function(){if(this.message_carbons&&!this.session.get("carbons_enabled")){var e=new a.Builder("iq",{from:this.connection.jid,id:"enablecarbons",type:"set"}).c("enable",{xmlns:a.NS.CARBONS});this.connection.addHandler(function(e){e.querySelectorAll("error").length>0?_.log("An error occured while trying to enable message carbons.",a.LogLevel.ERROR):(this.session.save({carbons_enabled:!0}),_.log("Message carbons have been enabled."))}.bind(this),null,"iq",null,"enablecarbons"),this.connection.send(e)}},this.initRoster=function(){_.roster=new _.RosterContacts,_.roster.browserStorage=new l.BrowserStorage.session(m("converse.contacts-"+_.bare_jid)),_.rostergroups=new _.RosterGroups,_.rostergroups.browserStorage=new l.BrowserStorage.session(m("converse.roster.groups"+_.bare_jid)),_.emit("rosterInitialized")},this.populateRoster=function(){_.rostergroups.fetchRosterGroups().then(function(){_.emit("rosterGroupsFetched"),_.roster.fetchRosterContacts().then(function(){_.emit("rosterContactsFetched"),_.sendInitialPresence()})})},this.unregisterPresenceHandler=function(){n.isUndefined(_.presence_ref)||(_.connection.deleteHandler(_.presence_ref),delete _.presence_ref)},this.registerPresenceHandler=function(){_.unregisterPresenceHandler(),_.presence_ref=_.connection.addHandler(function(e){return _.roster.presenceHandler(e),!0},null,"presence",null)},this.sendInitialPresence=function(){_.send_initial_presence&&_.xmppstatus.sendPresence()},this.onStatusInitialized=function(e){e?_.emit("rosterReadyAfterReconnection"):(_.registerIntervalHandler(),_.initRoster()),_.roster.onConnected(),_.chatboxes.onConnected(),_.populateRoster(),_.registerPresenceHandler(),_.giveFeedback(f("Contacts")),e?_.xmppstatus.sendPresence():(u.resolve(),_.emit("initialized"))},this.setUserJid=function(){_.jid=_.connection.jid,_.bare_jid=a.getBareJidFromJid(_.connection.jid),_.resource=a.getResourceFromJid(_.connection.jid),_.domain=a.getDomainFromJid(_.connection.jid)},this.onConnected=function(e){_.connection.flush(),_.setUserJid(),_.initSession(),_.enableCarbons(),e=!n.isUndefined(_.xmppstatus)&&e,e?(_.onStatusInitialized(!0),_.emit("reconnected")):(_.features=new _.Features,_.initStatus().done(n.partial(_.onStatusInitialized,!1)),_.emit("connected"))},this.RosterContact=l.Model.extend({defaults:{bookmarked:!1,chat_state:void 0,chat_status:"offline",groups:[],image:y,image_type:v,num_unread:0,status:""},initialize:function(e){var t=e.jid,i=a.getBareJidFromJid(t).toLowerCase(),r=a.getResourceFromJid(t);e.jid=i,this.set(n.assignIn({id:i,jid:i,fullname:i,user_id:a.getNodeFromJid(t),resources:r?{resource:0}:{}},e)),this.on("destroy",function(){this.removeFromRoster()}.bind(this)),this.on("change:chat_status",function(e){_.emit("contactStatusChanged",e.attributes)})},subscribe:function(e){this.save("ask","subscribe");var t=p({to:this.get("jid"),type:"subscribe"});e&&""!==e&&t.c("status").t(e).up();var n=_.xmppstatus.get("fullname");return n&&""!==n&&t.c("nick",{xmlns:a.NS.NICK}).t(n).up(),_.connection.send(t),this},ackSubscribe:function(){_.connection.send(p({type:"subscribe",to:this.get("jid")}))},ackUnsubscribe:function(){_.connection.send(p({type:"unsubscribe",to:this.get("jid")})),this.destroy()},unauthorize:function(e){return _.rejectPresenceSubscription(this.get("jid"),e),this},authorize:function(e){var t=p({to:this.get("jid"),type:"subscribed"});return e&&""!==e&&t.c("status").t(e),_.connection.send(t),this},addResource:function(e){var t=e.getAttribute("from"),i=n.propertyOf(e.querySelector("show"))("textContent")||"online",r=a.getResourceFromJid(t),o=n.propertyOf(e.querySelector("priority"))("textContent")||0,u=e.querySelector('delay[xmlns="'+a.NS.DELAY+'"]'),l=n.isNull(u)?s().format():s(u.getAttribute("stamp")).format();o=n.isNaN(parseInt(o,10))?0:parseInt(o,10);var c=n.isObject(this.get("resources"))?this.get("resources"):{};c[r]={priority:o,status:i,timestamp:l};var d={resources:c},h=this.getHighestPriorityResource();return o==h.priority&&l==h.timestamp&&(d.chat_status=i),this.save(d),c},removeResource:function(e){var t=this.get("resources");n.isObject(t)?delete t[e]:t={},this.save({resources:t,chat_status:n.propertyOf(this.getHighestPriorityResource())("status")||"offline"})},getHighestPriorityResource:function(){var e=this.get("resources");if(n.isObject(e)&&n.size(e)){var t=n.flow(n.values,n.partial(n.sortBy,n,["priority","timestamp"]),n.reverse)(e)[0];if(!n.isUndefined(t))return t}},removeFromRoster:function(e){var t=h({type:"set"}).c("query",{xmlns:a.NS.ROSTER}).c("item",{jid:this.get("jid"),subscription:"remove"});return _.connection.sendIQ(t,e,e),this}}),this.RosterContacts=l.Collection.extend({model:_.RosterContact,comparator:function(e,t){var n,i,r=e.get("chat_status")||"offline",o=t.get("chat_status")||"offline";return _.STATUS_WEIGHTS[r]===_.STATUS_WEIGHTS[o]?(n=e.get("fullname").toLowerCase(),i=t.get("fullname").toLowerCase(),n<i?-1:n>i?1:0):_.STATUS_WEIGHTS[r]<_.STATUS_WEIGHTS[o]?-1:1},onConnected:function(){this.registerRosterHandler(),this.registerRosterXHandler()},registerRosterHandler:function(){_.connection.addHandler(_.roster.onRosterPush.bind(_.roster),a.NS.ROSTER,"iq","set")},registerRosterXHandler:function(){var e=0;_.connection.addHandler(function(n){return window.setTimeout(function(){_.connection.flush(),_.roster.subscribeToSuggestedItems.bind(_.roster)(n)},e),e+=250*t(n).find("item").length,!0},a.NS.ROSTERX,"message",null)},fetchRosterContacts:function(){var e=new t.Deferred;return this.fetch({add:!0,success:function(t){0===t.length?(_.send_initial_presence=!0,_.roster.fetchFromServer(e.resolve)):(_.emit("cachedRoster",t),e.resolve())}}),e.promise()},subscribeToSuggestedItems:function(e){return n.each(e.querySelectorAll("item"),function(e){"add"===e.getAttribute("action")&&_.roster.addAndSubscribe(e.getAttribute("jid"),null,_.xmppstatus.get("fullname"))}),!0},isSelf:function(e){return o.isSameBareJID(e,_.connection.jid)},addAndSubscribe:function(e,t,n,i,r){this.addContact(e,t,n,r).done(function(e){e instanceof _.RosterContact&&e.subscribe(i)})},sendContactAddIQ:function(e,t,i,r,o){t=n.isEmpty(t)?e:t;var s=h({type:"set"}).c("query",{xmlns:a.NS.ROSTER}).c("item",{jid:e,name:t});n.each(i,function(e){s.c("group").t(e).up()}),_.connection.sendIQ(s,r,o)},addContact:function(e,i,r,o){var s=new t.Deferred;return r=r||[],i=n.isEmpty(i)?e:i,this.sendContactAddIQ(e,i,r,function(){var t=this.create(n.assignIn({ask:void 0,fullname:i,groups:r,jid:e,requesting:!1,subscription:"none"},o),{sort:!1});s.resolve(t)}.bind(this),function(e){alert(f("Sorry, there was an error while trying to add "+i+" as a contact.")),_.log(e,a.LogLevel.ERROR),s.resolve(e)}),s.promise()},subscribeBack:function(e){var t=this.get(e);t instanceof _.RosterContact?t.authorize().subscribe():this.addContact(e,"",[],{subscription:"from"}).done(function(e){e instanceof _.RosterContact&&e.authorize().subscribe()})},getNumOnlineContacts:function(){var e,t=0,i=["offline","unavailable"],r=this.models,o=r.length;for(_.show_only_online_users&&(i=n.union(i,["dnd","xa","away"])),e=0;e<o;e++)n.includes(i,r[e].get("chat_status"))||t++;return t},onRosterPush:function(t){var i=t.getAttribute("id"),r=t.getAttribute("from");if(r&&""!==r&&a.getBareJidFromJid(r)!==_.bare_jid)return _.connection.send(h({type:"error",id:i,from:_.connection.jid}).c("error",{type:"cancel"}).c("service-unavailable",{xmlns:a.NS.ROSTER})),!0;_.connection.send(h({type:"result",id:i,from:_.connection.jid}));var o=e('query[xmlns="'+a.NS.ROSTER+'"] item',t);return n.each(o,this.updateContact.bind(this)),_.emit("rosterPush",t),!0},fetchFromServer:function(e){var t=h({type:"get",id:_.connection.getUniqueId("roster")}).c("query",{xmlns:a.NS.ROSTER}),n=this;return _.connection.sendIQ(t,function(){n.onReceivedFromServer.apply(n,arguments),e.apply(n,arguments)})},onReceivedFromServer:function(t){var i=e('query[xmlns="'+a.NS.ROSTER+'"] item',t);n.each(i,this.updateContact.bind(this)),_.emit("roster",t)},updateContact:function(e){var t=e.getAttribute("jid");if(!this.isSelf(t)){var i=n.map(e.getElementsByTagName("group"),a.getText),r=this.get(t),o=e.getAttribute("ask"),s=e.getAttribute("subscription");if(r){if("remove"===s)return r.destroy();r.save({subscription:s,ask:o,requesting:null,groups:i})}else{if("none"===s&&null===o||"remove"===s)return;this.create({ask:o,fullname:e.getAttribute("name")||t,groups:i,jid:t,subscription:s},{sort:!1})}}},createRequestingContact:function(e){var t=a.getBareJidFromJid(e.getAttribute("from")),n=e.querySelector('nick[xmlns="'+a.NS.NICK+'"]'),i={jid:t,subscription:"none",ask:null,requesting:!0,fullname:n&&n.textContent||t};this.create(i),_.emit("contactRequest",i)},handleIncomingSubscription:function(e){var t=e.getAttribute("from"),n=a.getBareJidFromJid(t),i=this.get(n);_.allow_contact_requests||_.rejectPresenceSubscription(t,f("This client does not allow presence subscriptions")),_.auto_subscribe?i&&"to"===i.get("subscription")?i.authorize():this.subscribeBack(n):i?"none"!==i.get("subscription")?i.authorize():"subscribe"===i.get("ask")&&i.authorize():i||this.createRequestingContact(e)},presenceHandler:function(t){var i=t.getAttribute("type");if("error"===i)return!0;var r=t.getAttribute("from"),o=a.getBareJidFromJid(r),s=a.getResourceFromJid(r),u=n.propertyOf(t.querySelector("show"))("textContent")||"online",l=n.propertyOf(t.querySelector("status"))("textContent"),c=this.get(o);if(this.isSelf(o))return void(_.connection.jid===r||"unavailable"===i||_.synchronize_availability!==!0&&_.synchronize_availability!==s||(_.xmppstatus.save({status:u}),l&&_.xmppstatus.save({status_message:l})));if(!e('query[xmlns="'+a.NS.MUC+'"]',t).length)if(c&&l!==c.get("status")&&c.save({status:l}),"subscribed"===i&&c)c.ackSubscribe();else if("unsubscribed"===i&&c)c.ackUnsubscribe();else{if("unsubscribe"===i)return;"subscribe"===i?this.handleIncomingSubscription(t):"unavailable"===i&&c?c.removeResource(s):c&&c.addResource(t)}}}),this.RosterGroup=l.Model.extend({initialize:function(e){this.set(n.assignIn({description:f("Click to hide these contacts"),state:_.OPENED},e)),this.contacts=new _.RosterContacts}}),this.RosterGroups=l.Collection.extend({model:_.RosterGroup,fetchRosterGroups:function(){var e=new t.Deferred;return this.fetch({silent:!0,success:e.resolve}),e.promise()}}),this.Message=l.Model.extend({defaults:function(){return{msgid:_.connection.getUniqueId()}}}),this.Messages=l.Collection.extend({model:_.Message,comparator:"time"}),this.ChatBox=l.Model.extend({defaults:{type:"chatbox",bookmarked:!1,chat_state:void 0,num_unread:0,url:""},initialize:function(){this.messages=new _.Messages,this.messages.browserStorage=new l.BrowserStorage[_.message_storage](m("converse.messages"+this.get("jid")+_.bare_jid)),this.save({box_id:m(this.get("jid")),time_opened:this.get("time_opened")||s().valueOf(),user_id:a.getNodeFromJid(this.get("jid"))})},getMessageAttributes:function(e,t,i){t=t||e.querySelector("delay");var r,o,u,l,c,d,h=e.getAttribute("type");r="error"===h?n.propertyOf(e.querySelector("error text"))("textContent"):n.propertyOf(e.querySelector("body"))("textContent");var f=!n.isNull(t),p="groupchat"===h,m=e.getElementsByTagName(_.COMPOSING).length&&_.COMPOSING||e.getElementsByTagName(_.PAUSED).length&&_.PAUSED||e.getElementsByTagName(_.INACTIVE).length&&_.INACTIVE||e.getElementsByTagName(_.ACTIVE).length&&_.ACTIVE||e.getElementsByTagName(_.GONE).length&&_.GONE;return c=p?a.unescapeNode(a.getResourceFromJid(e.getAttribute("from"))):a.getBareJidFromJid(e.getAttribute("from")),f?(o=t.getAttribute("stamp"),u=o):u=s().format(),p&&c===this.get("nick")||!p&&c===_.bare_jid?(l="me",d=_.xmppstatus.get("fullname")||c):(l="them",d=this.get("fullname")||c),{type:h,chat_state:m,delayed:f,fullname:d,message:r||void 0,msgid:e.getAttribute("id"),sender:l,time:u}},createMessage:function(e,t,n){return this.messages.create(this.getMessageAttributes.apply(this,arguments))},newMessageWillBeHidden:function(){return this.get("hidden")||this.get("minimized")||this.isScrolledUp()||"hidden"===_.windowState},incrementUnreadMsgCounter:function(e){n.isNull(e.querySelector("body"))||o.isNewMessage(e)&&this.newMessageWillBeHidden()&&(this.save({num_unread:this.get("num_unread")+1}),_.incrementMsgCounter())},clearUnreadMsgCounter:function(){this.save({num_unread:0})},isScrolledUp:function(){return this.get("scrolled",!0)}}),this.ChatBoxes=l.Collection.extend({comparator:"time_opened",model:function(e,t){return new _.ChatBox(e,t)},registerMessageHandler:function(){_.connection.addHandler(this.onMessage.bind(this),null,"message","chat"),_.connection.addHandler(this.onErrorMessage.bind(this),null,"message","error")},chatBoxMayBeShown:function(e){return!0},onChatBoxesFetched:function(e){var t=this;e.each(function(e){t.chatBoxMayBeShown(e)&&e.trigger("show")}),_.emit("chatBoxesFetched")},onConnected:function(){this.browserStorage=new l.BrowserStorage[_.storage](m("converse.chatboxes-"+_.bare_jid)),this.registerMessageHandler(),this.fetch({add:!0,success:this.onChatBoxesFetched.bind(this)})},onErrorMessage:function(e){var t=a.getBareJidFromJid(e.getAttribute("from"));if(o.isSameBareJID(t,_.bare_jid))return!0;var n=this.getChatBox(t);return!n||(n.createMessage(e,null,e),!0)},onMessage:function(e){var t,i,r,s,u,l,c,d,h,f=e,p=e.getAttribute("from"),m=e.getAttribute("to"),g=a.getResourceFromJid(m),v=!n.isNull(e.querySelector('received[xmlns="'+a.NS.CARBONS+'"]'));if(_.filter_by_resource&&g&&g!==_.resource)return _.log("onMessage: Ignoring incoming message intended for a different resource: "+m,a.LogLevel.INFO),!0;if(o.isHeadlineMessage(e))return _.log("onMessage: Ignoring incoming headline message sent with type 'chat' from JID: "+p,a.LogLevel.INFO),!0;var y=e.querySelector("forwarded");if(!n.isNull(y)){var b=y.querySelector("message"),w=b.getAttribute("from");if(v&&a.getBareJidFromJid(w)!==p)return!0;e=b,i=y.querySelector("delay"),p=e.getAttribute("from"),m=e.getAttribute("to")}return r=a.getBareJidFromJid(p),s=a.getResourceFromJid(p),u=r===_.bare_jid,u?(t=a.getBareJidFromJid(m),h=a.getResourceFromJid(m)):(t=r,h=s),d=this.getChatBox(t,!n.isNull(e.querySelector("body"))),l=e.getAttribute("id"),d&&(c=l&&d.messages.findWhere({msgid:l})||[],n.isEmpty(c)&&(d.incrementUnreadMsgCounter(f),d.createMessage(e,i,f))),_.emit("message",{stanza:f,chatbox:d}),!0},createChatBox:function(e,t){var i=a.getBareJidFromJid(e),r={},o=_.roster.get(i);if(n.isUndefined(o)){if(!_.allow_non_roster_messaging)return _.connection.send(p({type:"subscribe",to:i})),void _.log("Could not get roster item for JID "+i+" and allow_non_roster_messaging is set to false",a.LogLevel.ERROR)}else r={fullname:n.isEmpty(o.get("fullname"))?e:o.get("fullname"),image_type:o.get("image_type"),image:o.get("image"),url:o.get("url")};return this.create(n.assignIn({id:i,jid:i,fullname:e,image_type:v,image:y,url:""},r,t||{}))},getChatBox:function(e,t,n){e=e.toLowerCase();var i=this.get(a.getBareJidFromJid(e));return!i&&t&&(i=this.createChatBox(e,n)),i}}),this.ChatBoxViews=l.Overview.extend({initialize:function(){this.model.on("add",this.onChatBoxAdded,this),this.model.on("destroy",this.removeChat,this)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=document.querySelector("#conversejs");n.isNull(e)&&(e=document.createElement("div"),e.setAttribute("id","conversejs"),document.querySelector("body").appendChild(e)),e.innerHTML="",this.setElement(e,!1)}},onChatBoxAdded:function(e){return this.get(e.get("id"))},removeChat:function(e){this.remove(e.get("id"))},closeAllChatBoxes:function(){return this.each(function(e){e.close()}),this},chatBoxMayBeShown:function(e){return this.model.chatBoxMayBeShown(e)},getChatBox:function(e,t){var n=this.model.get(e.jid);return!n&&t&&(n=this.model.create(e,{error:function(e,t){_.log(t.responseText)}})),n},showChat:function(e){var t=this.getChatBox(e,!0);return this.chatBoxMayBeShown(t)&&t.trigger("show",!0),t}}),this.XMPPStatus=l.Model.extend({initialize:function(){this.set({status:this.getStatus()}),this.on("change",function(e){n.has(e.changed,"status")&&_.emit("statusChanged",this.get("status")),n.has(e.changed,"status_message")&&_.emit("statusMessageChanged",this.get("status_message"))}.bind(this))},constructPresence:function(e,t){var i;return e=n.isString(e)?e:this.get("status")||_.default_state,t=n.isString(t)?t:void 0,i="unavailable"===e||"probe"===e||"error"===e||"unsubscribe"===e||"unsubscribed"===e||"subscribe"===e||"subscribed"===e?p({type:e}):"offline"===e?p({type:"unavailable"}):"online"===e?p():p().c("show").t(e).up(),t&&i.c("status").t(t).up(),i.c("priority").t(n.isNaN(Number(_.priority))?0:_.priority),i},sendPresence:function(e,t){_.connection.send(this.constructPresence(e,t))},setStatus:function(e){this.sendPresence(e),this.save({status:e})},getStatus:function(){return this.get("status")||_.default_state},setStatusMessage:function(e){this.sendPresence(this.getStatus(),e);var t=this.get("status_message");if(this.save({status_message:e}),this.xhr_custom_status){var n=new XMLHttpRequest;n.open("POST",this.xhr_custom_status_url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send({msg:e})}t===e&&this.trigger("update-status-ui",this)}}),this.Features=l.Collection.extend({model:l.Model,initialize:function(){this.addClientIdentities().addClientFeatures(),this.browserStorage=new l.BrowserStorage[_.storage](m("converse.features"+_.bare_jid)),this.on("add",this.onFeatureAdded,this),this.fetchFeatures()},fetchFeatures:function(){0===this.browserStorage.records.length?(_.connection.disco.info(_.bare_jid,null,this.onInfo.bind(this)),_.connection.disco.items(_.domain,null,this.onItems.bind(this))):this.fetch({add:!0})},onFeatureAdded:function(e){_.emit("serviceDiscovered",e)},addClientIdentities:function(){return _.connection.disco.addIdentity("client","web","Converse.js"),this},addClientFeatures:function(){return _.connection.disco.addFeature(a.NS.BOSH),_.connection.disco.addFeature(a.NS.CHATSTATES),_.connection.disco.addFeature(a.NS.DISCO_INFO),_.connection.disco.addFeature(a.NS.ROSTERX),_.message_carbons&&_.connection.disco.addFeature(a.NS.CARBONS),this},onItems:function(e){var t=this;n.each(e.querySelectorAll("query item"),function(e){_.connection.disco.info(e.getAttribute("jid"),null,t.onInfo.bind(t))})},onInfo:function(e){var t=this;n.forEach(e.querySelectorAll("feature"),function(n){var i=n.getAttribute("var");t[i]=!0,t.create({var:i,from:e.getAttribute("from")})})}}),this.setUpXMLLogging=function(){a.log=function(e,t){_.log(t,e)},this.debug&&(this.connection.xmlInput=function(e){_.log(e.outerHTML)},this.connection.xmlOutput=function(e){_.log(e.outerHTML)})},this.fetchLoginCredentials=function(){var e=new t.Deferred,n=new XMLHttpRequest;return n.open("GET",_.credentials_url,!0),n.setRequestHeader("Accept","application/json, text/javascript"),n.onload=function(){if(n.status>=200&&n.status<400){var t=JSON.parse(n.responseText);e.resolve({jid:t.jid,password:t.password})}else n.onerror()},n.onerror=function(){delete _.connection,_.emit("noResumeableSession"),e.reject(n.responseText)},n.send(),e.promise()},this.startNewBOSHSession=function(){var e=new XMLHttpRequest;e.open("GET",_.prebind_url,!0),e.setRequestHeader("Accept","application/json, text/javascript"),e.onload=function(){if(e.status>=200&&e.status<400){var t=JSON.parse(e.responseText);_.connection.attach(t.jid,t.sid,t.rid,_.onConnectStatusChanged)}else e.onerror()},e.onerror=function(){delete _.connection,_.emit("noResumeableSession")},e.send()},this.restoreBOSHSession=function(e){if(!this.jid){var t='restoreBOSHSession: tried to restore a "keepalive" session but we don\'t have the JID for the user!';if(e)throw new Error(t);_.log(t)}try{return this.connection.restore(this.jid,this.onConnectStatusChanged),!0}catch(e){return this.log("Could not restore session for jid: "+this.jid+" Error message: "+e.message),this.clearSession(),!1}},this.attemptPreboundSession=function(e){if(!e){if(this.keepalive&&this.restoreBOSHSession(!0))return;if(this.jid&&this.sid&&this.rid)return this.connection.attach(this.jid,this.sid,this.rid,this.onConnectStatusChanged)}if(this.prebind_url)return this.startNewBOSHSession();throw new Error("attemptPreboundSession: If you use prebind and not keepalive, then you MUST supply JID, RID and SID values or a prebind_url.")},this.attemptNonPreboundSession=function(e,t){if(t||!this.keepalive||!this.restoreBOSHSession())if(this.auto_login)if(e)this.autoLogin(e);else if(this.credentials_url)this.fetchLoginCredentials().done(this.autoLogin.bind(this));else{if(!this.jid)throw new Error("attemptNonPreboundSession: If you use auto_login, you also need to give either a jid value (and if applicable a password) or you need to pass in a URL from where the username and password can be fetched (via credentials_url).");this.autoLogin()}else t&&this.autoLogin()},this.autoLogin=function(e){if(e&&(this.jid=e.jid),this.authentication===_.ANONYMOUS){if(!this.jid)throw new Error("Config Error: when using anonymous login you need to provide the server's domain via the 'jid' option. Either when calling converse.initialize, or when calling _converse.api.user.login.");this.connection.reconnecting||this.connection.reset(),this.connection.connect(this.jid.toLowerCase(),null,this.onConnectStatusChanged)}else if(this.authentication===_.LOGIN){var t=n.isNil(e)?_.connection.pass||this.password:e.password;if(!t){if(this.auto_login)throw new Error("initConnection: If you use auto_login and authentication='login' then you also need to provide a password.");return _.setDisconnectionCause(a.Status.AUTHFAIL,void 0,!0),void _.disconnect()}var i=a.getResourceFromJid(this.jid);i?this.jid=a.getBareJidFromJid(this.jid).toLowerCase()+"/"+i:this.jid=this.jid.toLowerCase()+_.generateResource(),this.connection.reconnecting||this.connection.reset(),this.connection.connect(this.jid,t,this.onConnectStatusChanged)}},this.logIn=function(e,t){this.authentication===_.PREBIND?this.attemptPreboundSession(t):this.attemptNonPreboundSession(e,t)},this.initConnection=function(){if(!this.connection){if(!this.bosh_service_url&&!this.websocket_url)throw new Error("initConnection: you must supply a value for either the bosh_service_url or websocket_url or both.");if(("WebSocket"in window||"MozWebSocket"in window)&&this.websocket_url)this.connection=new a.Connection(this.websocket_url,this.connection_options);else{if(!this.bosh_service_url)throw new Error("initConnection: this browser does not support websockets and bosh_service_url wasn't specified.");this.connection=new a.Connection(this.bosh_service_url,n.assignIn(this.connection_options,{keepalive:this.keepalive}))}}},this._tearDown=function(){return this.unregisterPresenceHandler(),this.roster&&this.roster.off().reset(),this.chatboxes.remove(),delete this.chatboxes.browserStorage,this.features&&(this.features.reset(),this.features.browserStorage._clear()),n.isUndefined(this.session)||this.session.destroy(),window.removeEventListener("click",_.onUserActivity),window.removeEventListener("focus",_.onUserActivity),window.removeEventListener("keypress",_.onUserActivity),window.removeEventListener("mousemove",_.onUserActivity),window.removeEventListener(c,_.onUserActivity),window.clearInterval(_.everySecondTrigger),this},this.initChatBoxes=function(){this.chatboxes=new this.ChatBoxes,this.chatboxviews=new this.ChatBoxViews({model:this.chatboxes})},this.initPlugins=function(){_.pluggable.initialized_plugins=[];var e=_.core_plugins.concat(_.whitelisted_plugins);_.pluggable.initializePlugins({updateSettings:function(){_.log("(DEPRECATION) The `updateSettings` method has been deprecated. Please use `_converse.api.settings.update` instead.",a.LogLevel.WARN),_.api.settings.update.apply(_,arguments)},_converse:_},e,_.blacklisted_plugins),_.emit("pluginsInitialized")},i.connection&&(this.connection=i.connection),_.initPlugins(),_.initChatBoxes(),_.initConnection(),_.setUpXMLLogging(),_.logIn(),_.registerGlobalEventHandlers(),n.isUndefined(_.connection)||"jasmine tests"!==_.connection.service?u.promise():_},_.api={connection:{connected:function(){return _.connection&&_.connection.connected||!1},disconnect:function(){_.connection.disconnect()}},emit:function(){_.emit.apply(_,arguments)},user:{jid:function(){return _.connection.jid},login:function(e){_.initConnection(),_.logIn(e)},logout:function(){_.logOut()},status:{get:function(){return _.xmppstatus.get("status")},set:function(e,t){var i={status:e};if(!n.includes(n.keys(_.STATUS_WEIGHTS),e))throw new Error("Invalid availability value. See https://xmpp.org/rfcs/rfc3921.html#rfc.section.2.2.2.1");n.isString(t)&&(i.status_message=t),_.xmppstatus.sendPresence(e),_.xmppstatus.save(i)},message:{get:function(){return _.xmppstatus.get("status_message")},set:function(e){_.xmppstatus.save({status_message:e})}}}},settings:{update:function(e){o.merge(_.default_settings,e),o.merge(_,e),o.applyUserSettings(_,e,_.user_settings)},get:function(e){if(n.includes(n.keys(_.default_settings),e))return _[e]},set:function(e,t){var i={};n.isObject(e)?n.assignIn(_,n.pick(e,n.keys(_.default_settings))):n.isString("string")&&(i[e]=t,
n.assignIn(_,n.pick(i,n.keys(_.default_settings))))}},promises:{add:function(e){e=n.isArray(e)?e:[e],n.each(e,function(e){_.promises[e]=new t.Deferred})}},contacts:{get:function(e){var t=function(e){var t=_.roster.get(a.getBareJidFromJid(e));return t?t.attributes:null};if(n.isUndefined(e))e=_.roster.pluck("jid");else if(n.isString(e))return t(e);return n.map(e,t)},add:function(e,t){if(!n.isString(e)||!n.includes(e,"@"))throw new TypeError("contacts.add: invalid jid");_.roster.addAndSubscribe(e,n.isEmpty(t)?e:t)}},chats:{open:function(e,t){var i;return n.isUndefined(e)?(_.log("chats.open: You need to provide at least one JID",a.LogLevel.ERROR),null):n.isString(e)?i=_.getViewForChatBox(_.chatboxes.getChatBox(e,!0,t).trigger("show")):n.map(e,function(e){return i=_.getViewForChatBox(_.chatboxes.getChatBox(e,!0,t).trigger("show"))})},get:function(e){if(n.isUndefined(e)){var t=[];return _.chatboxes.each(function(e){"chatroom"!==e.get("type")&&t.push(_.getViewForChatBox(e))}),t}return n.isString(e)?_.getViewForChatBox(_.chatboxes.getChatBox(e)):n.map(e,n.partial(n.flow(_.chatboxes.getChatBox.bind(_.chatboxes),_.getViewForChatBox.bind(_)),n,!0))}},tokens:{get:function(e){return!_.expose_rid_and_sid||n.isUndefined(_.connection)?null:"rid"===e.toLowerCase()?_.connection.rid||_.connection._proto.rid:"sid"===e.toLowerCase()?_.connection.sid||_.connection._proto.sid:void 0}},listen:{once:_.once.bind(_),on:_.on.bind(_),not:_.off.bind(_),stanza:function(e,t,i){n.isFunction(t)?(i=t,t={}):t=t||{},_.connection.addHandler(i,t.ns,e,t.type,t.id,t.from,t)}},waitUntil:function(e){var t=_.promises[e];return n.isUndefined(t)?null:_.promises[e].promise()},send:function(e){_.connection.send(e)}},{initialize:function(e,t){return _.initialize(e,t)},plugins:{add:function(e,t){if(t.__name__=e,!n.isUndefined(_.pluggable.plugins[e]))throw new TypeError('Error: plugin with name "'+e+'" has already been registered!');_.pluggable.plugins[e]=t}},env:{$build:d,$iq:h,$msg:f,$pres:p,Backbone:l,Strophe:a,_:n,fp:c,b64_sha1:m,jQuery:t,moment:s,sizzle:e,utils:o}}}),define("tpl!chatbox",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="flyout box-flyout">\n    <div class="chat-head chat-head-chatbox">\n        <a class="chatbox-btn close-chatbox-button icon-close" title="'+__e(info_close)+'"></a>\n        <div class="chat-title">\n            ',url&&(__p+='\n                <a href="'+__e(url)+'" target="_blank" rel="noopener" class="user">\n            '),__p+="\n                    "+__e(title)+"\n            ",url&&(__p+="\n                </a>\n            "),__p+='\n            <p class="user-custom-message"><p/>\n        </div>\n    </div>\n    <div class="chat-body">\n        <div class="chat-content ',show_send_button&&(__p+="chat-content-sendbutton"),__p+='"></div>\n        <div class="new-msgs-indicator hidden">▼ '+__e(unread_msgs)+" ▼</div>\n        ",show_textarea&&(__p+='\n        <form class="sendXMPPMessage" action="" method="post">\n            ',show_toolbar&&(__p+='\n                <ul class="chat-toolbar no-text-select"></ul>\n            '),__p+='\n        <textarea\n            type="text"\n            class="chat-textarea ',show_send_button&&(__p+="chat-textarea-send-button"),__p+='"\n            placeholder="'+__e(label_personal_message)+'"/>\n\n        ',show_send_button&&(__p+='\n            <button type="submit" class="pure-button send-button">'+__e(label_send)+"</button>\n        "),__p+="\n        </form>\n        "),__p+="\n    </div>\n</div>\n";return __p}}),define("tpl!new_day",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<time class="chat-info chat-date" data-isodate="'+__e(isodate)+'">'+__e(datestring)+"</time>\n";return __p}}),define("tpl!action",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="chat-message '+__e(extra_classes)+'" data-isodate="'+__e(isodate)+'">\n    <span class="chat-msg-author chat-msg-'+__e(sender)+'">'+__e(time)+" **"+__e(username)+'&nbsp;</span>\n    <span class="chat-msg-content chat-action"><!-- message gets added here via renderMessage --></span>\n</div>\n';return __p}}),define("tpl!message",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="chat-message '+__e(extra_classes)+'" data-isodate="'+__e(isodate)+'" data-msgid="'+__e(msgid)+'">\n    <span class="chat-msg-author chat-msg-'+__e(sender)+'">'+__e(time)+'</span>\n    <span class="chat-msg-content"><!-- message gets added here via renderMessage --></span>\n</div>\n';return __p}}),define("tpl!help_message",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="chat-'+__e(type)+'">'+__e(message)+"</div>\n";return __p}}),define("tpl!toolbar",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)show_emoticons&&(__p+='\n    <li class="toggle-smiley icon-happy" title="'+__e(label_insert_smiley)+'">\n        <ul class="toolbar-picker-panel">\n            <li><a class="icon-smiley" href="#" data-emoticon=":)"></a></li>\n            <li><a class="icon-wink" href="#" data-emoticon=";)"></a></li>\n            <li><a class="icon-grin" href="#" data-emoticon=":D"></a></li>\n            <li><a class="icon-tongue" href="#" data-emoticon=":P"></a></li>\n            <li><a class="icon-cool" href="#" data-emoticon="8)"></a></li>\n            <li><a class="icon-evil" href="#" data-emoticon=">:)"></a></li>\n            <li><a class="icon-confused" href="#" data-emoticon=":S"></a></li>\n            <li><a class="icon-wondering" href="#" data-emoticon=":\\"></a></li>\n            <li><a class="icon-angry" href="#" data-emoticon=">:("></a></li>\n            <li><a class="icon-sad" href="#" data-emoticon=":("></a></li>\n            <li><a class="icon-shocked" href="#" data-emoticon=":O"></a></li>\n            <li><a class="icon-thumbs-up" href="#" data-emoticon="(^.^)b"></a></li>\n            <li><a class="icon-heart" href="#" data-emoticon="<3"></a></li>\n        </ul>\n    </li>\n'),__p+="\n",show_call_button&&(__p+='\n<li class="toggle-call"><a class="icon-phone" title="'+__e(label_start_call)+'"></a></li>\n'),__p+="\n",show_clear_button&&(__p+='\n<li class="toggle-clear"><a class="icon-trash" title="'+__e(label_clear)+'"></a></li>\n'),__p+="\n";return __p}}),define("tpl!avatar",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<canvas height="'+(null==(__t=height)?"":__t)+'px" width="'+(null==(__t=width)?"":__t)+'px" class="avatar"></canvas>\n';return __p}}),define("tpl!spinner",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<span class="spinner centered"/>\n';return __p}}),function(e,t){define("converse-chatview",["converse-core","tpl!chatbox","tpl!new_day","tpl!action","tpl!message","tpl!help_message","tpl!toolbar","tpl!avatar","tpl!spinner"],t)}(this,function(e,t,n,i,r,o,s,a,u){"use strict";var l=e.env.jQuery,c=e.env.$msg,d=e.env.Backbone,h=e.env.Strophe,f=e.env._,p=e.env.moment,m=e.env.utils,_={ENTER:13,FORWARD_SLASH:47};return e.plugins.add("converse-chatview",{overrides:{ChatBoxViews:{onChatBoxAdded:function(e){var t=this.__super__._converse,n=this.get(e.get("id"));return n?this.__super__.onChatBoxAdded.apply(this,arguments):(n=new t.ChatBoxView({model:e}),this.add(e.get("id"),n),n)}}},initialize:function(){var e=this._converse,g=e.__;e.api.settings.update({chatview_avatar_height:32,chatview_avatar_width:32,show_toolbar:!0,time_format:"HH:mm",visible_toolbar_buttons:{emoticons:!0,call:!1,clear:!0}});var v=function(t){var n=t.state;e.chatboxviews.each(function(e){e.onWindowStateChanged(n)})};e.api.listen.on("windowStateChanged",v),e.ChatBoxView=d.View.extend({length:200,tagName:"div",className:"chatbox hidden",is_chatroom:!1,events:{"click .close-chatbox-button":"close","keypress .chat-textarea":"keyPressed","click .send-button":"onFormSubmitted","click .toggle-smiley":"toggleEmoticonMenu","click .toggle-smiley ul li":"insertEmoticon","click .toggle-clear":"clearMessages","click .toggle-call":"toggleCall","click .new-msgs-indicator":"viewUnreadMessages"},initialize:function(){this.model.messages.on("add",this.onMessageAdded,this),this.model.on("show",this.show,this),this.model.on("destroy",this.hide,this),this.model.on("change:chat_state",this.sendChatState,this),this.model.on("change:chat_status",this.onChatStatusChanged,this),this.model.on("change:image",this.renderAvatar,this),this.model.on("change:status",this.onStatusChanged,this),this.model.on("showHelpMessages",this.showHelpMessages,this),this.model.on("sendMessage",this.sendMessage,this),this.render().fetchMessages(),e.emit("chatBoxInitialized",this)},render:function(){return this.$el.attr("id",this.model.get("box_id")).html(t(f.extend(this.model.toJSON(),{show_toolbar:e.show_toolbar,show_textarea:!0,show_send_button:e.show_send_button,title:this.model.get("fullname"),unread_msgs:g("You have unread messages"),info_close:g("Close this chat box"),label_personal_message:g("Your message"),label_send:g("Send")}))),this.$content=this.$el.find(".chat-content"),this.renderToolbar().renderAvatar(),e.emit("chatBoxOpened",this),m.refreshWebkit(),this.showStatusMessage()},afterMessagesFetched:function(){this.insertIntoDOM(),this.scrollDown(),this.$content.on("scroll",this.markScrolled.bind(this))},fetchMessages:function(){return this.model.messages.fetch({add:!0,success:this.afterMessagesFetched.bind(this),error:this.afterMessagesFetched.bind(this)}),this},insertIntoDOM:function(){var e=document.querySelector("#conversejs");return this.el.parentNode!==e&&e.insertBefore(this.el,e.firstChild),this},clearStatusNotification:function(){this.$content.find("div.chat-event").remove()},showStatusNotification:function(e,t,n){t||this.clearStatusNotification();var i=l('<div class="chat-info"></div>').text(e);n||i.addClass("chat-event"),this.$content.append(i),this.scrollDown()},addSpinner:function(){f.isNull(this.el.querySelector(".spinner"))&&this.$content.prepend(u)},clearSpinner:function(){this.$content.children(":first").is("span.spinner")&&this.$content.children(":first").remove()},insertDayIndicator:function(e,t){var i=p(e).startOf("day"),r=t?this.$content.prepend:this.$content.append;r.call(this.$content,n({isodate:i.format(),datestring:i.format("dddd MMM Do YYYY")}))},insertMessage:function(e,t){var n=this,i=t?this.$content.prepend:this.$content.append;f.flow(function(e){return i.call(n.$content,e),e},this.scrollDown.bind(this))(this.renderMessage(e))},showMessage:function(e){var t,n=this.$content.find(".chat-message:first"),i=n.data("isodate"),r=p(e.time)||p,o=this.$content.find(".chat-message:last").data("isodate");if(!i)return this.insertDayIndicator(r),void this.insertMessage(e);if(r.isAfter(o)||r.isSame(o))return r.isAfter(o,"day")&&this.insertDayIndicator(r),void this.insertMessage(e);if(r.isBefore(i)||r.isSame(i))return this.insertMessage(e,"prepend"),void(r.isBefore(i,"day")&&this.insertDayIndicator(r,"prepend"));r=r.format(),t=f.map(this.$content.find(".chat-message"),function(e){return l(e).data("isodate")}),t.push(r),t.sort();var s=t.indexOf(r)-1,a=this.$content.find('.chat-message[data-isodate="'+t[s]+'"]:last');f.flow(function(e){e.insertAfter(a)},this.scrollDown.bind(this))(this.renderMessage(e))},getExtraMessageTemplateAttributes:function(){return{}},getExtraMessageClasses:function(e){return e.delayed&&"delayed"||""},renderMessage:function(t){var n,o,s=p(t.time)||p,a=t.message,u=a.match(/^\/(.*?)(?: (.*))?$/),c=this.model.get("fullname")||t.fullname;u&&"me"===u[1]?(a=a.replace(/^\/me/,""),n=i,"me"===t.sender?(c=e.xmppstatus.get("fullname")||t.fullname,o=f.isNil(c)?e.bare_jid:c):o=t.fullname):(n=r,o="me"===t.sender&&g("me")||c),this.$content.find("div.chat-event").remove(),a.length>8e3&&(a=a.substring(0,10)+"...",this.showStatusNotification(g("A very large message has been received.This might be due to an attack meant to degrade the chat performance.Output has been shortened."),!0,!0));var d=l(n(f.extend(this.getExtraMessageTemplateAttributes(t),{msgid:t.msgid,sender:t.sender,time:s.format(e.time_format),isodate:s.format(),extra_classes:this.getExtraMessageClasses(t)})));return d.find(".chat-msg-content").first().text(a).addHyperlinks().addEmoticons(e.visible_toolbar_buttons.emoticons),d},showHelpMessages:function(e,t,n){var i,r=e.length;for(i=0;i<r;i++)this.$content.append(l(o({type:t||"info",message:e[i]})));return n===!0?this.$content.append(u):n===!1&&this.$content.find("span.spinner").remove(),this.scrollDown()},handleChatStateMessage:function(t){t.get("chat_state")===e.COMPOSING?("me"===t.get("sender")?this.showStatusNotification(g("Typing from another device")):this.showStatusNotification(t.get("fullname")+" "+g("is typing")),this.clear_status_timeout=window.setTimeout(this.clearStatusNotification.bind(this),3e4)):t.get("chat_state")===e.PAUSED?"me"===t.get("sender")?this.showStatusNotification(g("Stopped typing on the other device")):this.showStatusNotification(t.get("fullname")+" "+g("has stopped typing")):f.includes([e.INACTIVE,e.ACTIVE],t.get("chat_state"))?this.$content.find("div.chat-event").remove():t.get("chat_state")===e.GONE&&this.showStatusNotification(t.get("fullname")+" "+g("has gone away"))},shouldShowOnTextMessage:function(){return!this.$el.is(":visible")},handleTextMessage:function(e){this.showMessage(f.clone(e.attributes)),m.isNewMessage(e)&&"me"===e.get("sender")?this.model.set("scrolled",!1):m.isNewMessage(e)&&this.model.get("scrolled",!0)&&this.$el.find(".new-msgs-indicator").removeClass("hidden"),this.shouldShowOnTextMessage()?this.show():this.scrollDown()},handleErrorMessage:function(e){var t=l("[data-msgid="+e.get("msgid")+"]");t.length&&(t.after(l('<div class="chat-info chat-error"></div>').text(e.get("message"))),this.scrollDown())},onMessageAdded:function(t){f.isUndefined(this.clear_status_timeout)||(window.clearTimeout(this.clear_status_timeout),delete this.clear_status_timeout),"error"===t.get("type")?this.handleErrorMessage(t):t.get("message")?this.handleTextMessage(t):this.handleChatStateMessage(t),e.emit("messageAdded",{message:t,chatbox:this.model})},createMessageStanza:function(t){return c({from:e.connection.jid,to:this.model.get("jid"),type:"chat",id:t.get("msgid")}).c("body").t(t.get("message")).up().c(e.ACTIVE,{xmlns:h.NS.CHATSTATES}).up()},sendMessage:function(t){var n=this.createMessageStanza(t);e.connection.send(n),e.forward_messages&&e.connection.send(c({to:e.bare_jid,type:"chat",id:t.get("msgid")}).c("forwarded",{xmlns:"urn:xmpp:forward:0"}).c("delay",{xmns:"urn:xmpp:delay",stamp:(new Date).getTime()}).up().cnode(n.tree()))},onMessageSubmitted:function(t){if(!e.connection.authenticated)return this.showHelpMessages(["Sorry, the connection has been lost, and your message could not be sent"],"error");var n,i=t.replace(/^\s*/,"").match(/^\/(.*)\s*$/);if(i){if("clear"===i[1])return this.clearMessages();if("help"===i[1])return n=["<strong>/help</strong>:"+g("Show this menu"),"<strong>/me</strong>:"+g("Write in the third person"),"<strong>/clear</strong>:"+g("Remove messages")],void this.showHelpMessages(n)}var r=e.xmppstatus.get("fullname");r=f.isEmpty(r)?e.bare_jid:r;var o=this.model.messages.create({fullname:r,sender:"me",time:p().format(),message:t});this.sendMessage(o)},sendChatState:function(){e.connection.send(c({to:this.model.get("jid"),type:"chat"}).c(this.model.get("chat_state"),{xmlns:h.NS.CHATSTATES}).up().c("no-store",{xmlns:h.NS.HINTS}).up().c("no-permanent-store",{xmlns:h.NS.HINTS}))},setChatState:function(t,n){return f.isUndefined(this.chat_state_timeout)||(window.clearTimeout(this.chat_state_timeout),delete this.chat_state_timeout),t===e.COMPOSING?this.chat_state_timeout=window.setTimeout(this.setChatState.bind(this),e.TIMEOUTS.PAUSED,e.PAUSED):t===e.PAUSED&&(this.chat_state_timeout=window.setTimeout(this.setChatState.bind(this),e.TIMEOUTS.INACTIVE,e.INACTIVE)),n||this.model.get("chat_state")===t||this.model.set("chat_state",t),this},onFormSubmitted:function(t){t.preventDefault();var n=this.el.querySelector(".chat-textarea"),i=n.value;n.value="",""!==i&&(this.onMessageSubmitted(i),e.emit("messageSend",i)),this.setChatState(e.ACTIVE)},keyPressed:function(t){t.keyCode===_.ENTER?this.onFormSubmitted(t):this.setChatState(e.COMPOSING,t.keyCode===_.FORWARD_SLASH)},clearMessages:function(e){e&&e.preventDefault&&e.preventDefault();var t=confirm(g("Are you sure you want to clear the messages from this chat box?"));return t===!0&&(this.$content.empty(),this.model.messages.reset(),this.model.messages.browserStorage._clear()),this},insertIntoTextArea:function(e){var t=this.$el.find("textarea.chat-textarea"),n=t.val();n&&" "!==n[n.length-1]&&(n+=" "),t.focus().val(n+e+" ")},insertEmoticon:function(e){e.stopPropagation(),this.$el.find(".toggle-smiley ul").slideToggle(200);var t=l(e.target);t=t.is("a")?t:t.children("a"),this.insertIntoTextArea(t.data("emoticon"))},toggleEmoticonMenu:function(e){e.stopPropagation(),this.$el.find(".toggle-smiley ul").slideToggle(200)},toggleCall:function(t){t.stopPropagation(),e.emit("callButtonClicked",{connection:e.connection,model:this.model})},onChatStatusChanged:function(e){var t=e.get("chat_status"),n=e.get("fullname");n=f.isEmpty(n)?e.get("jid"):n,this.$el.is(":visible")&&("offline"===t?this.showStatusNotification(n+" "+g("has gone offline")):"away"===t?this.showStatusNotification(n+" "+g("has gone away")):"dnd"===t?this.showStatusNotification(n+" "+g("is busy")):"online"===t&&this.$el.find("div.chat-event").remove())},onStatusChanged:function(t){this.showStatusMessage(),e.emit("contactStatusMessageChanged",{contact:t.attributes,message:t.get("status")})},showStatusMessage:function(e){return e=e||this.model.get("status"),f.isString(e)&&this.$el.find("p.user-custom-message").text(e).attr("title",e),this},close:function(t){t&&t.preventDefault&&t.preventDefault(),e.connection.connected&&(this.model.set("chat_state",e.INACTIVE),this.sendChatState());try{this.model.destroy()}catch(t){e.log(t,h.LogLevel.ERROR)}return this.remove(),e.emit("chatBoxClosed",this),this},getToolbarOptions:function(t){return f.extend(t||{},{label_clear:g("Clear all messages"),label_insert_smiley:g("Insert a smiley"),label_start_call:g("Start a call"),show_call_button:e.visible_toolbar_buttons.call,show_clear_button:e.visible_toolbar_buttons.clear,show_emoticons:e.visible_toolbar_buttons.emoticons})},renderToolbar:function(t,n){if(e.show_toolbar)return t=t||s,n=f.extend(this.model.toJSON(),this.getToolbarOptions(n||{})),this.$el.find(".chat-toolbar").html(t(n)),this},renderAvatar:function(){if(this.model.get("image")){var t=e.chatview_avatar_width,n=e.chatview_avatar_height,i="data:"+this.model.get("image_type")+";base64,"+this.model.get("image"),r=l(a({width:t,height:n})).get(0);if(!r.getContext||!r.getContext("2d"))return this;var o=r.getContext("2d"),s=new Image;return s.onload=function(){var e=s.width/s.height;e<1?o.drawImage(s,0,0,t,n*(1/e)):o.drawImage(s,0,0,t,n*e)},s.src=i,this.$el.find(".chat-title").before(r),this}},focus:function(){return this.$el.find(".chat-textarea").focus(),e.emit("chatBoxFocused",this),this},hide:function(){return this.el.classList.add("hidden"),m.refreshWebkit(),this},afterShown:function(t){m.isPersistableModel(this.model)&&this.model.save(),this.setChatState(e.ACTIVE),this.scrollDown(),t&&this.focus()},_show:function(e){return this.$el.is(":visible")&&"1"===this.$el.css("opacity")?void(e&&this.focus()):void m.fadeIn(this.el,f.bind(this.afterShown,this,e))},show:function(e){return f.isUndefined(this.debouncedShow)&&(this.debouncedShow=f.debounce(this._show,250,{leading:!0})),this.debouncedShow.apply(this,arguments),this},hideNewMessagesIndicator:function(){var e=this.el.querySelector(".new-msgs-indicator");f.isNull(e)||e.classList.add("hidden")},markScrolled:f.debounce(function(e){if(e&&e.preventDefault&&e.preventDefault(),this.model.get("auto_scrolled"))return void this.model.set({scrolled:!1,auto_scrolled:!1});var t=!0,n=this.$content.scrollTop()+this.$content.innerHeight()>=this.$content[0].scrollHeight-10;n&&(t=!1,this.onScrolledDown()),m.safeSave(this.model,{scrolled:t})},150),viewUnreadMessages:function(){this.model.save("scrolled",!1),this.scrollDown()},_scrollDown:function(){this.$content.is(":visible")&&!this.model.get("scrolled")&&(this.$content.scrollTop(this.$content[0].scrollHeight),this.onScrolledDown(),this.model.save({auto_scrolled:!0}))},onScrolledDown:function(){this.hideNewMessagesIndicator(),"hidden"!==e.windowState&&this.model.clearUnreadMsgCounter(),e.emit("chatBoxScrolledDown",{chatbox:this.model})},scrollDown:function(){return f.isUndefined(this.debouncedScrollDown)&&(this.debouncedScrollDown=f.debounce(this._scrollDown,250)),this.debouncedScrollDown.apply(this,arguments),this},onWindowStateChanged:function(e){this.model.get("num_unread",0)&&!this.model.newMessageWillBeHidden()&&this.model.clearUnreadMsgCounter()}})}}),e}),define("tpl!add_contact_dropdown",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<dl class="add-converse-contact dropdown">\n    <dt id="xmpp-contact-search" class="fancy-dropdown">\n        <a class="toggle-xmpp-contact-form icon-plus" href="#" title="'+__e(label_click_to_chat)+'"> '+__e(label_add_contact)+'</a>\n    </dt>\n    <dd class="search-xmpp"><ul></ul></dd>\n</dl>\n';return __p}}),define("tpl!add_contact_form",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<li>\n    <form class="pure-form add-xmpp-contact">\n        <input type="text"\n            name="identifier"\n            class="username"\n            placeholder="'+__e(label_contact_username)+'"/>\n        <button class="pure-button button-primary" type="submit">'+__e(label_add)+"</button>\n    </form>\n</li>\n";return __p}}),define("tpl!change_status_message",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<fieldset>\n    <span class="input-button-group">\n        <input type="text" class="custom-xmpp-status" value="'+__e(status_message)+'" placeholder="'+__e(label_custom_status)+'"/>\n        <input type="submit" class="pure-button button-primary" value="'+__e(label_save)+'"/>\n    </span>\n</fieldset>\n';return __p}}),define("tpl!chat_status",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="xmpp-status">\n    <a class="choose-xmpp-status '+__e(chat_status)+" icon-"+__e(chat_status)+'" data-value="'+__e(status_message)+'" href="#" title="'+__e(desc_change_status)+'">\n        '+__e(status_message)+'\n    </a>\n    <a class="change-xmpp-status-message icon-pencil" href="#" title="'+__e(desc_custom_status)+'"></a>\n</div>\n';return __p}}),define("tpl!choose_status",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<dl id="target" class="dropdown">\n    <dt id="fancy-xmpp-status-select" class="fancy-dropdown"></dt>\n    <dd><ul class="xmpp-status-menu"></ul></dd>\n</dl>\n';return __p}}),define("tpl!contacts_panel",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<form class="pure-form set-xmpp-status" id="set-xmpp-status" action="" method="post">\n    <select id="select-xmpp-status">\n        <option value="online">'+__e(label_online)+'</option>\n        <option value="dnd">'+__e(label_busy)+'</option>\n        <option value="away">'+__e(label_away)+"</option>\n        ",include_offline_state&&(__p+='\n        <option value="offline">'+__e(label_offline)+"</option>\n        "),__p+="\n        ",allow_logout&&(__p+='\n        <option value="logout">'+__e(label_logout)+"</option>\n        "),__p+="\n    </select>\n</form>\n";return __p}}),define("tpl!contacts_tab",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<a class="s contacts-tab\n   ',is_current&&(__p+=" current "),__p+="\n   ",num_unread&&(__p+=" unread-msgs "),__p+='"\n       data-id="users" href="#users">\n    '+__e(label_contacts)+"\n    ",num_unread&&(__p+='\n        <span class="msgs-indicator">'+__e(num_unread)+"</span>\n    "),__p+="\n</a>\n";return __p}}),define("tpl!controlbox",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="flyout box-flyout">\n    <div class="chat-head controlbox-head">\n        <ul id="controlbox-tabs"></ul>\n        ',sticky_controlbox||(__p+='\n            <a class="chatbox-btn close-chatbox-button icon-close"></a>\n        '),__p+='\n    </div>\n    <div class="controlbox-panes"></div>\n</div>\n';return __p}}),define("tpl!controlbox_toggle",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<span class="conn-feedback">'+__e(label_toggle)+"</span>\n";return __p}}),define("tpl!login_panel",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<form class="pure-form pure-form-stacked converse-form" id="converse-login" method="post">\n    ',auto_login&&(__p+='\n        <span class="spinner login-submit"/>\n    '),__p+="\n    ",auto_login||(__p+="\n        ",authentication!=LOGIN&&authentication!=EXTERNAL||(__p+="\n            <label>"+__e(label_username)+'</label>\n            <input type="text" name="jid" placeholder="'+__e(placeholder_username)+'">\n            ',authentication!==EXTERNAL&&(__p+="\n                <label>"+__e(label_password)+'</label>\n                <input type="password" name="password" placeholder="'+__e(placeholder_password)+'">\n            '),__p+='\n            <input class="pure-button button-primary" type="submit" value="'+__e(label_login)+'">\n            <span class="conn-feedback"></span>\n        '),__p+="\n        ",authentication==ANONYMOUS&&(__p+='\n            <input class="pure-button button-primary login-anon" type="submit" value="'+__e(label_anon_login)+'"/>\n        '),__p+="\n        ",authentication==PREBIND&&(__p+="\n            <p>Disconnected.</p>\n        "),__p+="\n    "),__p+="\n</form>\n";return __p}}),define("tpl!login_tab",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<li><a class="current" data-id="login" href="#login-dialog">'+__e(label_sign_in)+"</a></li>\n";return __p}}),define("tpl!search_contact",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<li>\n    <form class="search-xmpp-contact">\n        <input type="text"\n            name="identifier"\n            class="username"\n            placeholder="'+__e(label_contact_name)+'"/>\n        <button type="submit">'+__e(label_search)+"</button>\n    </form>\n</li>\n";return __p}}),define("tpl!status_option",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<li>\n    <a href="#" class="'+__e(value)+'" data-value="'+__e(value)+'">\n        <span class="icon-'+__e(value)+'"></span>\n        '+__e(text)+"\n    </a>\n</li>\n";return __p}}),define("tpl!group_header",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<a href="#" class="group-toggle icon-'+__e(toggle_state)+'" title="'+__e(desc_group_toggle)+'">'+__e(label_group)+"</a>\n";return __p}}),define("tpl!pending_contact",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)allow_chat_pending_contacts&&(__p+='\n<a class="open-chat"href="#">\n'),__p+='\n<span class="pending-contact-name" title="Name: '+__e(fullname)+"\nJID: "+__e(jid)+'">'+__e(fullname)+"</span> \n",allow_chat_pending_contacts&&(__p+="\n</a>\n"),__p+='\n<a class="remove-xmpp-contact icon-remove" title="'+__e(desc_remove)+'" href="#"></a>\n';return __p}}),define("tpl!requesting_contact",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)allow_chat_pending_contacts&&(__p+='\n<a class="open-chat"href="#">\n'),__p+='\n<span class="req-contact-name" title="Name: '+__e(fullname)+"\nJID: "+__e(jid)+'">'+__e(fullname)+"</span>\n",allow_chat_pending_contacts&&(__p+="\n</a>\n"),__p+='\n<span class="request-actions">\n    <a class="accept-xmpp-request icon-checkmark" aria-label="'+__e(desc_accept)+'" title="'+__e(desc_accept)+'" href="#"></a>\n    <a class="decline-xmpp-request icon-close" aria-label="'+__e(desc_decline)+'" title="'+__e(desc_decline)+'" href="#"></a>\n</span>\n';return __p}}),define("tpl!roster",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<dl class="roster-contacts"></dl>\n';return __p}}),define("tpl!roster_filter",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<form class="pure-form roster-filter-form input-button-group">\n    <input value="'+(null==(__t=filter_text)?"":__t)+'" class="roster-filter roster-filter-'+(null==(__t=filter_type)?"":__t)+'"\n           placeholder="'+(null==(__t=placeholder)?"":__t)+'">\n    <select class="state-type state-type-'+(null==(__t=filter_type)?"":__t)+'">\n        <option value="">'+(null==(__t=label_any)?"":__t)+"</option>\n        <option ","unread_messages"===chat_state&&(__p+=' selected="selected" '),__p+='\n            value="unread_messages">'+(null==(__t=label_unread_messages)?"":__t)+"</option>\n        <option ","online"===chat_state&&(__p+=' selected="selected" '),__p+='\n            value="online">'+(null==(__t=label_online)?"":__t)+"</option>\n        <option ","chat"===chat_state&&(__p+=' selected="selected" '),__p+='\n            value="chat">'+(null==(__t=label_chatty)?"":__t)+"</option>\n        <option ","dnd"===chat_state&&(__p+=' selected="selected" '),__p+='\n            value="dnd">'+(null==(__t=label_busy)?"":__t)+"</option>\n        <option ","away"===chat_state&&(__p+=' selected="selected" '),__p+='\n            value="away">'+(null==(__t=label_away)?"":__t)+"</option>\n        <option ","xa"===chat_state&&(__p+=' selected="selected" '),__p+='\n            value="xa">'+(null==(__t=label_xa)?"":__t)+"</option>\n        <option ","offline"===chat_state&&(__p+=' selected="selected" '),__p+='\n            value="offline">'+(null==(__t=label_offline)?"":__t)+'</option>\n    </select>\n    <select class="filter-type">\n        <option ',"contacts"===filter_type&&(__p+=' selected="selected" '),__p+='\n                value="contacts">'+(null==(__t=label_contacts)?"":__t)+"</option>\n        <option ","groups"===filter_type&&(__p+=' selected="selected" '),__p+='\n                value="groups">'+(null==(__t=label_groups)?"":__t)+"</option>\n        <option ","state"===filter_type&&(__p+=' selected="selected" '),__p+='\n                value="state">'+(null==(__t=label_state)?"":__t)+"</option>\n    </select>\n</form>\n";return __p}}),define("tpl!roster_item",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<a class="open-chat ',num_unread&&(__p+=" unread-msgs "),__p+='"\n   title="'+__e(title_fullname)+": "+__e(fullname)+" JID: "+__e(jid)+" "+__e(desc_chat)+'"\n   href="#">\n    <div class="avatar avatar-'+__e(chat_status)+'">\n        <span class="status-icon icon-'+__e(chat_status)+'" title="'+__e(desc_status)+'"></span>\n    </div>\n    ',
num_unread&&(__p+='\n    <span class="msgs-indicator">'+__e(num_unread)+"</span>\n    "),__p+='\n    <span class="contact-name ',num_unread&&(__p+=" unread-msgs "),__p+='">'+__e(fullname)+"</span>\n</a>\n",allow_contact_removal&&(__p+='\n<a class="remove-xmpp-contact icon-remove" title="'+__e(desc_remove)+'" href="#"></a>\n'),__p+="\n\n\n";return __p}}),function(e,t){define("converse-rosterview",["converse-core","tpl!group_header","tpl!pending_contact","tpl!requesting_contact","tpl!roster","tpl!roster_filter","tpl!roster_item"],t)}(this,function(e,t,n,i,r,o,s){"use strict";var a=e.env.jQuery,u=e.env.Backbone,l=e.env.utils,c=e.env.Strophe,d=e.env.$iq,h=e.env.b64_sha1,f=(e.env.sizzle,e.env._);e.plugins.add("converse-rosterview",{overrides:{afterReconnected:function(){this.__super__.afterReconnected.apply(this,arguments)},_tearDown:function(){this.__super__._tearDown.apply(this,arguments),f.isUndefined(this.rosterview)||this.rosterview.remove()},RosterGroups:{comparator:function(){var e=this.__super__._converse;return e.RosterGroupsComparator.apply(this,arguments)}}},initialize:function(){var e=this._converse,p=e.__,m=e.___;e.api.settings.update({allow_chat_pending_contacts:!0,allow_contact_removal:!0,show_toolbar:!0});var _={dnd:p("This contact is busy"),online:p("This contact is online"),offline:p("This contact is offline"),unavailable:p("This contact is unavailable"),xa:p("This contact is away for an extended period"),away:p("This contact is away")},g=p("Contacts"),v=p("Groups"),y=p("My contacts"),b=p("Pending contacts"),w=p("Contact requests"),x=p("Ungrouped"),S={};S[w]=0,S[y]=1,S[x]=2,S[b]=3,e.RosterGroupsComparator=function(e,t){e=e.get("name"),t=t.get("name");var n=f.keys(S),i=f.includes(n,e),r=f.includes(n,t);return i||r?i&&r?S[e]<S[t]?-1:S[e]>S[t]?1:0:!i&&r?t===w?1:-1:i&&!r?e===w?-1:1:void 0:e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0},e.RosterFilter=u.Model.extend({initialize:function(){this.set({filter_text:"",filter_type:"contacts",chat_state:""})}}),e.RosterFilterView=u.View.extend({tagName:"span",events:{"keydown .roster-filter":"liveFilter","submit form.roster-filter-form":"submitFilter","click .onX":"clearFilter","mousemove .x":"toggleX","change .filter-type":"changeTypeFilter","change .state-type":"changeChatStateFilter"},initialize:function(){this.model.on("change:filter_type",this.render,this),this.model.on("change:filter_text",this.renderClearButton,this)},render:function(){return this.el.innerHTML=o(f.extend(this.model.toJSON(),{placeholder:p("Filter"),label_contacts:g,label_groups:v,label_state:p("State"),label_any:p("Any"),label_unread_messages:p("Unread"),label_online:p("Online"),label_chatty:p("Chatty"),label_busy:p("Busy"),label_away:p("Away"),label_xa:p("Extended Away"),label_offline:p("Offline")})),this.renderClearButton(),this.$el},renderClearButton:function(){var e=this.el.querySelector(".roster-filter");f.isNull(e)||e.classList[this.tog(e.value)]("x")},tog:function(e){return e?"add":"remove"},toggleX:function(e){e&&e.preventDefault&&e.preventDefault();var t=e.target;t.classList[this.tog(t.offsetWidth-18<e.clientX-t.getBoundingClientRect().left)]("onX")},changeChatStateFilter:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.save({chat_state:this.el.querySelector(".state-type").value})},changeTypeFilter:function(e){e&&e.preventDefault&&e.preventDefault();var t=e.target.value;"state"===t?this.model.save({filter_type:t,chat_state:this.el.querySelector(".state-type").value}):this.model.save({filter_type:t,filter_text:this.el.querySelector(".roster-filter").value})},liveFilter:f.debounce(function(e){this.model.save({filter_type:this.el.querySelector(".filter-type").value,filter_text:this.el.querySelector(".roster-filter").value})},250),submitFilter:function(e){e&&e.preventDefault&&e.preventDefault(),this.liveFilter(),this.render()},isActive:function(){return!("state"!==this.model.get("filter_type")&&!this.model.get("filter_text"))},show:function(){return this.$el.is(":visible")?this:(this.$el.show(),this)},hide:function(){if(!this.$el.is(":visible"))return this;if(!(this.el.querySelector(".roster-filter").value.length>0))return this.model.save({filter_text:"",chat_state:""}),this.$el.hide(),this},clearFilter:function(e){e&&e.preventDefault&&(e.preventDefault(),a(e.target).removeClass("x onX").val("")),this.model.save({filter_text:""})}}),e.RosterView=u.Overview.extend({tagName:"div",id:"converse-roster",initialize:function(){e.roster.on("add",this.onContactAdd,this),e.roster.on("change",this.onContactChange,this),e.roster.on("destroy",this.update,this),e.roster.on("remove",this.update,this),this.model.on("add",this.onGroupAdd,this),this.model.on("reset",this.reset,this),e.on("rosterGroupsFetched",this.positionFetchedGroups,this),e.on("rosterContactsFetched",this.update,this),this.createRosterFilter()},render:function(){return this.renderRoster(),this.$el.html(this.filter_view.render()),e.allow_contact_requests||this.el.classList.add("no-contact-requests"),this},renderRoster:function(){this.$roster=a(r()),this.roster=this.$roster[0]},createRosterFilter:function(){var t=new e.RosterFilter;t.id=h("_converse.rosterfilter"+e.bare_jid),t.browserStorage=new u.BrowserStorage.local(this.filter.id),this.filter_view=new e.RosterFilterView({model:t}),this.filter_view.model.on("change",this.updateFilter,this),this.filter_view.model.fetch()},updateFilter:f.debounce(function(){var e=this.filter_view.model.get("filter_type");"state"===e?this.filter(this.filter_view.model.get("chat_state"),e):this.filter(this.filter_view.model.get("filter_text"),e)},100),update:f.debounce(function(){return f.isNull(this.roster.parentElement)&&this.$el.append(this.$roster.show()),this.showHideFilter()},e.animate?100:0),showHideFilter:function(){if(this.$el.is(":visible"))return this.$roster.hasScrollBar()?this.filter_view.show():this.filter_view.isActive()||this.filter_view.hide(),this},filter:function(e,t){f.each(this.getAll(),function(e){e.model.contacts.length>0&&e.show().filter("")}),e=e.toLowerCase(),"groups"===t?f.each(this.getAll(),function(t,n){f.includes(t.model.get("name").toLowerCase(),e.toLowerCase())?t.model.contacts.length>0&&t.show():t.hide()}):f.each(this.getAll(),function(n){n.filter(e,t)})},reset:function(){return e.roster.reset(),this.removeAll(),this.renderRoster(),this.render().update(),this},onGroupAdd:function(t){var n=new e.RosterGroupView({model:t});this.add(t.get("name"),n.render()),this.positionGroup(n)},onContactAdd:function(e){this.addRosterContact(e).update(),this.updateFilter()},onContactChange:function(e){this.updateChatBox(e).update(),f.has(e.changed,"subscription")&&("from"===e.changed.subscription?this.addContactToGroup(e,b):f.includes(["both","to"],e.get("subscription"))&&this.addExistingContact(e)),f.has(e.changed,"ask")&&"subscribe"===e.changed.ask&&this.addContactToGroup(e,b),f.has(e.changed,"subscription")&&"true"===e.changed.requesting&&this.addContactToGroup(e,w),this.updateFilter()},updateChatBox:function(t){var n=e.chatboxes.get(t.get("jid")),i={};return n?(f.has(t.changed,"chat_status")&&(i.chat_status=t.get("chat_status")),f.has(t.changed,"status")&&(i.status=t.get("status")),n.save(i),this):this},positionFetchedGroups:function(){var t=this;this.model.sort(),this.model.each(function(n,i){var r=t.get(n.get("name"));r||(r=new e.RosterGroupView({model:n}),t.add(n.get("name"),r.render())),0===i?t.$roster.append(r.$el):t.appendGroup(r)})},positionGroup:function(e){var t=this.$roster.find(".roster-group"),n=t.length?this.model.indexOf(e.model):0;return 0===n?this.$roster.prepend(e.$el):n===this.model.length-1?this.appendGroup(e):a(t.eq(n)).before(e.$el),this},appendGroup:function(e){var t=this.$roster.find(".roster-group").last(),n=t.siblings("dd");return n.length>0?n.last().after(e.$el):t.after(e.$el),this},getGroup:function(e){var t=this.get(e);return t?t.model:this.model.create({name:e,id:h(e)})},addContactToGroup:function(e,t){this.getGroup(t).contacts.add(e)},addExistingContact:function(t){var n;e.roster_groups?(n=t.get("groups"),0===n.length&&(n=[x])):n=[y],f.each(n,f.bind(this.addContactToGroup,this,t))},addRosterContact:function(e){return"both"===e.get("subscription")||"to"===e.get("subscription")?this.addExistingContact(e):"subscribe"===e.get("ask")||"from"===e.get("subscription")?this.addContactToGroup(e,b):e.get("requesting")===!0&&this.addContactToGroup(e,w),this}}),e.RosterContactView=u.View.extend({tagName:"dd",events:{"click .accept-xmpp-request":"acceptRequest","click .decline-xmpp-request":"declineRequest","click .open-chat":"openChat","click .remove-xmpp-contact":"removeContact"},initialize:function(){this.model.on("change",this.render,this),this.model.on("remove",this.remove,this),this.model.on("destroy",this.remove,this),this.model.on("open",this.openChat,this)},render:function(){var t=this;if(!this.mayBeShown())return this.$el.hide(),this;var r=this.model,o=r.get("ask"),s=r.get("chat_status"),a=r.get("requesting"),u=r.get("subscription"),l=["current-xmpp-contact","pending-xmpp-contact","requesting-xmpp-contact"].concat(f.keys(_));return f.each(l,function(e){f.includes(t.el.className,e)&&t.el.classList.remove(e)}),this.$el.addClass(s).data("status",s),"subscribe"===o||"from"===u?(this.el.classList.add("pending-xmpp-contact"),this.$el.html(n(f.extend(r.toJSON(),{desc_remove:p(m("Click to remove %1$s as a contact"),r.get("fullname")),allow_chat_pending_contacts:e.allow_chat_pending_contacts})))):a===!0?(this.el.classList.add("requesting-xmpp-contact"),this.$el.html(i(f.extend(r.toJSON(),{desc_accept:p(m("Click to accept the contact request from %1$s"),r.get("fullname")),desc_decline:p(m("Click to decline the contact request from %1$s"),r.get("fullname")),allow_chat_pending_contacts:e.allow_chat_pending_contacts})))):"both"!==u&&"to"!==u||(this.el.classList.add("current-xmpp-contact"),this.el.classList.remove(f.without(["both","to"],u)[0]),this.el.classList.add(u),this.renderRosterItem(r)),this},renderRosterItem:function(t){var n=t.get("chat_status");return this.$el.html(s(f.extend(t.toJSON(),{desc_status:_[n||"offline"],desc_chat:p("Click to chat with this contact"),desc_remove:p(m("Click to remove %1$s as a contact"),t.get("fullname")),title_fullname:p("Name"),allow_contact_removal:e.allow_contact_removal,num_unread:t.get("num_unread")||0}))),this},isGroupCollapsed:function(){var t=this.$el.prevAll("dt:first").data("group"),n=f.head(e.rosterview.model.where({name:t.toString()}));return n.get("state")===e.CLOSED},mayBeShown:function(){var t=this.model.get("chat_status");return!(e.show_only_online_users&&"online"!==t||e.hide_offline_users&&"offline"===t)||("subscribe"===this.model.get("ask")||"from"===this.model.get("subscription")||this.model.get("requesting")===!0)},openChat:function(t){return t&&t.preventDefault&&t.preventDefault(),e.chatboxviews.showChat(this.model.attributes,!0)},removeContact:function(t){if(t&&t.preventDefault&&t.preventDefault(),e.allow_contact_removal){var n=confirm(p("Are you sure you want to remove this contact?"));if(n===!0){var i=d({type:"set"}).c("query",{xmlns:c.NS.ROSTER}).c("item",{jid:this.model.get("jid"),subscription:"remove"});e.connection.sendIQ(i,function(e){this.model.destroy(),this.remove()}.bind(this),function(t){alert(p("Sorry, there was an error while trying to remove "+name+" as a contact.")),e.log(t,c.LogLevel.ERROR)})}}},acceptRequest:function(t){t&&t.preventDefault&&t.preventDefault(),e.roster.sendContactAddIQ(this.model.get("jid"),this.model.get("fullname"),[],function(){this.model.authorize().subscribe()}.bind(this))},declineRequest:function(e){e&&e.preventDefault&&e.preventDefault();var t=confirm(p("Are you sure you want to decline this contact request?"));return t===!0&&this.model.unauthorize().destroy(),this}}),e.RosterGroupView=u.Overview.extend({tagName:"dt",className:"roster-group",events:{"click a.group-toggle":"toggle"},initialize:function(){this.model.contacts.on("add",this.addContact,this),this.model.contacts.on("change:subscription",this.onContactSubscriptionChange,this),this.model.contacts.on("change:requesting",this.onContactRequestChange,this),this.model.contacts.on("change:chat_status",function(e){this.model.contacts.sort(),this.positionContact(e).render()},this),this.model.contacts.on("destroy",this.onRemove,this),this.model.contacts.on("remove",this.onRemove,this),e.roster.on("change:groups",this.onContactGroupChange,this)},render:function(){this.el.setAttribute("data-group",this.model.get("name"));var e=t({label_group:this.model.get("name"),desc_group_toggle:this.model.get("description"),toggle_state:this.model.get("state")});return this.el.innerHTML=e,this},addContact:function(t){var n=new e.RosterContactView({model:t});this.add(t.get("id"),n),n=this.positionContact(t).render(),n.mayBeShown()&&(this.model.get("state")===e.CLOSED?("none"!==n.$el[0].style.display&&n.$el.hide(),this.$el.is(":visible")||this.$el.show()):"block"!==this.$el[0].style.display&&this.show())},positionContact:function(e){var t=this.get(e.get("id")),n=this.model.contacts.indexOf(e);return t.$el.detach(),0===n?this.$el.after(t.$el):n===this.model.contacts.length-1?this.$el.nextUntil("dt").last().after(t.$el):this.$el.nextUntil("dt").eq(n).before(t.$el),t},show:function(){return this.$el.show(),f.each(this.getAll(),function(e){e.mayBeShown()&&!e.isGroupCollapsed()&&e.$el.show()}),this},hide:function(){this.$el.nextUntil("dt").addBack().hide()},filter:function(t,n){var i;0===t.length?(this.model.get("state")===e.OPENED&&this.model.contacts.each(function(e){var t=this.get(e.get("id"));t.mayBeShown()&&!t.isGroupCollapsed()&&t.$el.show()}.bind(this)),this.showIfNecessary()):(t=t.toLowerCase(),i="state"===n?this.model.get("name")===w?this.model.contacts.filter(function(e){return l.contains.not("chat_status",t)(e)&&!e.get("requesting")}):"unread_messages"===t?this.model.contacts.filter({num_unread:0}):this.model.contacts.filter(l.contains.not("chat_status",t)):this.model.contacts.filter(l.contains.not("fullname",t)),i.length===this.model.contacts.length?this.hide():(f.each(i,function(e){this.get(e.get("id")).$el.hide()}.bind(this)),f.each(this.model.contacts.reject(l.contains.not("fullname",t)),function(e){this.get(e.get("id")).$el.show()}.bind(this)),this.showIfNecessary()))},showIfNecessary:function(){!this.$el.is(":visible")&&this.model.contacts.length>0&&this.$el.show()},toggle:function(t){t&&t.preventDefault&&t.preventDefault();var n=a(t.target);n.hasClass("icon-opened")?(this.$el.nextUntil("dt").slideUp(),this.model.save({state:e.CLOSED}),n.removeClass("icon-opened").addClass("icon-closed")):(n.removeClass("icon-closed").addClass("icon-opened"),this.model.save({state:e.OPENED}),this.filter(e.rosterview.$(".roster-filter").val()||"",e.rosterview.$(".filter-type").val()))},onContactGroupChange:function(e){var t=f.includes(e.get("groups"),this.model.get("name")),n=e.get("id"),i=!this.get(n);t&&!i?this.model.contacts.remove(n):!t&&i&&this.addContact(e)},onContactSubscriptionChange:function(e){this.model.get("name")===b&&"from"!==e.get("subscription")&&this.model.contacts.remove(e.get("id"))},onContactRequestChange:function(e){this.model.get("name")!==w||e.get("requesting")||(this.model.contacts.remove(e.get("id"),{silent:!0}),this.get(e.get("id")).remove(),this.onRemove(e))},onRemove:function(e){this.remove(e.get("id")),0===this.model.contacts.length&&this.$el.hide()}});var C=function(t){var n=t.model;if("chatroom"!==n.get("type")){var i=f.head(e.roster.where({jid:n.get("jid")}));f.isUndefined(i)||n.isScrolledUp()||i.save({num_unread:0})}},k=function(t){var n=t.chatbox;if(!f.isUndefined(n)&&!f.isNull(t.stanza.querySelector("body"))&&"chatroom"!==n.get("type")&&l.isNewMessage(t.stanza)&&n.newMessageWillBeHidden()){var i=f.head(e.roster.where({jid:n.get("jid")}));f.isUndefined(i)||i.save({num_unread:i.get("num_unread")+1})}},A=function(t){var n=t.chatbox;if(!f.isUndefined(n)){var i=f.head(e.roster.where({jid:n.get("jid")}));f.isUndefined(i)||i.save({num_unread:0})}},T=function(){e.rosterview=new e.RosterView({model:e.rostergroups}),e.rosterview.render()};e.api.listen.on("rosterInitialized",T),e.api.listen.on("rosterReadyAfterReconnection",T),e.api.listen.on("message",k),e.api.listen.on("chatBoxMaximized",C),e.api.listen.on("chatBoxScrolledDown",A)}})}),function(e,t){define("converse-controlbox",["converse-core","tpl!add_contact_dropdown","tpl!add_contact_form","tpl!change_status_message","tpl!chat_status","tpl!choose_status","tpl!contacts_panel","tpl!contacts_tab","tpl!controlbox","tpl!controlbox_toggle","tpl!login_panel","tpl!login_tab","tpl!search_contact","tpl!status_option","converse-chatview","converse-rosterview"],t)}(this,function(e,t,n,i,r,o,s,a,u,l,c,d,h,f){"use strict";var p="users",m="chatbox",_=e.env.Strophe,g=e.env.Backbone,v=e.env.utils,y=e.env.jQuery,b=e.env._,w=e.env.fp,x=e.env.moment;e.plugins.add("converse-controlbox",{overrides:{initChatBoxes:function(){this.__super__.initChatBoxes.apply(this,arguments),this.controlboxtoggle=new this.ControlBoxToggle},initConnection:function(){this.__super__.initConnection.apply(this,arguments),this.connection&&this.addControlBox()},_tearDown:function(){this.__super__._tearDown.apply(this,arguments),this.rosterview&&(this.rosterview.model.off().reset(),this.rosterview.each(function(e){e.removeAll(),e.remove()}),this.rosterview.removeAll().remove())},clearSession:function(){this.__super__.clearSession.apply(this,arguments);var e=this.chatboxes.get("controlbox");e&&e.collection&&e.collection.browserStorage&&e.save({connected:!1})},ChatBoxes:{chatBoxMayBeShown:function(e){return this.__super__.chatBoxMayBeShown.apply(this,arguments)&&"controlbox"!==e.get("id")},onChatBoxesFetched:function(e,t){var n=this.__super__._converse;this.__super__.onChatBoxesFetched.apply(this,arguments),b.includes(b.map(e,"id"),"controlbox")||n.addControlBox(),this.get("controlbox").save({connected:!0})}},ChatBoxViews:{onChatBoxAdded:function(e){var t=this.__super__._converse;if("controlbox"===e.get("box_id")){var n=this.get(e.get("id"));return n?(n.model=e,n.initialize(),n):(n=new t.ControlBoxView({model:e}),this.add(e.get("id"),n))}return this.__super__.onChatBoxAdded.apply(this,arguments)},closeAllChatBoxes:function(){var e=this.__super__._converse;return this.each(function(t){("controlbox"!==t.model.get("id")||e.disconnection_cause===e.LOGOUT&&!e.show_controlbox_by_default)&&t.close()}),this},getChatBoxWidth:function(e){var t=this.__super__._converse,n=this.get("controlbox");return"controlbox"===e.model.get("id")?n&&n.$el.is(":visible")?n.$el.outerWidth(!0):t.controlboxtoggle.$el.outerWidth(!0):this.__super__.getChatBoxWidth.apply(this,arguments)}},ChatBox:{initialize:function(){"controlbox"===this.get("id")?this.set({time_opened:x(0).valueOf()}):this.__super__.initialize.apply(this,arguments)}},ChatBoxView:{insertIntoDOM:function(){var e=this.__super__._converse;return this.$el.insertAfter(e.chatboxviews.get("controlbox").$el),this}}},initialize:function(){var e=this._converse,x=e.__;e.api.settings.update({allow_logout:!0,default_domain:void 0,show_controlbox_by_default:!1,sticky_controlbox:!1,xhr_user_search:!1,xhr_user_search_url:""});var S=x("Contacts");e.addControlBox=function(){return e.chatboxes.add({id:"controlbox",box_id:"controlbox",closed:!e.show_controlbox_by_default})},e.ControlBoxView=e.ChatBoxView.extend({tagName:"div",className:"chatbox",id:"controlbox",events:{"click a.close-chatbox-button":"close","click ul#controlbox-tabs li a":"switchTab"},initialize:function(){this.$el.insertAfter(e.controlboxtoggle.$el),this.model.on("change:connected",this.onConnected,this),this.model.on("destroy",this.hide,this),this.model.on("hide",this.hide,this),this.model.on("show",this.show,this),this.model.on("change:closed",this.ensureClosedState,this),this.render(),this.model.get("connected")&&this.insertRoster()},render:function(){return this.model.get("connected")&&b.isUndefined(this.model.get("closed"))&&this.model.set("closed",!e.show_controlbox_by_default),this.model.get("closed")?this.hide():this.show(),this.el.innerHTML=u(b.extend(this.model.toJSON(),{sticky_controlbox:e.sticky_controlbox})),e.connection.connected&&e.connection.authenticated&&!e.connection.disconnecting?!this.model.get("connected")||this.contactspanel&&this.contactspanel.$el.is(":visible")||this.renderContactsPanel():this.renderLoginPanel(),this},onConnected:function(){this.model.get("connected")&&(this.render().insertRoster(),this.model.save())},insertRoster:function(){return this.contactspanel.$el.append(e.rosterview.$el),this},renderLoginPanel:function(){return this.loginpanel=new e.LoginPanel({$parent:this.$el.find(".controlbox-panes"),model:this}),this.loginpanel.render(),this},renderContactsPanel:function(){b.isUndefined(this.model.get("active-panel"))&&this.model.save({"active-panel":p}),this.contactspanel=new e.ContactsPanel({$parent:this.$el.find(".controlbox-panes")}),this.contactspanel.insertIntoDOM(),e.xmppstatusview=new e.XMPPStatusView({model:e.xmppstatus}),e.xmppstatusview.render()},close:function(t){if(t&&t.preventDefault&&t.preventDefault(),!e.sticky_controlbox)return e.connection.connected&&!e.connection.disconnecting?this.model.save({closed:!0}):this.model.trigger("hide"),e.emit("controlBoxClosed",this),this},ensureClosedState:function(){this.model.get("closed")?this.hide():this.show()},hide:function(t){if(!e.sticky_controlbox)return this.$el.addClass("hidden"),v.refreshWebkit(),e.emit("chatBoxClosed",this),e.connection.connected||e.controlboxtoggle.render(),e.controlboxtoggle.show(t),this},onControlBoxToggleHidden:function(){var t=this;v.fadeIn(this.el,function(){e.controlboxtoggle.updateOnlineCount(),v.refreshWebkit(),t.model.set("closed",!1),e.emit("controlBoxOpened",t)})},show:function(){return e.controlboxtoggle.hide(this.onControlBoxToggleHidden.bind(this)),this},switchTab:function(t){t&&t.preventDefault&&t.preventDefault();var n=y(t.target),i=n.parent().siblings("li").children("a"),r=y(n.attr("href"));return y(i.attr("href")).addClass("hidden"),i.removeClass("current"),n.addClass("current"),r.removeClass("hidden"),b.isUndefined(e.chatboxes.browserStorage)||this.model.save({"active-panel":n.data("id")}),this},showHelpMessages:function(){}}),e.LoginPanel=g.View.extend({tagName:"div",id:"login-dialog",className:"controlbox-pane",events:{"submit form#converse-login":"authenticate"},initialize:function(t){t.$parent.html(this.$el.html(c({ANONYMOUS:e.ANONYMOUS,EXTERNAL:e.EXTERNAL,LOGIN:e.LOGIN,PREBIND:e.PREBIND,auto_login:e.auto_login,authentication:e.authentication,label_username:x("XMPP Username:"),label_password:x("Password:"),label_anon_login:x("Click here to log in anonymously"),label_login:x("Log In"),placeholder_username:(e.locked_domain||e.default_domain)&&x("Username")||x("user@server"),placeholder_password:x("password")}))),this.$tabs=t.$parent.parent().find("#controlbox-tabs")},render:function(){return this.$tabs.append(d({label_sign_in:x("Sign in")})),this.$el.find("input#jid").focus(),this.$el.is(":visible")||this.$el.show(),this},authenticate:function(t){t&&t.preventDefault&&t.preventDefault();var n=y(t.target);if(e.authentication===e.ANONYMOUS)return void this.connect(n,e.jid,null);var i=n.find("input[name=jid]"),r=i.val(),o=n.find("input[name=password]"),s=o.val(),a=!1;return r||(a=!0,i.addClass("error")),s||e.authentication===e.EXTERNAL||(a=!0,o.addClass("error")),a?void 0:(e.locked_domain?r=_.escapeNode(r)+"@"+e.locked_domain:e.default_domain&&!b.includes(r,"@")&&(r=r+"@"+e.default_domain),this.connect(n,r,s),!1)},connect:function(t,n,i){var r;t&&t.find("input[type=submit]").hide().after('<span class="spinner login-submit"/>'),n&&(r=_.getResourceFromJid(n),n=r?_.getBareJidFromJid(n).toLowerCase()+"/"+r:n.toLowerCase()+e.generateResource()),e.connection.reset(),e.connection.connect(n,i,e.onConnectStatusChanged)},remove:function(){this.$tabs.empty(),this.$el.parent().empty()}}),e.XMPPStatusView=g.View.extend({el:"form#set-xmpp-status",events:{"click a.choose-xmpp-status":"toggleOptions","click #fancy-xmpp-status-select a.change-xmpp-status-message":"renderStatusChangeForm",submit:"setStatusMessage","click .dropdown dd ul li a":"setStatus"},initialize:function(){this.model.on("change:status",this.updateStatusUI,this),this.model.on("change:status_message",this.updateStatusUI,this),this.model.on("update-status-ui",this.updateStatusUI,this)},render:function(){var e,t=this.$el.find("select#select-xmpp-status"),n=this.model.get("status")||"offline",i=y("option",t),s=[];return this.$el.html(o()),this.$el.find("#fancy-xmpp-status-select").html(r({status_message:this.model.get("status_message")||x("I am %1$s",this.getPrettyStatus(n)),chat_status:n,desc_custom_status:x("Click here to write a custom status message"),desc_change_status:x("Click to change your chat status")})),i.each(function(){s.push(f({value:y(this).val(),text:this.text}))}),e=this.$el.find("#target dd ul").hide(),e.append(s.join("")),t.remove(),this},toggleOptions:function(e){e.preventDefault(),y(e.target).parent().parent().siblings("dd").find("ul").toggle("fast")},renderStatusChangeForm:function(t){t.preventDefault();var n=e.xmppstatus.get("status_message")||"",r=i({status_message:n,label_custom_status:x("Custom status"),label_save:x("Save")}),o=this.$el.find(".xmpp-status");o.parent().addClass("no-border"),o.replaceWith(r),this.$el.find(".custom-xmpp-status").focus().focus()},setStatusMessage:function(e){e.preventDefault(),this.model.setStatusMessage(y(e.target).find("input").val())},setStatus:function(t){t.preventDefault();var n=y(t.currentTarget),i=n.attr("data-value");"logout"===i?(this.$el.find(".dropdown dd ul").hide(),e.logOut()):(this.model.setStatus(i),this.$el.find(".dropdown dd ul").hide())},getPrettyStatus:function(e){return"chat"===e?x("online"):"dnd"===e?x("busy"):"xa"===e?x("away for long"):"away"===e?x("away"):"offline"===e?x("offline"):x(e)||x("online")},updateStatusUI:function(e){var t=e.get("status"),n=e.get("status_message")||x("I am %1$s",this.getPrettyStatus(t));this.$el.find("#fancy-xmpp-status-select").removeClass("no-border").html(r({chat_status:t,status_message:n,desc_custom_status:x("Click here to write a custom status message"),desc_change_status:x("Click to change your chat status")}))}}),e.ContactsPanel=g.View.extend({tagName:"div",className:"controlbox-pane",id:"users",events:{"click a.toggle-xmpp-contact-form":"toggleContactForm","submit form.add-xmpp-contact":"addContactFromForm","submit form.search-xmpp-contact":"searchContacts","click a.subscribe-to-user":"addContactFromList"},initialize:function(t){this.parent_el=t.$parent[0],this.tab_el=document.createElement("li"),e.chatboxes.on("change:num_unread",this.renderTab,this),e.chatboxes.on("add",b.debounce(this.renderTab,100),this)},render:function(){this.renderTab();var n=s({label_online:x("Online"),label_busy:x("Busy"),label_away:x("Away"),label_offline:x("Offline"),label_logout:x("Log out"),include_offline_state:e.include_offline_state,allow_logout:e.allow_logout});e.allow_contact_requests&&(n+=t({label_click_to_chat:x("Click to add new chat contacts"),label_add_contact:x("Add a contact")})),this.el.innerHTML=n;var i=e.chatboxes.get("controlbox");return i.get("active-panel")!==p&&this.el.classList.add("hidden"),this},renderTab:function(){var t=e.chatboxes.get("controlbox"),n=w.filter(b.partial(v.isOfType,m),e.chatboxes.models);this.tab_el.innerHTML=a({label_contacts:S,is_current:t.get("active-panel")===p,num_unread:w.sum(w.map(w.curry(v.getAttribute)("num_unread"),n))})},insertIntoDOM:function(){return this.parent_el.appendChild(this.render().el),this.tabs=this.parent_el.parentNode.querySelector("#controlbox-tabs"),this.tabs.appendChild(this.tab_el),this.$(".search-xmpp ul").append(this.generateAddContactHTML()),this},generateAddContactHTML:function(){return e.xhr_user_search?h({label_contact_name:x("Contact name"),label_search:x("Search")}):n({label_contact_username:x("e.g. user@example.org"),label_add:x("Add")})},toggleContactForm:function(e){e.preventDefault(),this.$el.find(".search-xmpp").toggle("fast",function(){y(this).is(":visible")&&y(this).find("input.username").focus()})},searchContacts:function(t){t.preventDefault(),y.getJSON(e.xhr_user_search_url+"?q="+y(t.target).find("input.username").val(),function(e){var t=y(".search-xmpp ul");t.find("li.found-user").remove(),t.find("li.chat-info").remove(),e.length||t.append('<li class="chat-info">'+x("No users found")+"</li>"),y(e).each(function(e,n){t.append(y('<li class="found-user"></li>').append(y('<a class="subscribe-to-user" href="#" title="'+x("Click to add as a chat contact")+'"></a>').attr("data-recipient",_.getNodeFromJid(n.id)+"@"+_.getDomainFromJid(n.id)).text(n.fullname)))})})},addContactFromForm:function(t){t.preventDefault();var n=y(t.target).find("input"),i=n.val();return i?(e.roster.addAndSubscribe(i),void y(".search-xmpp").hide()):void n.addClass("error")},addContactFromList:function(t){t.preventDefault();var n=y(t.target),i=n.attr("data-recipient"),r=n.text();e.roster.addAndSubscribe(i,r),n.parent().remove(),y(".search-xmpp").hide()}}),e.ControlBoxToggle=g.View.extend({tagName:"a",className:"toggle-controlbox hidden",id:"toggle-controlbox",events:{click:"onClick"},attributes:{href:"#"},initialize:function(){e.chatboxviews.$el.prepend(this.render()),this.updateOnlineCount();var t=this;e.on("initialized",function(){e.roster.on("add",t.updateOnlineCount,t),e.roster.on("change",t.updateOnlineCount,t),e.roster.on("destroy",t.updateOnlineCount,t),e.roster.on("remove",t.updateOnlineCount,t)})},render:function(){return this.$el.html(l({label_toggle:x("Toggle chat")}))},updateOnlineCount:b.debounce(function(){if(!b.isUndefined(e.roster)){var t=this.$("#online-count");t.text("("+e.roster.getNumOnlineContacts()+")"),t.is(":visible")||t.show()}},e.animate?100:0),hide:function(e){this.el.classList.add("hidden"),e()},show:function(e){v.fadeIn(this.el,e)},showControlBox:function(){var t=e.chatboxes.get("controlbox");t||(t=e.addControlBox()),e.connection.connected?t.save({closed:!1}):t.trigger("show")},onClick:function(t){if(t.preventDefault(),y("div#controlbox").is(":visible")){var n=e.chatboxes.get("controlbox");e.connection.connected?n.save({closed:!0}):n.trigger("hide")}else this.showControlBox()}});var C=function(){var t=e.chatboxviews.get("controlbox");t.model.set({connected:!1}),t.$("#controlbox-tabs").empty(),t.renderLoginPanel()};e.on("disconnected",C);var k=function(){var t=e.chatboxviews.get("controlbox");t.model.get("connected")?e.chatboxviews.get("controlbox").onConnected():t.model.set({connected:!0})};e.on("reconnected",k)}})}),define("tpl!chatarea",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="chat-area">\n    <div class="chat-content ',show_send_button&&(__p+="chat-content-sendbutton"),__p+='"></div>\n    <div class="new-msgs-indicator hidden">▼ '+__e(unread_msgs)+' ▼</div>\n    <form class="sendXMPPMessage" action="" method="post">\n        ',show_toolbar&&(__p+='\n            <ul class="chat-toolbar no-text-select"></ul>\n        '),__p+='\n        <textarea type="text" class="chat-textarea ',show_send_button&&(__p+="chat-textarea-send-button"),__p+='"\n            placeholder="'+__e(label_message)+'"/>\n    ',show_send_button&&(__p+='\n        <button type="submit" class="pure-button send-button">'+__e(label_send)+"</button>\n    "),__p+="\n    </form>\n</div>\n";return __p}}),define("tpl!chatroom",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="flyout box-flyout">\n    <div class="chat-head chat-head-chatroom"></div>\n    <div class="chat-body chatroom-body"><span class="spinner centered"/></div>\n</div>\n';return __p}}),define("tpl!chatroom_disconnect",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<p class="disconnect-msg">'+__e(disconnect_message)+"</p>\n";return __p}}),define("tpl!chatroom_features",["lodash"],function(_){
return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)has_features&&(__p+='\n<p class="occupants-heading">'+__e(label_features)+"</p>\n"),__p+='\n<ul class="features-list">\n',passwordprotected&&(__p+='\n<li class="feature" title="'+__e(tt_passwordprotected)+'"><span class="icon-lock-2"></span>'+__e(label_passwordprotected)+"</li>\n"),__p+="\n",unsecured&&(__p+='\n<li class="feature" title="'+__e(tt_unsecured)+'"><span class="icon-unlocked"></span>'+__e(label_unsecured)+"</li>\n"),__p+="\n",hidden&&(__p+='\n<li class="feature" title="'+__e(tt_hidden)+'"><span class="icon-eye-blocked"></span>'+__e(label_hidden)+"</li>\n"),__p+="\n",public&&(__p+='\n<li class="feature" title="'+__e(tt_public)+'"><span class="icon-eye"></span>'+__e(label_public)+"</li>\n"),__p+="\n",membersonly&&(__p+='\n<li class="feature" title="'+__e(tt_membersonly)+'"><span class="icon-address-book"></span>'+__e(label_membersonly)+"</li>\n"),__p+="\n",open&&(__p+='\n<li class="feature" title="'+__e(tt_open)+'"><span class="icon-globe"></span>'+__e(label_open)+"</li>\n"),__p+="\n",persistent&&(__p+='\n<li class="feature" title="'+__e(tt_persistent)+'"><span class="icon-save"></span>'+__e(label_persistent)+"</li>\n"),__p+="\n",temporary&&(__p+='\n<li class="feature" title="'+__e(tt_temporary)+'"><span class="icon-snowflake"></span>'+__e(label_temporary)+"</li>\n"),__p+="\n",nonanonymous&&(__p+='\n<li class="feature" title="'+__e(tt_nonanonymous)+'"><span class="icon-idcard-dark"></span>'+__e(label_nonanonymous)+"</li>\n"),__p+="\n",semianonymous&&(__p+='\n<li class="feature" title="'+__e(tt_semianonymous)+'"><span class="icon-info"></span>'+__e(label_semianonymous)+"</li>\n"),__p+="\n",moderated&&(__p+='\n<li class="feature" title="'+__e(tt_moderated)+'"><span class="icon-legal"></span>'+__e(label_moderated)+"</li>\n"),__p+="\n",unmoderated&&(__p+='\n<li class="feature" title="'+__e(tt_unmoderated)+'"><span class="icon-info"></span>'+__e(label_unmoderated)+"</li>\n"),__p+="\n",mam_enabled&&(__p+='\n<li class="feature" title="'+__e(tt_mam_enabled)+'"><span class="icon-database"></span>'+__e(label_mam_enabled)+"</li>\n"),__p+="\n</ul>\n";return __p}}),define("tpl!chatroom_form",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="chatroom-form-container">\n    <form class="pure-form pure-form-stacked converse-form chatroom-form">\n        <fieldset>\n            <span class="spinner centered"/>\n        </fieldset>\n    </form>\n</div>\n';return __p}}),define("tpl!chatroom_head",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<a class="chatbox-btn close-chatbox-button icon-close" title="'+__e(info_close)+'"></a>\n',"owner"==affiliation&&(__p+='\n    <a class="chatbox-btn configure-chatroom-button icon-wrench" title="'+__e(info_configure)+' "></a>\n'),__p+='\n<div class="chat-title" title="'+__e(jid)+'">\n    '+__e(name)+'\n    <p class="chatroom-description">'+__e(description)+"<p/>\n</div>\n";return __p}}),define("tpl!chatroom_invite",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<form class="pure-form room-invite">\n    <input class="invited-contact" placeholder="'+__e(label_invitation)+'" type="text"/>\n</form>\n';return __p}}),define("tpl!chatroom_nickname_form",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="chatroom-form-container">\n    <form class="pure-form converse-form chatroom-form converse-centered-form">\n        <fieldset>\n            <label>'+__e(heading)+'</label>\n            <p class="validation-message">'+__e(validation_message)+'</p>\n            <input type="text" required="required" name="nick" class="new-chatroom-nick" placeholder="'+__e(label_nickname)+'"/>\n        </fieldset>\n        <fieldset>\n            <input type="submit" class="pure-button button-primary" name="join" value="'+__e(label_join)+'"/>\n        </fieldset>\n    </form>\n</div>\n';return __p}}),define("tpl!chatroom_password_form",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="chatroom-form-container">\n    <form class="pure-form converse-form chatroom-form">\n        <fieldset>\n            <legend>'+__e(heading)+"</legend>\n            <label>"+__e(label_password)+'</label>\n            <input type="password" name="password"/>\n        </fieldset>\n        <fieldset>\n            <input class="pure-button button-primary" type="submit" value="'+__e(label_submit)+'"/>\n        </fieldset>\n    </form>\n</div>\n';return __p}}),define("tpl!chatroom_sidebar",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!-- <div class="occupants"> -->\n<p class="occupants-heading">'+__e(label_occupants)+'</p>\n<ul class="occupant-list"></ul>\n<div class="chatroom-features"></div>\n<!-- </div> -->\n';return __p}}),define("tpl!chatroom_toolbar",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)show_emoticons&&(__p+='\n    <li class="toggle-smiley icon-happy" title="'+__e(label_insert_smiley)+'">\n        <ul class="toolbar-picker-panel">\n            <li><a class="icon-smiley" href="#" data-emoticon=":)"></a></li>\n            <li><a class="icon-wink" href="#" data-emoticon=";)"></a></li>\n            <li><a class="icon-grin" href="#" data-emoticon=":D"></a></li>\n            <li><a class="icon-tongue" href="#" data-emoticon=":P"></a></li>\n            <li><a class="icon-cool" href="#" data-emoticon="8)"></a></li>\n            <li><a class="icon-evil" href="#" data-emoticon=">:)"></a></li>\n            <li><a class="icon-confused" href="#" data-emoticon=":S"></a></li>\n            <li><a class="icon-wondering" href="#" data-emoticon=":\\"></a></li>\n            <li><a class="icon-angry" href="#" data-emoticon=">:("></a></li>\n            <li><a class="icon-sad" href="#" data-emoticon=":("></a></li>\n            <li><a class="icon-shocked" href="#" data-emoticon=":O"></a></li>\n            <li><a class="icon-thumbs-up" href="#" data-emoticon="(^.^)b"></a></li>\n            <li><a class="icon-heart" href="#" data-emoticon="<3"></a></li>\n        </ul>\n    </li>\n'),__p+="\n",show_call_button&&(__p+='\n<li class="toggle-call"><a class="icon-phone" title="'+__e(label_start_call)+'"></a></li>\n'),__p+="\n",show_occupants_toggle&&(__p+='\n<li class="toggle-occupants"><a class="icon-hide-users" title="'+__e(label_hide_occupants)+'"></a></li>\n'),__p+="\n",show_clear_button&&(__p+='\n<li class="toggle-clear"><a class="icon-trash" title="'+__e(label_clear)+'"></a></li>\n'),__p+="\n\n";return __p}}),define("tpl!chatrooms_tab",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<a class="s rooms-tab\n   ',is_current&&(__p+=" current "),__p+="\n   ",num_unread&&(__p+=" unread-msgs "),__p+='"\n       data-id="chatrooms" href="#chatrooms">\n    '+(null==(__t=label_rooms)?"":__t)+"\n    ",num_unread&&(__p+='\n        <span class="msgs-indicator">'+__e(num_unread)+"</span>\n    "),__p+="\n</a>\n";return __p}}),define("tpl!info",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="chat-info">'+__e(message)+"</div>\n";return __p}}),define("tpl!occupant",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<li class="'+__e(role)+' occupant" id="'+__e(id)+'"\n    ',"moderator"===role&&(__p+='\n       title="'+__e(jid)+" "+__e(desc_moderator)+" "+__e(hint_occupant)+'"\n    '),__p+="\n    ","occupant"===role&&(__p+='\n       title="'+__e(jid)+" "+__e(desc_occupant)+" "+__e(hint_occupant)+'"\n    '),__p+="\n    ","visitor"===role&&(__p+='\n       title="'+__e(jid)+" "+__e(desc_visitor)+" "+__e(hint_occupant)+'"\n    '),__p+="\n    ",_.includes(["visitor","occupant","moderator"],role)||(__p+='\n       title="'+__e(jid)+" "+__e(hint_occupant)+'"\n       '),__p+='><div class="occupant-status occupant-'+__e(show)+' circle" title="'+__e(hint_show)+'"></div>'+__e(nick)+"</li>\n";return __p}}),define("tpl!room_description",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<!-- FIXME: check markup in mockup -->\n<div class="room-info">\n<p class="room-info"><strong>'+__e(label_server)+"</strong> "+__e(server)+'</p>\n<p class="room-info"><strong>'+__e(label_desc)+"</strong> "+__e(desc)+'</p>\n<p class="room-info"><strong>'+__e(label_occ)+"</strong> "+__e(occ)+'</p>\n<p class="room-info"><strong>'+__e(label_features)+"</strong>\n    <ul>\n        ",passwordprotected&&(__p+='\n        <li class="room-info locked">'+__e(label_requires_auth)+"</li>\n        "),__p+="\n        ",hidden&&(__p+='\n        <li class="room-info">'+__e(label_hidden)+"</li>\n        "),__p+="\n        ",membersonly&&(__p+='\n        <li class="room-info">'+__e(label_requires_invite)+"</li>\n        "),__p+="\n        ",moderated&&(__p+='\n        <li class="room-info">'+__e(label_moderated)+"</li>\n        "),__p+="\n        ",nonanonymous&&(__p+='\n        <li class="room-info">'+__e(label_non_anon)+"</li>\n        "),__p+="\n        ",open&&(__p+='\n        <li class="room-info">'+__e(label_open_room)+"</li>\n        "),__p+="\n        ",persistent&&(__p+='\n        <li class="room-info">'+__e(label_permanent_room)+"</li>\n        "),__p+="\n        ",publicroom&&(__p+='\n        <li class="room-info">'+__e(label_public)+"</li>\n        "),__p+="\n        ",semianonymous&&(__p+='\n        <li class="room-info">'+__e(label_semi_anon)+"</li>\n        "),__p+="\n        ",temporary&&(__p+='\n        <li class="room-info">'+__e(label_temp_room)+"</li>\n        "),__p+="\n        ",unmoderated&&(__p+='\n        <li class="room-info">'+__e(label_unmoderated)+"</li>\n        "),__p+="\n    </ul>\n</p>\n</div>\n";return __p}}),define("tpl!room_item",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<dd class="available-chatroom">\n<a class="open-room" data-room-jid="'+__e(jid)+'"\n   title="'+__e(open_title)+'" href="#">'+__e(_.escape(name))+'</a>\n<a class="right room-info icon-room-info" data-room-jid="'+__e(jid)+'"\n   title="'+__e(info_title)+'" href="#">&nbsp;</a>\n</dd>\n';return __p}}),define("tpl!room_panel",["lodash"],function(_){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<form class="pure-form pure-form-stacked converse-form add-chatroom" action="" method="post">\n    <fieldset>\n        <label>'+(null==(__t=label_room_name)?"":__t)+'</label>\n        <input type="text" name="chatroom" class="new-chatroom-name" placeholder="'+(null==(__t=label_room_name)?"":__t)+'"/>\n        ',"hidden"!=server_input_type&&(__p+="\n            <label"+(null==(__t=server_label_global_attr)?"":__t)+">"+(null==(__t=label_server)?"":__t)+"</label>\n        "),__p+='\n        <input type="'+(null==(__t=server_input_type)?"":__t)+'" name="server" class="new-chatroom-server" placeholder="'+(null==(__t=label_server)?"":__t)+'"/>\n        <input type="submit" class="pure-button button-primary" name="join" value="'+(null==(__t=label_join)?"":__t)+'"/>\n        <input type="button" class="pure-button button-secondary" name="show" id="show-rooms" value="'+(null==(__t=label_show_rooms)?"":__t)+'"/>\n    </fieldset>\n</form>\n<div class="rooms-list-container">\n    <dl id="available-chatrooms" class="rooms-list"></dl>\n</div>\n';return __p}}),function(){function e(e){var t=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=t.label||t.value,this.value=t.value}function t(e,t,n){for(var i in t){var r=t[i],o=e.input.getAttribute("data-"+i.toLowerCase());"number"==typeof r?e[i]=parseInt(o):r===!1?e[i]=null!==o:r instanceof Function?e[i]=null:e[i]=o,e[i]||0===e[i]||(e[i]=i in n?n[i]:r)}}function n(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function i(e,t){return s.call((t||document).querySelectorAll(e))}function r(){i("input.awesomplete").forEach(function(e){new o(e)})}var o=function(e,i){var r=this;this.isOpened=!1,this.input=n(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),i=i||{},t(this,{minChars:2,maxItems:10,autoFirst:!1,data:o.DATA,filter:o.FILTER_CONTAINS,sort:i.sort!==!1&&o.SORT_BYLENGTH,item:o.ITEM,replace:o.REPLACE},i),this.index=-1,this.container=n.create("div",{className:"awesomplete",around:e}),this.ul=n.create("ul",{hidden:"hidden",inside:this.container}),this.status=n.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;r.opened&&(13===t&&r.selected?(e.preventDefault(),r.select()):27===t?r.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),r[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),r.select(t,e.target))}}}},n.bind(this.input,this._events.input),n.bind(this.input.form,this._events.form),n.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||i.list||[],o.all.push(this)};o.prototype={set list(e){if(Array.isArray(e))this._list=e;else if("string"==typeof e&&e.indexOf(",")>-1)this._list=e.split(/\s*,\s*/);else if(e=n(e),e&&e.children){var t=[];s.apply(e.children).forEach(function(e){if(!e.disabled){var n=e.textContent.trim(),i=e.value||n,r=e.label||n;""!==i&&t.push({label:r,value:i})}}),this._list=t}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(e){this.opened&&(this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,n.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.ul.removeAttribute("hidden"),this.isOpened=!0,this.autoFirst&&this.index===-1&&this.goto(0),n.fire(this.input,"awesomplete-open")},destroy:function(){n.unbind(this.input,this._events.input),n.unbind(this.input.form,this._events.form);var e=this.container.parentNode;e.insertBefore(this.input,this.container),e.removeChild(this.container),this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var t=o.all.indexOf(this);t!==-1&&o.all.splice(t,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&t!==-1?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&t.length>0&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent,this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,n.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t){if(e?this.index=n.siblingIndex(e):e=this.ul.children[this.index],e){var i=this.suggestions[this.index],r=n.fire(this.input,"awesomplete-select",{text:i,origin:t||e});r&&(this.replace(i),this.close({reason:"select"}),n.fire(this.input,"awesomplete-selectcomplete",{text:i}))}},evaluate:function(){var t=this,n=this.input.value;n.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(i){return new e(t.data(i,n))}).filter(function(e){return t.filter(e,n)}),this.sort!==!1&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(e){t.ul.appendChild(t.item(e,n))}),0===this.ul.children.length?this.close({reason:"nomatches"}):this.open()):this.close({reason:"nomatches"})}},o.all=[],o.FILTER_CONTAINS=function(e,t){return RegExp(n.regExpEscape(t.trim()),"i").test(e)},o.FILTER_STARTSWITH=function(e,t){return RegExp("^"+n.regExpEscape(t.trim()),"i").test(e)},o.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},o.ITEM=function(e,t){t=t.trim();var n=document.createElement("li");n.setAttribute("aria-selected","false");var i=new RegExp("("+t+")","ig"),r=t?e.split(i):[e];return r.forEach(function(e){if(t&&e.match(i)){var r=document.createElement("mark");r.textContent=e,n.appendChild(r)}else n.appendChild(document.createTextNode(e))}),n},o.REPLACE=function(e){this.input.value=e.value},o.DATA=function(e){return e},Object.defineProperty(e.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),e.prototype.toString=e.prototype.valueOf=function(){return""+this.label};var s=Array.prototype.slice;return n.create=function(e,t){var i=document.createElement(e);for(var r in t){var o=t[r];if("inside"===r)n(o).appendChild(i);else if("around"===r){var s=n(o);s.parentNode.insertBefore(i,s),i.appendChild(s)}else r in i?i[r]=o:i.setAttribute(r,o)}return i},n.bind=function(e,t){if(e)for(var n in t){var i=t[n];n.split(/\s+/).forEach(function(t){e.addEventListener(t,i)})}},n.unbind=function(e,t){if(e)for(var n in t){var i=t[n];n.split(/\s+/).forEach(function(t){e.removeEventListener(t,i)})}},n.fire=function(e,t,n){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0);for(var r in n)i[r]=n[r];return e.dispatchEvent(i)},n.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},n.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof Document&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),o.$=n,o.$$=i,"undefined"!=typeof self&&(self.Awesomplete=o),"object"==typeof module&&module.exports&&(module.exports=o),o}(),define("awesomplete",function(e){return function(){var t;return t||e.Awesomplete}}(this)),function(e,t){define("converse-muc",["converse-core","tpl!chatarea","tpl!chatroom","tpl!chatroom_disconnect","tpl!chatroom_features","tpl!chatroom_form","tpl!chatroom_head","tpl!chatroom_invite","tpl!chatroom_nickname_form","tpl!chatroom_password_form","tpl!chatroom_sidebar","tpl!chatroom_toolbar","tpl!chatrooms_tab","tpl!info","tpl!occupant","tpl!room_description","tpl!room_item","tpl!room_panel","tpl!spinner","awesomplete","converse-chatview"],t)}(this,function(e,t,n,i,r,o,s,a,u,l,c,d,h,f,p,m,_,g,v,y){"use strict";var b="chatrooms",w="chatroom",x=e.env.Strophe,S=e.env.Backbone,C=e.env.$iq,k=e.env.$build,A=e.env.$msg,T=e.env.$pres,M=e.env.b64_sha1,N=e.env.sizzle,E=e.env.utils,j=e.env.jQuery,D=e.env._,R=e.env.fp,L=e.env.moment;x.addNamespace("MUC_ADMIN",x.NS.MUC+"#admin"),x.addNamespace("MUC_OWNER",x.NS.MUC+"#owner"),x.addNamespace("MUC_REGISTER","jabber:iq:register"),x.addNamespace("MUC_ROOMCONF",x.NS.MUC+"#roomconfig"),x.addNamespace("MUC_USER",x.NS.MUC+"#user");var O=["passwordprotected","unsecured","hidden","public","membersonly","open","persistent","temporary","nonanonymous","semianonymous","moderated","unmoderated","mam_enabled"],I={passwordprotected:"unsecured",unsecured:"passwordprotected",hidden:"public",public:"hidden",membersonly:"open",open:"membersonly",persistent:"temporary",temporary:"persistent",nonanonymous:"semianonymous",semianonymous:"nonanonymous",moderated:"unmoderated",unmoderated:"moderated"},F={CONNECTED:0,CONNECTING:1,NICKNAME_REQUIRED:2,PASSWORD_REQUIRED:3,DISCONNECTED:4,ENTERED:5};e.plugins.add("converse-muc",{optional_dependencies:["converse-controlbox"],overrides:{_tearDown:function(){var e=this.chatboxes.where({type:w});D.each(e,function(e){E.safeSave(e,{connection_status:F.DISCONNECTED})}),this.__super__._tearDown.call(this,arguments)},Features:{addClientFeatures:function(){var e=this.__super__._converse;this.__super__.addClientFeatures.apply(this,arguments),e.allow_muc_invitations&&e.connection.disco.addFeature("jabber:x:conference"),e.allow_muc&&e.connection.disco.addFeature(x.NS.MUC)}},ChatBoxes:{model:function(e,t){var n=this.__super__._converse;return e.type==w?new n.ChatRoom(e,t):this.__super__.model.apply(this,arguments)}},ControlBoxView:{renderRoomsPanel:function(){var e=this.__super__._converse;this.roomspanel=new e.RoomsPanel({$parent:this.$el.find(".controlbox-panes"),model:new(S.Model.extend({id:M("converse.roomspanel"+e.bare_jid),browserStorage:new S.BrowserStorage[e.storage](M("converse.roomspanel"+e.bare_jid))}))}),this.roomspanel.insertIntoDOM().model.fetch(),this.roomspanel.model.get("nick")||this.roomspanel.model.save({nick:x.getNodeFromJid(e.bare_jid)}),e.emit("roomsPanelRendered")},renderContactsPanel:function(){var e=this.__super__._converse;this.__super__.renderContactsPanel.apply(this,arguments),e.allow_muc&&this.renderRoomsPanel()},onConnected:function(){var e=this.__super__._converse;if(this.__super__.onConnected.apply(this,arguments),this.model.get("connected"))if(D.isUndefined(e.muc_domain)){e.features.off("add",this.featureAdded,this),e.features.on("add",this.featureAdded,this);var t=e.features.findWhere({var:x.NS.MUC});t&&this.featureAdded(t)}else this.setMUCDomain(e.muc_domain)},setMUCDomain:function(e){this.roomspanel.model.save({muc_domain:e});var t=this.$el.find("input.new-chatroom-server");t.is(":focus")||t.val(this.roomspanel.model.get("muc_domain"))},featureAdded:function(e){var t=this.__super__._converse;e.get("var")===x.NS.MUC&&t.allow_muc&&this.setMUCDomain(e.get("from"))}},ChatBoxViews:{onChatBoxAdded:function(e){var t=this.__super__._converse,n=this.get(e.get("id"));return n||e.get("type")!==w?this.__super__.onChatBoxAdded.apply(this,arguments):(n=new t.ChatRoomView({model:e}),this.add(e.get("id"),n))}}},initialize:function(){var e=this._converse,q=e.__,P=e.___;if(e.muc={info_messages:{100:q("This room is not anonymous"),102:q("This room now shows unavailable members"),103:q("This room does not show unavailable members"),104:q("The room configuration has changed"),170:q("Room logging is now enabled"),171:q("Room logging is now disabled"),172:q("This room is now no longer anonymous"),173:q("This room is now semi-anonymous"),174:q("This room is now fully-anonymous"),201:q("A new room has been created")},disconnect_messages:{301:q("You have been banned from this room"),307:q("You have been kicked from this room"),321:q("You have been removed from this room because of an affiliation change"),322:q("You have been removed from this room because the room has changed to members-only and you're not a member"),332:q("You have been removed from this room because the MUC (Multi-user chat) service is being shut down.")},action_info_messages:{301:P("%1$s has been banned"),303:P("%1$s's nickname has changed"),307:P("%1$s has been kicked out"),321:P("%1$s has been removed because of an affiliation change"),322:P("%1$s has been removed for not being a member")},new_nickname_messages:{210:P("Your nickname has been automatically set to: %1$s"),303:P("Your nickname has been changed to: %1$s")}},e.api.settings.update({allow_muc:!0,allow_muc_invitations:!0,auto_join_on_invite:!1,auto_join_rooms:[],auto_list_rooms:!1,hide_muc_server:!1,muc_disable_moderator_commands:!1,muc_domain:void 0,muc_history_max_stanzas:void 0,muc_instant_rooms:!0,muc_nickname_from_jid:!1,muc_show_join_leave:!0,visible_toolbar_buttons:{toggle_occupants:!0}}),e.api.promises.add("roomsPanelRendered"),e.openChatRoom=function(t){return t=D.assign({type:w},t),e.chatboxviews.showChat(t)},e.ChatRoom=e.ChatBox.extend({defaults:function(){return D.assign(D.clone(e.ChatBox.prototype.defaults),D.zipObject(O,D.map(O,D.stubFalse)),{num_unread_general:0,affiliation:null,connection_status:F.DISCONNECTED,description:"",features_fetched:!1,roomconfig:{},type:w})},isUserMentioned:function(e){return new RegExp("\\b"+this.get("nick")+"\\b").test(e)},incrementUnreadMsgCounter:function(t){var n=t.querySelector("body");D.isNull(n)||E.isNewMessage(t)&&this.newMessageWillBeHidden()&&(this.save({num_unread_general:this.get("num_unread_general")+1}),this.isUserMentioned(n.textContent)&&(this.save({num_unread:this.get("num_unread")+1}),e.incrementMsgCounter()))},clearUnreadMsgCounter:function(){E.safeSave(this,{num_unread:0,num_unread_general:0})}}),e.ChatRoomView=e.ChatBoxView.extend({length:300,tagName:"div",className:"chatbox chatroom hidden",is_chatroom:!0,events:{"click .close-chatbox-button":"close","click .configure-chatroom-button":"getAndRenderConfigurationForm","click .toggle-smiley":"toggleEmoticonMenu","click .toggle-smiley ul li":"insertEmoticon","click .toggle-clear":"clearChatRoomMessages","click .toggle-call":"toggleCall","click .toggle-occupants a":"toggleOccupants","click .new-msgs-indicator":"viewUnreadMessages","click .occupant":"onOccupantClicked","keypress .chat-textarea":"keyPressed","click .send-button":"onSendButtonClicked"},initialize:function(){var t=this;this.model.messages.on("add",this.onMessageAdded,this),this.model.on("show",this.show,this),this.model.on("destroy",this.hide,this),this.model.on("change:connection_status",this.afterConnected,this),this.model.on("change:affiliation",this.renderHeading,this),this.model.on("change:chat_state",this.sendChatState,this),this.model.on("change:description",this.renderHeading,this),this.model.on("change:name",this.renderHeading,this),this.createOccupantsView(),this.render().insertIntoDOM(),this.registerHandlers(),this.model.get("connection_status")!==F.ENTERED?this.getRoomFeatures().always(function(){t.join(),t.fetchMessages(),e.emit("chatRoomOpened",t)}):(this.fetchMessages(),e.emit("chatRoomOpened",this))},render:function(){return this.el.setAttribute("id",this.model.get("box_id")),this.el.innerHTML=n(),this.renderHeading(),this.renderChatArea(),this.model.get("connection_status")!==F.ENTERED&&this.showSpinner(),E.refreshWebkit(),this},renderHeading:function(){this.el.querySelector(".chat-head-chatroom").innerHTML=this.generateHeadingHTML()},renderChatArea:function(){return this.$(".chat-area").length||(this.$(".chatroom-body").empty().append(t({label_message:q("Message"),label_send:q("Send"),show_send_button:e.show_send_button,show_toolbar:e.show_toolbar,unread_msgs:q("You have unread messages")})).append(this.occupantsview.$el),this.renderToolbar(d),this.$content=this.$el.find(".chat-content")),this.toggleOccupants(null,!0),this},createOccupantsView:function(){var t=new e.ChatRoomOccupants;t.chatroomview=this,this.occupantsview=new e.ChatRoomOccupantsView({model:t});var n=M("converse.occupants"+e.bare_jid+this.model.get("jid"));return this.occupantsview.model.browserStorage=new S.BrowserStorage.session(n),this.occupantsview.render(),this.occupantsview.model.fetch({add:!0}),this},insertIntoDOM:function(){if(!document.querySelector("body").contains(this.el)){var t=e.chatboxviews.get("controlbox");return t?this.$el.insertAfter(t.$el):j("#conversejs").prepend(this.$el),this}},generateHeadingHTML:function(){return s(D.extend(this.model.toJSON(),{info_close:q("Close and leave this room"),info_configure:q("Configure this room"),description:this.model.get("description")||""}))},afterShown:function(){this.model.collection&&this.model.collection.browserStorage&&this.model.save(),this.occupantsview.setOccupantsHeight()},afterConnected:function(){this.model.get("connection_status")===F.ENTERED&&(this.setChatState(e.ACTIVE),this.scrollDown(),this.focus())},getExtraMessageClasses:function(t){var n=e.ChatBoxView.prototype.getExtraMessageClasses.apply(this,arguments);return this.is_chatroom&&"them"===t.sender&&this.model.isUserMentioned(t.message)&&(n+=" mentioned"),n},getToolbarOptions:function(){return D.extend(e.ChatBoxView.prototype.getToolbarOptions.apply(this,arguments),{label_hide_occupants:q("Hide the list of occupants"),show_occupants_toggle:this.is_chatroom&&e.visible_toolbar_buttons.toggle_occupants})},close:function(e){this.leave()},toggleOccupants:function(e,t){e&&(e.preventDefault(),e.stopPropagation()),t&&this.model.set({hidden_occupants:!this.model.get("hidden_occupants")}),this.model.get("hidden_occupants")?(this.model.save({hidden_occupants:!1}),this.$(".icon-show-users").removeClass("icon-show-users").addClass("icon-hide-users"),this.$(".chat-area").removeClass("full"),this.$("div.occupants").removeClass("hidden"),this.scrollDown()):(this.model.save({hidden_occupants:!0}),this.$(".icon-hide-users").removeClass("icon-hide-users").addClass("icon-show-users"),this.$(".occupants").addClass("hidden"),this.$(".chat-area").addClass("full"),this.scrollDown())},onOccupantClicked:function(e){this.insertIntoTextArea(e.target.textContent)},requestMemberList:function(t,n){var i=new j.Deferred;n=n||"member";var r=C({to:t,type:"get"}).c("query",{xmlns:x.NS.MUC_ADMIN}).c("item",{affiliation:n});return e.connection.sendIQ(r,i.resolve,i.reject),i.promise()},parseMemberListIQ:function(e){return D.map(j(e).find('query[xmlns="'+x.NS.MUC_ADMIN+'"] item'),function(e){return{jid:e.getAttribute("jid"),affiliation:e.getAttribute("affiliation")}})},computeAffiliationsDelta:function(e,t,n,i){var r=D.map(n,"jid"),o=D.map(i,"jid"),s=D.map(D.difference(r,o),function(e){return n[D.indexOf(r,e)]});return e||(s=s.concat(D.filter(n,function(e){var t=D.indexOf(o,e.jid);return t>=0&&e.affiliation!==i[t].affiliation}))),t&&(s=s.concat(D.map(D.difference(o,r),function(e){return{jid:e,affiliation:"none"}}))),s},sendAffiliationIQ:function(t,n,i){var r=new j.Deferred,o=C({to:t,type:"set"}).c("query",{xmlns:x.NS.MUC_ADMIN}).c("item",{affiliation:i.affiliation||n,jid:i.jid});return D.isUndefined(i.reason)||o.c("reason",i.reason),e.connection.sendIQ(o,r.resolve,r.reject),r},setAffiliation:function(e,t){t=D.filter(t,function(t){return D.isUndefined(t.affiliation)||t.affiliation===e});var n=D.map(t,D.partial(this.sendAffiliationIQ,this.model.get("jid"),e));return j.when.apply(j,n)},setAffiliations:function(e,t,n){if(D.isEmpty(e))return void t(null);var i=D.uniq(D.map(e,"affiliation")),r=D.map(i,D.partial(this.setAffiliation.bind(this),D,e));j.when.apply(j,r).done(t).fail(n)},marshallAffiliationIQs:function(){return D.flatMap(arguments,this.parseMemberListIQ)},getJidsWithAffiliations:function(e){D.isString(e)&&(e=[e]);var t=new j.Deferred,n=D.map(e,D.partial(this.requestMemberList,this.model.get("jid")));return j.when.apply(j,n).always(D.flow(this.marshallAffiliationIQs.bind(this),t.resolve)),t.promise()},updateMemberLists:function(e,t,n){var i=this,r=new j.Deferred;return this.getJidsWithAffiliations(t).then(function(t){i.setAffiliations(n(e,t),r.resolve,r.reject)}),r.promise()},directInvite:function(t,n){if(this.model.get("membersonly")){var i={};i[t]="member";var r=D.partial(this.computeAffiliationsDelta,!0,!1);this.updateMemberLists([{jid:t,affiliation:"member",reason:n}],["member","owner","admin"],r)}var o={xmlns:"jabber:x:conference",jid:this.model.get("jid")};null!==n&&(o.reason=n),this.model.get("password")&&(o.password=this.model.get("password"));var s=A({from:e.connection.jid,to:t,id:e.connection.getUniqueId()}).c("x",o);e.connection.send(s),e.emit("roomInviteSent",{room:this,recipient:t,reason:n})},handleChatStateMessage:function(t){t.get("fullname")!==this.model.get("nick")&&t.get("chat_state")!==e.GONE&&e.ChatBoxView.prototype.handleChatStateMessage.apply(this,arguments)},sendChatState:function(){if(this.model.get("connection_status")===F.ENTERED){
var t=this.model.get("chat_state");t!==e.GONE&&e.connection.send(A({to:this.model.get("jid"),type:"groupchat"}).c(t,{xmlns:x.NS.CHATSTATES}).up().c("no-store",{xmlns:x.NS.HINTS}).up().c("no-permanent-store",{xmlns:x.NS.HINTS}))}},sendChatRoomMessage:function(t){var n=e.connection.getUniqueId(),i=A({to:this.model.get("jid"),from:e.connection.jid,type:"groupchat",id:n}).c("body").t(t).up().c("x",{xmlns:"jabber:x:event"}).c(e.COMPOSING);e.connection.send(i),this.model.messages.create({fullname:this.model.get("nick"),sender:"me",time:L().format(),message:t,msgid:n})},modifyRole:function(t,n,i,r,o,s){var a=k("item",{nick:n,role:i}),u=C({to:t,type:"set"}).c("query",{xmlns:x.NS.MUC_ADMIN}).cnode(a.node);return null!==r&&u.c("reason",r),e.connection.sendIQ(u.tree(),o,s)},validateRoleChangeCommand:function(e,t){return!(t.length<1||t.length>2)||(this.showStatusNotification(q('Error: the "'+e+"\" command takes two arguments, the user's nickname and optionally a reason."),!0),!1)},clearChatRoomMessages:function(e){D.isUndefined(e)||e.stopPropagation();var t=confirm(q("Are you sure you want to clear the messages from this room?"));return t===!0&&this.$content.empty(),this},onCommandError:function(){this.showStatusNotification(q("Error: could not execute the command"),!0)},onMessageSubmitted:function(t){if(e.muc_disable_moderator_commands)return this.sendChatRoomMessage(t);var n=t.replace(/^\s*/,"").match(/^\/(.*?)(?: (.*))?$/)||[!1,"",""],i=n[2]&&n[2].splitOnce(" ")||[],r=n[1].toLowerCase();switch(r){case"admin":if(!this.validateRoleChangeCommand(r,i))break;this.setAffiliation("admin",[{jid:i[0],reason:i[1]}]).fail(this.onCommandError.bind(this));break;case"ban":if(!this.validateRoleChangeCommand(r,i))break;this.setAffiliation("outcast",[{jid:i[0],reason:i[1]}]).fail(this.onCommandError.bind(this));break;case"clear":this.clearChatRoomMessages();break;case"deop":if(!this.validateRoleChangeCommand(r,i))break;this.modifyRole(this.model.get("jid"),i[0],"occupant",i[1],void 0,this.onCommandError.bind(this));break;case"help":this.showHelpMessages(["<strong>/admin</strong>: "+q("Change user's affiliation to admin"),"<strong>/ban</strong>: "+q("Ban user from room"),"<strong>/clear</strong>: "+q("Remove messages"),"<strong>/deop</strong>: "+q("Change user role to occupant"),"<strong>/help</strong>: "+q("Show this menu"),"<strong>/kick</strong>: "+q("Kick user from room"),"<strong>/me</strong>: "+q("Write in 3rd person"),"<strong>/member</strong>: "+q("Grant membership to a user"),"<strong>/mute</strong>: "+q("Remove user's ability to post messages"),"<strong>/nick</strong>: "+q("Change your nickname"),"<strong>/op</strong>: "+q("Grant moderator role to user"),"<strong>/owner</strong>: "+q("Grant ownership of this room"),"<strong>/revoke</strong>: "+q("Revoke user's membership"),"<strong>/subject</strong>: "+q("Set room subject"),"<strong>/topic</strong>: "+q("Set room subject (alias for /subject)"),"<strong>/voice</strong>: "+q("Allow muted user to post messages")]);break;case"kick":if(!this.validateRoleChangeCommand(r,i))break;this.modifyRole(this.model.get("jid"),i[0],"none",i[1],void 0,this.onCommandError.bind(this));break;case"mute":if(!this.validateRoleChangeCommand(r,i))break;this.modifyRole(this.model.get("jid"),i[0],"visitor",i[1],void 0,this.onCommandError.bind(this));break;case"member":if(!this.validateRoleChangeCommand(r,i))break;this.setAffiliation("member",[{jid:i[0],reason:i[1]}]).fail(this.onCommandError.bind(this));break;case"nick":e.connection.send(T({from:e.connection.jid,to:this.getRoomJIDAndNick(n[2]),id:e.connection.getUniqueId()}).tree());break;case"owner":if(!this.validateRoleChangeCommand(r,i))break;this.setAffiliation("owner",[{jid:i[0],reason:i[1]}]).fail(this.onCommandError.bind(this));break;case"op":if(!this.validateRoleChangeCommand(r,i))break;this.modifyRole(this.model.get("jid"),i[0],"moderator",i[1],void 0,this.onCommandError.bind(this));break;case"revoke":if(!this.validateRoleChangeCommand(r,i))break;this.setAffiliation("none",[{jid:i[0],reason:i[1]}]).fail(this.onCommandError.bind(this));break;case"topic":case"subject":e.connection.send(A({to:this.model.get("jid"),from:e.connection.jid,type:"groupchat"}).c("subject",{xmlns:"jabber:client"}).t(n[2]).tree());break;case"voice":if(!this.validateRoleChangeCommand(r,i))break;this.modifyRole(this.model.get("jid"),i[0],"occupant",i[1],void 0,this.onCommandError.bind(this));break;default:this.sendChatRoomMessage(t)}},handleMUCMessage:function(e){var t=e.querySelector("status[code='104']"),n=e.querySelector("status[code='170']"),i=e.querySelector("status[code='171']"),r=e.querySelector("status[code='172']"),o=e.querySelector("status[code='173']"),s=e.querySelector("status[code='173']");return(t||n||i||r||o||s)&&this.getRoomFeatures(),D.flow(this.showStatusMessages.bind(this),this.onChatRoomMessage.bind(this))(e),!0},getRoomJIDAndNick:function(e){e?this.model.save({nick:e}):e=this.model.get("nick");var t=this.model.get("jid"),n=x.getNodeFromJid(t),i=x.getDomainFromJid(t);return n+"@"+i+(null!==e?"/"+e:"")},registerHandlers:function(){var t=this.model.get("jid");this.removeHandlers(),this.presence_handler=e.connection.addHandler(this.onChatRoomPresence.bind(this),x.NS.MUC,"presence",null,null,t,{ignoreNamespaceFragment:!0,matchBareFromJid:!0}),this.message_handler=e.connection.addHandler(this.handleMUCMessage.bind(this),null,"message",null,null,t,{matchBareFromJid:!0})},removeHandlers:function(){return this.message_handler&&(e.connection.deleteHandler(this.message_handler),delete this.message_handler),this.presence_handler&&(e.connection.deleteHandler(this.presence_handler),delete this.presence_handler),this},join:function(t,n){if(t=t?t:this.model.get("nick"),!t)return this.checkForReservedNick();if(this.model.get("connection_status")===F.ENTERED)return this;var i=T({from:e.connection.jid,to:this.getRoomJIDAndNick(t)}).c("x",{xmlns:x.NS.MUC}).c("history",{maxstanzas:e.muc_history_max_stanzas}).up();return n&&i.cnode(x.xmlElement("password",[],n)),this.model.save("connection_status",F.CONNECTING),e.connection.send(i),this},sendUnavailablePresence:function(t){var n=T({type:"unavailable",from:e.connection.jid,to:this.getRoomJIDAndNick()});null!==t&&n.c("status",t),e.connection.sendPresence(n)},leave:function(t){this.hide(),this.occupantsview.model.reset(),this.occupantsview.model.browserStorage._clear(),e.connection.connected&&this.sendUnavailablePresence(t),E.safeSave(this.model,{connection_status:F.DISCONNECTED}),this.removeHandlers(),e.ChatBoxView.prototype.close.apply(this,arguments)},renderConfigurationForm:function(e){var t=this,n=this.$(".chatroom-body");n.children().addClass("hidden"),n.find("form.chatroom-form").remove(),n.append(o());var i=n.find("form.chatroom-form"),r=i.children("fieldset:first"),s=j(e),a=s.find("field"),u=s.find("title").text(),l=s.find("instructions").text();r.find("span.spinner").remove(),r.append(j("<legend>").text(u)),l&&l!==u&&r.append(j('<p class="instructions">').text(l)),D.each(a,function(e){r.append(E.xForm2webForm(j(e),s))}),i.append("<fieldset></fieldset>"),r=i.children("fieldset:last"),r.append('<input type="submit" class="pure-button button-primary" value="'+q("Save")+'"/>'),r.append('<input type="button" class="pure-button button-cancel" value="'+q("Cancel")+'"/>'),r.find("input[type=button]").on("click",function(e){e.preventDefault(),t.cancelConfiguration()}),i.on("submit",function(e){e.preventDefault(),t.saveConfiguration(e.target)})},sendConfiguration:function(t,n,i){var r=C({to:this.model.get("jid"),type:"set"}).c("query",{xmlns:x.NS.MUC_OWNER}).c("x",{xmlns:x.NS.XFORM,type:"submit"});return D.each(t||[],function(e){r.cnode(e).up()}),n=D.isUndefined(n)?D.noop:D.partial(n,r.nodeTree),i=D.isUndefined(i)?D.noop:D.partial(i,r.nodeTree),e.connection.sendIQ(r,n,i)},saveConfiguration:function(e){var t=new j.Deferred,n=this,i=j(e).find(":input:not([type=button]):not([type=submit])"),r=[];return i.each(function(){r.push(E.webForm2xForm(this))}),this.sendConfiguration(r,t.resolve,t.reject),this.$el.find("div.chatroom-form-container").hide(function(){j(this).remove(),n.renderAfterTransition()}),t.promise()},autoConfigureChatRoom:function(){var e=this,t=new j.Deferred;return this.fetchRoomConfiguration().then(function(n){var i=[],r=n.querySelectorAll("field"),o=r.length,s=e.model.get("roomconfig");D.each(r,function(n){var r,a=n.getAttribute("var").replace("muc#roomconfig_",""),u=n.getAttribute("type");if(a in s){switch(u){case"boolean":r=s[a]?1:0;break;case"list-multi":r=n.innerHTML;break;default:r=s[a]}n.innerHTML=k("value").t(r)}i.push(n),--o||e.sendConfiguration(i,t.resolve,t.reject)})}),t},cancelConfiguration:function(){var e=this;this.$el.find("div.chatroom-form-container").hide(function(){j(this).remove(),e.renderAfterTransition()})},fetchRoomConfiguration:function(t){var n=this,i=new j.Deferred;return e.connection.sendIQ(C({to:this.model.get("jid"),type:"get"}).c("query",{xmlns:x.NS.MUC_OWNER}),function(e){t&&t.apply(n,arguments),i.resolve(e)},i.reject),i.promise()},getRoomFeatures:function(){var t=new j.Deferred,n=this;return e.connection.disco.info(this.model.get("jid"),null,function(e){var i={features_fetched:!0};D.each(e.querySelectorAll("feature"),function(e){var t=e.getAttribute("var");return t.startsWith("muc_")?void(i[t.replace("muc_","")]=!0):void(t===x.NS.MAM&&(i.mam_enabled=!0))});var r=e.querySelector('field[var="muc#roominfo_description"] value');return D.isNull(r)||(i.description=r.textContent),n.model.save(i),t.resolve()},t.reject,5e3),t.promise()},getAndRenderConfigurationForm:function(e){this.showSpinner(),this.fetchRoomConfiguration().then(this.renderConfigurationForm.bind(this))},submitNickname:function(e){e.preventDefault();var t=e.target.nick,n=t.value;return n?(t.classList.remove("error"),this.$el.find(".chatroom-form-container").replaceWith(v),void this.join(n)):void t.classList.add("error")},checkForReservedNick:function(){return this.showSpinner(),e.connection.sendIQ(C({to:this.model.get("jid"),from:e.connection.jid,type:"get"}).c("query",{xmlns:x.NS.DISCO_INFO,node:"x-roomuser-item"}),this.onNickNameFound.bind(this),this.onNickNameNotFound.bind(this)),this},onNickNameFound:function(e){var t=j(e).find('query[node="x-roomuser-item"] identity').attr("name");t?this.join(t):this.onNickNameNotFound()},onNickNameNotFound:function(t){e.muc_nickname_from_jid?this.join(x.unescapeNode(x.getNodeFromJid(e.bare_jid))):this.renderNicknameForm(t)},getDefaultNickName:function(){return x.unescapeNode(x.getNodeFromJid(e.bare_jid))},onNicknameClash:function(t){if(e.muc_nickname_from_jid){var n=t.getAttribute("from").split("/")[1];if(n===this.getDefaultNickName())this.join(n+"-2");else{var i=n.lastIndexOf("-"),r=n.substring(i+1,n.length);this.join(n.substring(0,i+1)+String(Number(r)+1))}}else this.renderNicknameForm(q("The nickname you chose is reserved or currently in use, please choose a different one."))},renderNicknameForm:function(e){this.$(".chatroom-body").children().addClass("hidden"),this.$("span.centered.spinner").remove(),D.isString(e)||(e=""),this.$(".chatroom-body").append(u({heading:q("Please choose your nickname"),label_nickname:q("Nickname"),label_join:q("Enter room"),validation_message:e})),this.model.save("connection_status",F.NICKNAME_REQUIRED),this.$(".chatroom-form").on("submit",this.submitNickname.bind(this))},submitPassword:function(e){e.preventDefault();var t=this.$el.find(".chatroom-form").find("input[type=password]").val();this.$el.find(".chatroom-form-container").replaceWith(v),this.join(this.model.get("nick"),t)},renderPasswordForm:function(){this.$(".chatroom-body").children().addClass("hidden"),this.$("span.centered.spinner").remove(),this.$(".chatroom-body").append(l({heading:q("This chatroom requires a password"),label_password:q("Password: "),label_submit:q("Submit")})),this.model.save("connection_status",F.PASSWORD_REQUIRED),this.$(".chatroom-form").on("submit",this.submitPassword.bind(this))},showDisconnectMessage:function(e){this.$(".chat-area").addClass("hidden"),this.$(".occupants").addClass("hidden"),this.$("span.centered.spinner").remove(),this.$(".chatroom-body").append(i({disconnect_message:e}))},getMessageFromStatus:function(t,n,i){var r,o=t.getAttribute("code");if("110"!==o){if(o in e.muc.info_messages)return e.muc.info_messages[o];if(i){if(o in e.muc.new_nickname_messages)return i&&"210"===o?r=x.getResourceFromJid(n.getAttribute("from")):i&&"303"===o&&(r=n.querySelector("x item").getAttribute("nick")),q(e.muc.new_nickname_messages[o],r)}else if(o in e.muc.action_info_messages)return r=x.getResourceFromJid(n.getAttribute("from")),q(e.muc.action_info_messages[o],r)}},saveAffiliationAndRole:function(e){var t=N('x[xmlns="'+x.NS.MUC_USER+'"] item',e).pop(),n=e.querySelector("status[code='110']");if(n&&!D.isNil(t)){var i=t.getAttribute("affiliation"),r=t.getAttribute("role");i&&this.model.save({affiliation:i}),r&&this.model.save({role:r})}},parseXUserElement:function(t,n,i){var r=t.querySelectorAll("status"),o=D.partial(this.getMessageFromStatus,D,n,i),s={},a=D.reject(D.map(r,o),D.isUndefined);a.length&&(s.messages=a);var u=D.invokeMap(r,Element.prototype.getAttribute,"code"),l=D.intersection(u,D.keys(e.muc.disconnect_messages)),c=i&&l.length>0;c&&(s.disconnected=!0,s.disconnection_message=e.muc.disconnect_messages[l[0]]);var d=t.querySelector("item");if(!D.isNull(d)){var h=d.querySelector("reason");h&&(s.reason=h?h.textContent:void 0);var f=d.querySelector("actor");f&&(s.actor=f?f.getAttribute("nick"):void 0)}return s},displayNotificationsforUser:function(e){var t=this;return e.disconnected?(this.showDisconnectMessage(e.disconnection_message),e.actor&&this.showDisconnectMessage(q(P("This action was done by %1$s."),e.actor)),e.reason&&this.showDisconnectMessage(q(P('The reason given is: "%1$s".'),e.reason)),void this.model.save("connection_status",F.DISCONNECTED)):(D.each(e.messages,function(e){t.$content.append(f({message:e}))}),e.reason&&this.showStatusNotification(q('The reason given is: "'+e.reason+'"'),!0),void(e.messages.length&&this.scrollDown()))},getJoinLeaveMessages:function(e){var t=x.getResourceFromJid(e.getAttribute("from")),n=e.querySelector("status");return"unavailable"===e.getAttribute("type")?!D.isNull(n)&&n.textContent?[{messages:[q(t+' has left the room. "'+n.textContent+'"')]}]:[{messages:[q(t+" has left the room")]}]:this.occupantsview.model.find({nick:t})?void 0:!D.isNull(n)&&n.textContent?[{messages:[q(t+' has joined the room. "'+n.textContent+'"')]}]:[{messages:[q(t+" has joined the room.")]}]},showStatusMessages:function(t){var n=N('x[xmlns="'+x.NS.MUC_USER+'"]',t),i=t.querySelectorAll("status[code='110']").length,r=D.partial(this.parseXUserElement.bind(this),D,t,i),o=D.reject(D.map(n,r),D.isEmpty);return D.isEmpty(o)&&e.muc_show_join_leave&&"presence"===t.nodeName&&this.model.get("connection_status")===F.ENTERED&&(o=this.getJoinLeaveMessages(t)),D.each(o,this.displayNotificationsforUser.bind(this)),t},showErrorMessage:function(e){var t=e.querySelector("error");"auth"===t.getAttribute("type")?D.isNull(t.querySelector("not-authorized"))?D.isNull(t.querySelector("registration-required"))?D.isNull(t.querySelector("forbidden"))||this.showDisconnectMessage(q("You have been banned from this room.")):this.showDisconnectMessage(q("You are not on the member list of this room.")):this.renderPasswordForm():"modify"===t.getAttribute("type")?D.isNull(t.querySelector("jid-malformed"))||this.showDisconnectMessage(q("No nickname was specified.")):"cancel"===t.getAttribute("type")&&(D.isNull(t.querySelector("not-allowed"))?D.isNull(t.querySelector("not-acceptable"))?D.isNull(t.querySelector("conflict"))?D.isNull(t.querySelector("item-not-found"))?D.isNull(t.querySelector("service-unavailable"))||this.showDisconnectMessage(q("This room has reached its maximum number of occupants.")):this.showDisconnectMessage(q("This room does not (yet) exist.")):this.onNicknameClash(e):this.showDisconnectMessage(q("Your nickname doesn't conform to this room's policies.")):this.showDisconnectMessage(q("You are not allowed to create new rooms.")))},renderAfterTransition:function(){this.model.get("connection_status")==F.NICKNAME_REQUIRED?this.renderNicknameForm():this.model.get("connection_status")==F.PASSWORD_REQUIRED?this.renderPasswordForm():(this.$el.find(".chat-area").removeClass("hidden"),this.$el.find(".occupants").removeClass("hidden"),this.occupantsview.setOccupantsHeight(),this.scrollDown())},showSpinner:function(){this.$(".chatroom-body").children().addClass("hidden"),this.$el.find(".chatroom-body").prepend(v)},hideSpinner:function(){var e=this.el.querySelector(".spinner");return D.isNull(e)||(e.parentNode.removeChild(e),this.renderAfterTransition()),this},onOwnChatRoomPresence:function(t){this.saveAffiliationAndRole(t);var n=t.querySelector("status[code='201']");if(n)if(this.model.get("auto_configure"))this.autoConfigureChatRoom().then(this.getRoomFeatures.bind(this));else{if(!e.muc_instant_rooms)return void this.getAndRenderConfigurationForm();this.saveConfiguration().then(this.getRoomFeatures.bind(this))}else this.model.get("features_fetched")||("owner"===this.model.get("affiliation")&&this.model.get("auto_configure")?this.autoConfigureChatRoom().then(this.getRoomFeatures.bind(this)):this.getRoomFeatures());this.model.save("connection_status",F.ENTERED)},onChatRoomPresence:function(e){if("error"===e.getAttribute("type"))return this.model.save("connection_status",F.DISCONNECTED),this.showErrorMessage(e),!0;var t=e.querySelector("status[code='110']");return t&&"unavailable"!==e.getAttribute("type")&&this.onOwnChatRoomPresence(e),this.hideSpinner().showStatusMessages(e),this.occupantsview.updateOccupantsOnPresence(e),"none"!==this.model.get("role")&&this.model.get("connection_status")===F.CONNECTING&&this.model.save("connection_status",F.CONNECTED),!0},setChatRoomSubject:function(e,t){this.$content.append(f({message:q("Topic set by %1$s to: %2$s",e,t)})),this.scrollDown()},onChatRoomMessage:function(t){var n,i=t,r=t.querySelector("forwarded");D.isNull(r)||(t=r.querySelector("message"),n=r.querySelector("delay"));var o=t.getAttribute("from"),s=t.getAttribute("id"),a=x.getResourceFromJid(o),u=a&&x.unescapeNode(a)||"",l=D.propertyOf(t.querySelector("subject"))("textContent"),c=s&&this.model.messages.filter(function(e){return e.get("msgid")===s&&e.get("fullname")===u});return!(!c||!c.length)||(l&&this.setChatRoomSubject(u,l),""===u||(this.model.incrementUnreadMsgCounter(i),this.model.createMessage(t,n,i),u!==this.model.get("nick")&&e.emit("message",{stanza:i,chatbox:this.model}),!0))}}),e.ChatRoomOccupant=S.Model.extend({initialize:function(t){this.set(D.extend({id:e.connection.getUniqueId()},t))}}),e.ChatRoomOccupantView=S.View.extend({tagName:"li",initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.destroy,this)},render:function(){var t=this.model.get("show")||"online",n=p(D.extend({jid:"",show:t,hint_show:e.PRETTY_CHAT_STATUS[t],hint_occupant:q("Click to mention "+this.model.get("nick")+" in your message."),desc_moderator:q("This user is a moderator."),desc_occupant:q("This user can send messages in this room."),desc_visitor:q("This user can NOT send messages in this room.")},this.model.toJSON())),i=this.$el.parents();return i.length?(this.$el.replaceWith(n),this.setElement(i.first().children("#"+this.model.get("id")),!0),this.delegateEvents()):(this.$el.replaceWith(n),this.setElement(n,!0)),this},destroy:function(){this.$el.remove()}}),e.ChatRoomOccupants=S.Collection.extend({model:e.ChatRoomOccupant}),e.ChatRoomOccupantsView=S.Overview.extend({tagName:"div",className:"occupants",initialize:function(){this.model.on("add",this.onOccupantAdded,this),this.chatroomview=this.model.chatroomview,this.chatroomview.model.on("change:open",this.renderInviteWidget,this),this.chatroomview.model.on("change:affiliation",this.renderInviteWidget,this),this.chatroomview.model.on("change:hidden",this.onFeatureChanged,this),this.chatroomview.model.on("change:mam_enabled",this.onFeatureChanged,this),this.chatroomview.model.on("change:membersonly",this.onFeatureChanged,this),this.chatroomview.model.on("change:moderated",this.onFeatureChanged,this),this.chatroomview.model.on("change:nonanonymous",this.onFeatureChanged,this),this.chatroomview.model.on("change:open",this.onFeatureChanged,this),this.chatroomview.model.on("change:passwordprotected",this.onFeatureChanged,this),this.chatroomview.model.on("change:persistent",this.onFeatureChanged,this),this.chatroomview.model.on("change:public",this.onFeatureChanged,this),this.chatroomview.model.on("change:semianonymous",this.onFeatureChanged,this),this.chatroomview.model.on("change:temporary",this.onFeatureChanged,this),this.chatroomview.model.on("change:unmoderated",this.onFeatureChanged,this),this.chatroomview.model.on("change:unsecured",this.onFeatureChanged,this)},render:function(){return this.el.innerHTML=c(D.extend(this.chatroomview.model.toJSON(),{allow_muc_invitations:e.allow_muc_invitations,label_occupants:q("Occupants")})),e.allow_muc_invitations&&e.api.waitUntil("rosterContactsFetched").then(this.renderInviteWidget.bind(this)),this.renderRoomFeatures()},renderInviteWidget:function(){var e=this.el.querySelector("form.room-invite");if(this.shouldInviteWidgetBeShown()){if(D.isNull(e)){var t=this.el.querySelector(".occupants-heading");e=a({label_invitation:q("Invite")}),t.insertAdjacentHTML("afterend",e),this.initInviteWidget()}}else D.isNull(e)||e.remove();return this},renderRoomFeatures:function(){var e=D.pick(this.chatroomview.model.attributes,O),t=function(e,t){return e||t},n=this.el.querySelector(".chatroom-features");return n.innerHTML=r(D.extend(this.chatroomview.model.toJSON(),{has_features:D.reduce(D.values(e),t),label_features:q("Features"),label_hidden:q("Hidden"),label_mam_enabled:q("Message archiving"),label_membersonly:q("Members only"),label_moderated:q("Moderated"),label_nonanonymous:q("Non-anonymous"),label_open:q("Open"),label_passwordprotected:q("Password protected"),label_persistent:q("Persistent"),label_public:q("Public"),label_semianonymous:q("Semi-anonymous"),label_temporary:q("Temporary"),label_unmoderated:q("Unmoderated"),label_unsecured:q("Unsecured"),tt_hidden:q("This room is not publicly searchable"),tt_mam_enabled:q("Messages are archived on the server"),tt_membersonly:q("This room is restricted to members only"),tt_moderated:q("This room is being moderated"),tt_nonanonymous:q("All other room occupants can see your Jabber ID"),tt_open:q("Anyone can join this room"),tt_passwordprotected:q("This room requires a password before entry"),tt_persistent:q("This room persists even if it's unoccupied"),tt_public:q("This room is publicly searchable"),tt_semianonymous:q("Only moderators can see your Jabber ID"),tt_temporary:q("This room will disappear once the last person leaves"),tt_unmoderated:q("This room is not being moderated"),tt_unsecured:q("This room does not require a password upon entry")})),this.setOccupantsHeight(),this},onFeatureChanged:function(e){D.isUndefined(this.debouncedRenderRoomFeatures)&&(this.debouncedRenderRoomFeatures=D.debounce(this.renderRoomFeatures,100,{leading:!1}));var t={};D.each(D.keys(e.changed),function(n){D.isNil(I[n])||(t[I[n]]=!e.changed[n])}),this.chatroomview.model.save(t,{silent:!0}),this.debouncedRenderRoomFeatures()},setOccupantsHeight:function(){var e=this.el.querySelector(".chatroom-features");this.el.querySelector(".occupant-list").style.cssText="height: calc(100% - "+e.offsetHeight+"px - 5em);"},onOccupantAdded:function(t){var n=this.get(t.get("id"));n?(delete n.model,n.model=t,n.initialize()):n=this.add(t.get("id"),new e.ChatRoomOccupantView({model:t})),this.$(".occupant-list").append(n.render().$el)},parsePresence:function(e){var t=x.getResourceFromJid(e.getAttribute("from")),n={nick:t,type:e.getAttribute("type"),states:[]};return D.each(e.childNodes,function(e){switch(e.nodeName){case"status":n.status=e.textContent||null;break;case"show":n.show=e.textContent||"online";break;case"x":e.getAttribute("xmlns")===x.NS.MUC_USER&&D.each(e.childNodes,function(e){switch(e.nodeName){case"item":n.affiliation=e.getAttribute("affiliation"),n.role=e.getAttribute("role"),n.jid=e.getAttribute("jid"),n.nick=e.getAttribute("nick")||n.nick;break;case"status":e.getAttribute("code")&&n.states.push(e.getAttribute("code"))}})}}),n},findOccupant:function(e){var t=x.getBareJidFromJid(e.jid);return null!==t?this.model.where({jid:t}).pop():this.model.where({nick:e.nick}).pop()},updateOccupantsOnPresence:function(e){var t=this.parsePresence(e);if("error"===t.type)return!0;var n=this.findOccupant(t);switch(t.type){case"unavailable":n&&n.destroy();break;default:var i=x.getBareJidFromJid(t.jid),r=D.extend(t,{jid:i?i:void 0,resource:t.jid?x.getResourceFromJid(t.jid):void 0});n?n.save(r):this.model.create(r)}},promptForInvite:function(e){var t=prompt(q(P('You are about to invite %1$s to the chat room "%2$s". '),e.text.label,this.model.get("id"))+q("You may optionally include a message, explaining the reason for the invitation."));null!==t&&this.chatroomview.directInvite(e.text.value,t),e.target.value=""},inviteFormSubmitted:function(e){e.preventDefault();var t=e.target.querySelector("input.invited-contact");this.promptForInvite({target:t,text:{label:t.value,value:t.value}})},shouldInviteWidgetBeShown:function(){return e.allow_muc_invitations&&(this.chatroomview.model.get("open")||"owner"===this.chatroomview.model.get("affiliation"))},initInviteWidget:function(){var t=this.el.querySelector("form.room-invite");if(!D.isNull(t)){t.addEventListener("submit",this.inviteFormSubmitted.bind(this));var n=this.el.querySelector("input.invited-contact"),i=e.roster.map(function(e){var t=e.get("fullname")||e.get("jid");return{label:t,value:e.get("jid")}});new y(n,{minChars:1,list:i});n.addEventListener("awesomplete-selectcomplete",this.promptForInvite.bind(this))}}}),e.RoomsPanel=S.View.extend({tagName:"div",className:"controlbox-pane",id:"chatrooms",events:{"submit form.add-chatroom":"openChatRoom","click input#show-rooms":"showRooms","click a.open-room":"openChatRoom","click a.room-info":"toggleRoomInfo","change input[name=server]":"setDomain","change input[name=nick]":"setNick"},initialize:function(t){this.parent_el=t.$parent[0],this.tab_el=document.createElement("li"),this.model.on("change:muc_domain",this.onDomainChange,this),this.model.on("change:nick",this.onNickChange,this),e.chatboxes.on("change:num_unread",this.renderTab,this),e.chatboxes.on("add",D.debounce(this.renderTab,100),this)},render:function(){this.el.innerHTML=g({server_input_type:e.hide_muc_server&&"hidden"||"text",server_label_global_attr:e.hide_muc_server&&" hidden"||"",label_room_name:q("Room name"),label_nickname:q("Nickname"),label_server:q("Server"),label_join:q("Join Room"),label_show_rooms:q("Show rooms")}),this.renderTab();var t=e.chatboxes.get("controlbox");return t.get("active-panel")!==b&&this.el.classList.add("hidden"),this},renderTab:function(){var t=e.chatboxes.get("controlbox"),n=R.filter(D.partial(E.isOfType,w),e.chatboxes.models);this.tab_el.innerHTML=h({label_rooms:q("Rooms"),is_current:t.get("active-panel")===b,num_unread:R.sum(R.map(R.curry(E.getAttribute)("num_unread"),n))})},insertIntoDOM:function(){return this.parent_el.appendChild(this.render().el),this.tabs=this.parent_el.parentNode.querySelector("#controlbox-tabs"),this.tabs.appendChild(this.tab_el),this},onDomainChange:function(t){var n=this.$el.find("input.new-chatroom-server");n.val(t.get("muc_domain")),e.auto_list_rooms&&this.updateRoomsList()},onNickChange:function(e){var t=this.$el.find("input.new-chatroom-nick");t.val(e.get("nick"))},informNoRoomsFound:function(){var e=this.$el.find("#available-chatrooms");e.html("<dt>"+q("No rooms on %1$s",this.model.get("muc_domain"))+"</dt>"),j("input#show-rooms").show().siblings("span.spinner").remove()},onRoomsFound:function(e){var t,n,i,r,o=this.$el.find("#available-chatrooms");if(this.rooms=j(e).find("query").find("item"),this.rooms.length){for(o.html("<dt>"+q("Rooms on %1$s",this.model.get("muc_domain"))+"</dt>"),r=document.createDocumentFragment(),i=0;i<this.rooms.length;i++)t=x.unescapeNode(j(this.rooms[i]).attr("name")||j(this.rooms[i]).attr("jid")),n=j(this.rooms[i]).attr("jid"),r.appendChild(j(_({name:t,jid:n,open_title:q("Click to open this room"),info_title:q("Show more information on this room")}))[0]);o.append(r),j("input#show-rooms").show().siblings("span.spinner").remove()}else this.informNoRoomsFound();return!0},updateRoomsList:function(){e.connection.sendIQ(C({to:this.model.get("muc_domain"),from:e.connection.jid,type:"get"}).c("query",{xmlns:x.NS.DISCO_ITEMS}),this.onRoomsFound.bind(this),this.informNoRoomsFound.bind(this))},showRooms:function(){var e=this.$el.find("#available-chatrooms"),t=this.$el.find("input.new-chatroom-server"),n=t.val();return n?(this.$el.find("input.new-chatroom-name").removeClass("error"),t.removeClass("error"),e.empty(),j("input#show-rooms").hide().after(v),this.model.save({muc_domain:n}),void this.updateRoomsList()):void t.addClass("error")},insertRoomInfo:function(e,t){var n=j(t);j(e).find("span.spinner").replaceWith(m({server:x.getDomainFromJid(t.getAttribute("from")),desc:n.find('field[var="muc#roominfo_description"] value').text(),occ:n.find('field[var="muc#roominfo_occupants"] value').text(),hidden:n.find('feature[var="muc_hidden"]').length,membersonly:n.find('feature[var="muc_membersonly"]').length,moderated:n.find('feature[var="muc_moderated"]').length,nonanonymous:n.find('feature[var="muc_nonanonymous"]').length,open:n.find('feature[var="muc_open"]').length,passwordprotected:n.find('feature[var="muc_passwordprotected"]').length,persistent:n.find('feature[var="muc_persistent"]').length,publicroom:n.find('feature[var="muc_public"]').length,semianonymous:n.find('feature[var="muc_semianonymous"]').length,temporary:n.find('feature[var="muc_temporary"]').length,unmoderated:n.find('feature[var="muc_unmoderated"]').length,label_desc:q("Description:"),label_server:q("Server:"),label_occ:q("Occupants:"),label_features:q("Features:"),label_requires_auth:q("Requires authentication"),label_hidden:q("Hidden"),label_requires_invite:q("Requires an invitation"),label_moderated:q("Moderated"),label_non_anon:q("Non-anonymous"),label_open_room:q("Open room"),label_permanent_room:q("Permanent room"),label_public:q("Public"),label_semi_anon:q("Semi-anonymous"),label_temp_room:q("Temporary room"),label_unmoderated:q("Unmoderated")}))},toggleRoomInfo:function(t){var n=t.target,i=j(n).parent("dd"),r=i.find("div.room-info");r.length?r.remove():(i.find("span.spinner").remove(),i.append(v),e.connection.disco.info(j(n).attr("data-room-jid"),null,D.partial(this.insertRoomInfo,i[0])))},parseRoomDataFromEvent:function(e){var t,n,i,r,o;if("click"===e.type)t=j(e.target).text(),o=j(e.target).attr("data-room-jid");else{if(n=this.$el.find("input.new-chatroom-name"),r=this.$el.find("input.new-chatroom-server"),i=r.val(),t=n.val().trim(),n.val(""),!t||!i)return t||n.addClass("error"),void(i||r.addClass("error"));o=x.escapeNode(t.toLowerCase())+"@"+i.toLowerCase(),n.removeClass("error"),r.removeClass("error"),this.model.save({muc_domain:i})}return{id:o,jid:o,name:t||x.unescapeNode(x.getNodeFromJid(o)),type:w,box_id:M(o)}},openChatRoom:function(t){t.preventDefault(),e.openChatRoom(this.parseRoomDataFromEvent(t))},setDomain:function(e){this.model.save({muc_domain:e.target.value})},setNick:function(e){this.model.save({nick:e.target.value})}}),e.onDirectMUCInvitation=function(t){var n,i=j(t),r=i.children('x[xmlns="jabber:x:conference"]'),o=x.getBareJidFromJid(i.attr("from")),s=r.attr("jid"),a=r.attr("reason"),u=e.roster.get(o);if(e.auto_join_on_invite?n=!0:(u=u?u.get("fullname"):x.getNodeFromJid(o),n=a?confirm(q(P('%1$s has invited you to join a chat room: %2$s, and left the following reason: "%3$s"'),u,s,a)):confirm(q(P("%1$s has invited you to join a chat room: %2$s"),u,s))),n===!0){var l=e.openChatRoom({id:s,jid:s,name:x.unescapeNode(x.getNodeFromJid(s)),type:w,
box_id:M(s),password:r.attr("password")});l.get("connection_status")===F.DISCONNECTED&&e.chatboxviews.get(s).join()}},e.allow_muc_invitations){var H=function(){e.connection.addHandler(function(t){return e.onDirectMUCInvitation(t),!0},"jabber:x:conference","message")};e.on("connected",H),e.on("reconnected",H)}var Y=function(){D.each(e.auto_join_rooms,function(t){D.isString(t)?e.api.rooms.open(t):D.isObject(t)?e.api.rooms.open(t.jid,t.nick):e.log('Invalid room criteria specified for "auto_join_rooms"',x.LogLevel.ERROR)})};e.on("chatBoxesFetched",Y),e.getChatRoom=function(t,n,i){return t=t.toLowerCase(),e.getViewForChatBox(i(D.extend({id:t,jid:t,name:x.unescapeNode(x.getNodeFromJid(t)),type:w,box_id:M(t)},n)))},D.extend(e.api,{rooms:{close:function(t){if(D.isUndefined(t))e.chatboxviews.each(function(e){e.is_chatroom&&e.model&&e.close()});else if(D.isString(t)){var n=e.chatboxviews.get(t);n&&n.close()}else D.each(t,function(t){var n=e.chatboxviews.get(t);n&&n.close()})},open:function(t,n){if(D.isString(n)?n={nick:n}:D.isUndefined(n)&&(n={}),D.isUndefined(n.maximize)&&(n.maximize=!1),!n.nick&&e.muc_nickname_from_jid&&(n.nick=x.getNodeFromJid(e.bare_jid)),D.isUndefined(t))throw new TypeError("rooms.open: You need to provide at least one JID");return D.isString(t)?e.getChatRoom(t,n,e.openChatRoom):D.map(t,D.partial(e.getChatRoom,D,n,e.openChatRoom))},get:function(t,n,i){if(D.isString(n)?n={nick:n}:D.isUndefined(n)&&(n={}),D.isUndefined(t)){var r=[];return e.chatboxes.each(function(t){t.get("type")===w&&r.push(e.getViewForChatBox(t))}),r}var o=D.partial(e.chatboxviews.getChatBox.bind(e.chatboxviews),D,i);return n.nick||(n.nick=x.getNodeFromJid(e.bare_jid)),D.isString(t)?e.getChatRoom(t,n,o):D.map(t,D.partial(e.getChatRoom,D,n,o))}}});var B=function(){e.chatboxviews.each(function(e){e.model.get("type")===w&&(e.model.save("connection_status",F.DISCONNECTED),e.registerHandlers(),e.join(),e.fetchMessages())})};e.on("reconnected",B);var $=function(){e.chatboxes.each(function(e){e.get("type")===w&&e.save("connection_status",F.DISCONNECTED)})};e.on("reconnecting",$),e.on("disconnecting",$)}})}),function(e,t){"function"==typeof define&&define.amd?define("strophe.rsm",["strophe"],function(e){return t(e.Strophe,e.$build,e.$iq,e.$msg,e.$pres),e}):t(e.Strophe,e.$build,e.$iq,e.$msg,e.$pres)}(this,function(e,t,n,i,r){e.addNamespace("RSM","http://jabber.org/protocol/rsm"),e.RSM=function(e){if(this.attribs=["max","first","last","after","before","index","count"],"undefined"!=typeof e.xml)this.fromXMLElement(e.xml);else for(var t=0;t<this.attribs.length;t++){var n=this.attribs[t];this[n]=e[n]}},e.RSM.prototype={toXML:function(){for(var n=t("set",{xmlns:e.NS.RSM}),i=0;i<this.attribs.length;i++){var r=this.attribs[i];"undefined"!=typeof this[r]&&(n=n.c(r).t(this[r].toString()).up())}return n.tree()},next:function(t){var n=new e.RSM({max:t,after:this.last});return n},previous:function(t){var n=new e.RSM({max:t,before:this.first});return n},fromXMLElement:function(t){for(var n=0;n<this.attribs.length;n++){var i=this.attribs[n],r=t.getElementsByTagName(i)[0];"undefined"!=typeof r&&null!==r&&(this[i]=e.getText(r),"first"==i&&(this.index=r.getAttribute("index")))}}}}),function(e,t){define("converse-mam",["converse-core","converse-chatview","converse-muc","strophe.rsm"],t)}(this,function(e){"use strict";var t=e.env.jQuery,n=e.env.Strophe,i=e.env.$iq,r=e.env._,o=e.env.moment,s=["max","first","last","after","before","index","count"],a=["with","start","end"];e.plugins.add("converse-mam",{overrides:{Features:{addClientFeatures:function(){var e=this.__super__._converse;return e.connection.disco.addFeature(n.NS.MAM),this.__super__.addClientFeatures.apply(this,arguments)}},ChatBox:{getMessageAttributes:function(e,i,r){var o=this.__super__.getMessageAttributes.apply(this,arguments);return o.archive_id=t(r).find('result[xmlns="'+n.NS.MAM+'"]').attr("id"),o}},ChatBoxView:{render:function(){var e=this.__super__.render.apply(this,arguments);return this.disable_mam||this.$content.on("scroll",r.debounce(this.onScroll.bind(this),100)),e},afterMessagesFetched:function(){var e=this.__super__._converse;return this.disable_mam||!e.features.findWhere({var:n.NS.MAM})?this.__super__.afterMessagesFetched.apply(this,arguments):(!this.model.get("mam_initialized")&&this.model.messages.length<e.archived_messages_page_size&&(this.fetchArchivedMessages({before:"",with:this.model.get("jid"),max:e.archived_messages_page_size}),this.model.save({mam_initialized:!0})),this.__super__.afterMessagesFetched.apply(this,arguments))},fetchArchivedMessages:function(e){var t=this.__super__._converse;return t.features.findWhere({var:n.NS.MAM})?void(this.disable_mam||(this.addSpinner(),t.queryForArchivedMessages(e,function(e){this.clearSpinner(),e.length&&r.each(e,t.chatboxes.onMessage.bind(t.chatboxes))}.bind(this),function(){this.clearSpinner(),t.log("Error or timeout while trying to fetch archived messages",n.LogLevel.ERROR)}.bind(this)))):void t.log("Attempted to fetch archived messages but this user's server doesn't support XEP-0313",n.LogLevel.WARN)},onScroll:function(e){var n=this.__super__._converse;0===t(e.target).scrollTop()&&this.model.messages.length&&this.fetchArchivedMessages({before:this.model.messages.at(0).get("archive_id"),with:this.model.get("jid"),max:n.archived_messages_page_size})}},ChatRoomView:{initialize:function(){var e=this.__super__._converse;this.__super__.initialize.apply(this,arguments),this.model.on("change:mam_enabled",function(){this.fetchArchivedMessages({before:"",with:this.model.get("jid"),max:e.archived_messages_page_size}),this.model.save({mam_initialized:!0})},this)},render:function(){var e=this.__super__.render.apply(this,arguments);return this.disable_mam||this.$content.on("scroll",r.debounce(this.onScroll.bind(this),100)),e},handleMUCMessage:function(e){var i=t(e).find('[xmlns="'+n.NS.MAM+'"]').length>0;return!!i||this.__super__.handleMUCMessage.apply(this,arguments)},fetchArchivedMessages:function(e){var t=this.__super__._converse;if(!t.features.findWhere({var:n.NS.MAM}))return void t.log("Attempted to fetch archived messages but this user's server doesn't support XEP-0313",n.LogLevel.WARN);if(this.model.get("mam_enabled")){this.addSpinner();var i=this;t.api.archive.query(r.extend(e,{groupchat:!0}),function(e){i.clearSpinner(),e.length&&r.each(e,i.onChatRoomMessage.bind(i))},function(){i.clearSpinner(),t.log("Error while trying to fetch archived messages",n.LogLevel.WARN)})}}}},initialize:function(){var e=this._converse;e.api.settings.update({archived_messages_page_size:"50",message_archiving:void 0,message_archiving_timeout:8e3}),e.queryForArchivedMessages=function(t,u,l){var c,d=[];r.isFunction(t)&&(u=t,l=u);var h=e.connection.getUniqueId(),f={type:"set"};if(!r.isUndefined(t)&&t.groupchat){if(!t.with)throw new Error('You need to specify a "with" value containing the chat room JID, when querying groupchat messages.');f.to=t.with}var p=i(f).c("query",{xmlns:n.NS.MAM,queryid:h});r.isUndefined(t)||(p.c("x",{xmlns:n.NS.XFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t(n.NS.MAM).up().up(),t.with&&!t.groupchat&&p.c("field",{var:"with"}).c("value").t(t.with).up().up(),r.each(["start","end"],function(e){if(t[e]){if(c=o(t[e]),!c.isValid())throw new TypeError("archive.query: invalid date provided for: "+e);p.c("field",{var:e}).c("value").t(c.format()).up().up()}}),p.up(),t instanceof n.RSM?p.cnode(t.toXML()):r.intersection(s,r.keys(t)).length&&p.cnode(new n.RSM(t).toXML()));var m=e.connection.addHandler(function(e){var t=e.querySelector("result");return r.isNull(t)||t.getAttribute("queryid")!==h||d.push(e),!0},n.NS.MAM);e.connection.sendIQ(p,function(i){if(e.connection.deleteHandler(m),r.isFunction(u)){var o=i.querySelector("set"),s=new n.RSM({xml:o});r.extend(s,r.pick(t,r.concat(a,["max"]))),u(d,s)}},function(){e.connection.deleteHandler(m),r.isFunction(l)&&l.apply(this,arguments)},e.message_archiving_timeout)},r.extend(e.api,{archive:{query:e.queryForArchivedMessages.bind(e)}}),e.onMAMError=function(i){t(i).find("feature-not-implemented").length?e.log("Message Archive Management (XEP-0313) not supported by this server",n.LogLevel.WARN):(e.log("An error occured while trying to set archiving preferences.",n.LogLevel.ERROR),e.log(i))},e.onMAMPreferences=function(o,s){var a,u=t(s).find('prefs[xmlns="'+n.NS.MAM+'"]'),l=u.attr("default");l!==e.message_archiving?(a=i({type:"set"}).c("prefs",{xmlns:n.NS.MAM,default:e.message_archiving}),u.children().each(function(e,t){a.cnode(t).up()}),e.connection.sendIQ(a,r.partial(function(t,n){t.save({preferences:{default:e.message_archiving}})},o),e.onMAMError)):o.save({preferences:{default:e.message_archiving}})};var u=function(t){var o=t.get("preferences")||{};t.get("var")!==n.NS.MAM||o.default===e.message_archiving||r.isUndefined(e.message_archiving)||e.connection.sendIQ(i({type:"get"}).c("prefs",{xmlns:n.NS.MAM}),r.partial(e.onMAMPreferences,t),r.partial(e.onMAMError,t))};e.on("serviceDiscovered",u.bind(e.features))}})}),function(e,t){"function"==typeof define&&define.amd?define("strophe.vcard",["strophe"],function(e){return t(e.Strophe,e.$build,e.$iq,e.$msg,e.$pres),e}):t(e.Strophe,e.$build,e.$iq,e.$msg,e.$pres)}(this,function(e,t,n,i,r){var o=function(t,i,r){var o=n(i?{type:t,to:i}:{type:t});return o.c("vCard",{xmlns:e.NS.VCARD}),r&&o.cnode(r),o};e.addConnectionPlugin("vcard",{_connection:null,init:function(t){return this._connection=t,e.addNamespace("VCARD","vcard-temp")},get:function(e,t,n){var i=o("get",t);return this._connection.sendIQ(i,e,n)},set:function(e,t,n,i){var r=o("set",n,t);return this._connection.sendIQ(r,e,i)}})}),function(e,t){define("converse-vcard",["converse-core","strophe.vcard"],t)}(this,function(e){"use strict";var t=e.env.Strophe,n=e.env.jQuery,i=e.env._,r=e.env.moment;e.plugins.add("converse-vcard",{overrides:{Features:{addClientFeatures:function(){var e=this.__super__._converse;this.__super__.addClientFeatures.apply(this,arguments),e.use_vcards&&e.connection.disco.addFeature(t.NS.VCARD)}},RosterContacts:{createRequestingContact:function(e){var n=this.__super__._converse,r=t.getBareJidFromJid(e.getAttribute("from"));n.getVCard(r,i.partial(n.createRequestingContactFromVCard,e),function(i,r){n.log("Error while retrieving vcard for "+r,t.LogLevel.ERROR),n.createRequestingContactFromVCard(e,i,r)})}}},initialize:function(){var e=this._converse;e.api.settings.update({use_vcards:!0}),e.createRequestingContactFromVCard=function(i,o,s,a,u,l,c){var d=t.getBareJidFromJid(s),h=n(i).children('nick[xmlns="'+t.NS.NICK+'"]').text(),f={jid:d,subscription:"none",ask:null,requesting:!0,fullname:a||h||d,image:u,image_type:l,url:c,vcard_updated:r().format()};e.roster.create(f),e.emit("contactRequest",f)},e.onVCardError=function(t,n,i){var o=e.roster.get(t);o&&o.save({vcard_updated:r().format()}),i&&i(n,t)},e.onVCardData=function(t,o,s){var a=n(o).find("vCard"),u=a.find("FN").text(),l=a.find("BINVAL").text(),c=a.find("TYPE").text(),d=a.find("URL").text();if(t){var h=e.roster.get(t);h&&(u=i.isEmpty(u)?h.get("fullname")||t:u,h.save({fullname:u,image_type:c,image:l,url:d,vcard_updated:r().format()}))}s&&s(o,t,u,l,c,d)},e.getVCard=function(t,n,r){e.use_vcards?e.connection.vcard.get(i.partial(e.onVCardData,t,i,n),t,i.partial(e.onVCardError,t,i,r)):n&&n(null,t)};var o=function(n){if(e.use_vcards){var i=n.model.get("jid"),r=e.roster.get(i);r&&!r.get("vcard_updated")&&e.getVCard(i,function(e,t,i,r,o,s){n.model.save({fullname:i||t,url:s,image_type:o,image:r})},function(){e.log("updateVCardForChatBox: Error occured while fetching vcard",t.LogLevel.ERROR)})}};e.on("chatBoxInitialized",o);var s=function(t){t.get("vcard_updated")||e.getVCard(t.get("jid"))};e.on("initialized",function(){e.roster.on("add",s)});var a=function(){void 0===e.xmppstatus.get("fullname")&&e.getVCard(null,function(t,n,i,r,o,s){e.xmppstatus.save({fullname:i}),e.xmppstatus.save({url:s})})};e.on("statusInitialized",a)}})}),function(e,t){"function"==typeof define&&define.amd?define("strophe.ping",["strophe"],function(e){return t(e.Strophe,e.$build,e.$iq,e.$msg,e.$pres),e}):t(e.Strophe,e.$build,e.$iq,e.$msg,e.$pres)}(this,function(e,t,n,i,r){e.addConnectionPlugin("ping",{_c:null,init:function(t){this._c=t,e.addNamespace("PING","urn:xmpp:ping")},ping:function(t,i,r,o){var s=this._c.getUniqueId("ping"),a=n({type:"get",to:t,id:s}).c("ping",{xmlns:e.NS.PING});this._c.sendIQ(a,i,r,o)},pong:function(e){var t=e.getAttribute("from"),i=e.getAttribute("id"),r=n({type:"result",to:t,id:i});this._c.sendIQ(r)},addPingHandler:function(t){return this._c.addHandler(t,e.NS.PING,"iq","get")}})}),function(e,t){define("converse-ping",["converse-core","strophe.ping"],t)}(this,function(e){"use strict";var t=e.env.Strophe,n=e.env._;e.plugins.add("converse-ping",{initialize:function(){var e=this._converse;e.api.settings.update({ping_interval:180}),e.ping=function(i,r,o,s){return e.lastStanzaDate=new Date,n.isNil(i)&&(i=t.getDomainFromJid(e.bare_jid)),n.isUndefined(s)&&(s=null),n.isUndefined(r)&&(r=null),n.isUndefined(o)&&(o=null),!!e.connection&&(e.connection.ping.ping(i,r,o,s),!0)},e.pong=function(t){return e.lastStanzaDate=new Date,e.connection.ping.pong(t),!0},e.registerPongHandler=function(){e.connection.disco.addFeature(t.NS.PING),e.connection.ping.addPingHandler(e.pong)},e.registerPingHandler=function(){e.registerPongHandler(),e.ping_interval>0&&(e.connection.addHandler(function(){return e.lastStanzaDate=new Date,!0}),e.connection.addTimedHandler(1e3,function(){var t=new Date;return e.lastStanzaDate||(e.lastStanzaDate=t),!((t-e.lastStanzaDate)/1e3>e.ping_interval)||e.ping()}))};var i=function(){e.registerPingHandler()};e.on("connected",i),e.on("reconnected",i)}})}),function(e,t){define("converse-singleton",["converse-core","converse-chatview"],t)}(this,function(e){"use strict";function t(e){"controlbox"!==e.model.get("id")&&(e.model.save({hidden:!0}),e.hide())}var n=e.env._;e.env.Strophe;e.plugins.add("converse-singleton",{optional_dependencies:["converse-muc","converse-controlbox","converse-rosterview"],overrides:{ChatBoxes:{createChatBox:function(e,t){return t=t||{},t.hidden=!0,this.__super__.createChatBox.call(this,e,t)}},RoomsPanel:{parseRoomDataFromEvent:function(e){var t=this.__super__.parseRoomDataFromEvent.apply(this,arguments);return t.hidden=!1,t}},ChatBoxViews:{showChat:function(e,i){var r=this.__super__._converse,o=this.getChatBox(e,!0),s=n.isUndefined(e.hidden)?o.get("hidden"):e.hidden;return!i&&s||!r.connection.authenticated||(n.each(r.chatboxviews.xget(o.get("id")),t),o.save({hidden:!1})),this.__super__.showChat.apply(this,arguments)}},ChatBoxView:{_show:function(e){if(!this.model.get("hidden"))return n.each(this.__super__._converse.chatboxviews.xget(this.model.get("id")),t),this.__super__._show.apply(this,arguments)}},RosterContactView:{openChat:function(e){return n.each(this.__super__._converse.chatboxviews.xget("controlbox"),t),this.model.save({hidden:!1}),this.__super__.openChat.apply(this,arguments)}}}})}),function(e,t){define("sd-register",["jquery.noconflict","converse-core","tpl!spinner","converse-controlbox"],t)}(this,function(e,t,n){"use strict";var i=t.env.Strophe,r=(t.env.utils,t.env.$build,t.env.$iq),o=t.env._,s=(t.env.moment,t.env.Backbone);i.addNamespace("REGISTER","jabber:iq:register");var a=0;o.each(o.keys(i.Status),function(e){a=Math.max(a,i.Status[e])}),i.Status.REGIFAIL=a+1,i.Status.REGISTERED=a+2,i.Status.CONFLICT=a+3,i.Status.NOTACCEPTABLE=a+5,t.plugins.add("sd-register",{initialize:function(){var t,a=this._converse;a.sdRegisterPanel=s.View.extend({tagName:"div",id:"sd-register",className:"controlbox-pane",initialize:function(e){this.$parent=e.$parent,this.$tabs=e.$parent.parent().find("#controlbox-tabs"),t={username:e.username,password:e.password,fullname:e.fullname,domain:e.domain},this.registerHooks(),this.fetchRegistrationForm()},render:function(){this.$parent.append(this.$el.html(n({})))},reset:function(e){var t={fields:{},urls:[],title:"",instructions:"",registered:!1,_registering:!1,domain:null,form_type:null};o.extend(this,t),e&&o.extend(this,o.pick(e,o.keys(t)))},registerHooks:function(){var e=a.connection,t=e._connect_cb.bind(e);e._connect_cb=function(e,n,i){this._registering?this.getRegistrationFields(e,n,i)&&(this._registering=!1):t(e,n,i)}.bind(this)},fetchRegistrationForm:function(){return this.reset({domain:i.getDomainFromJid(t.domain),_registering:!0}),a.connection.connect(this.domain,"",this.onRegistering.bind(this)),!1},onRegistering:function(e,n){if(o.includes([i.Status.DISCONNECTED,i.Status.CONNFAIL,i.Status.REGIFAIL,i.Status.NOTACCEPTABLE,i.Status.CONFLICT],e))n?a.log("error"+n):a.log("error");else if(e===i.Status.REGISTERED){a.connection.reset();var r=t.username+"@"+t.domain+"/"+document.domain+"-"+a.locale;a.connection.connect(r,t.password,a.onConnectStatusChanged)}},getRegistrationFields:function(e,t,n){var o=a.connection;o.connected=!0;var s=o._proto._reqToData(e);if(s){if(o._proto._connect_cb(s)===i.Status.CONNFAIL)return!1;var u=s.getElementsByTagName("register"),l=s.getElementsByTagName("mechanism");return 0===u.length&&0===l.length?(o._proto._no_auth_received(t),!1):0===u.length?(o._changeConnectStatus(i.Status.REGIFAIL,__("Sorry, the given provider does not support in band account registration. Please try with a different provider.")),!0):(o._addSysHandler(this.onRegistrationFields.bind(this),null,"iq",null,null),o.send(r({type:"get",id:"reg1",to:this.domain}).c("query",{xmlns:i.NS.REGISTER}).tree()),o.connected=!1,!0)}},onRegistrationFields:function(e){return this.setFields(e),this.submitRegistrationForm(),!1},submitRegistrationForm:function(){var e=r({type:"set",id:"reg1",to:this.domain}).c("query",{xmlns:i.NS.REGISTER}).c("x",{xmlns:i.NS.XFORM,type:"submit"}).c("field",{type:"text-single",label:"Username",var:"username"}).c("value",{},t.username).up().c("field",{type:"text-private",label:"Password",var:"password"}).c("value",{},t.password).up().c("field",{type:"text-single",label:"Full Name",var:"name"}).c("value",{},t.fullname).up();a.saveVisitorCookie(t.username,t.password),a.connection._addSysHandler(this._onRegisterIQ.bind(this),null,"iq",null,null),a.connection.send(e),this.setFields(e.tree())},setFields:function(t){var n,r=e(t).find("query");r.length>0&&(n=r.find('x[xmlns="'+i.NS.XFORM+'"]'),n.length>0?this._setFieldsFromXForm(n):this._setFieldsFromLegacy(r))},_setFieldsFromLegacy:function(t){t.children().each(function(t,n){var r=e(n);return"instructions"===n.tagName.toLowerCase()?void(this.instructions=i.getText(n)):"x"===n.tagName.toLowerCase()?void("jabber:x:oob"===r.attr("xmlns")&&r.find("url").each(function(t,n){this.urls.push(e(n).text())}.bind(this))):void(this.fields[n.tagName.toLowerCase()]=i.getText(n))}.bind(this)),this.form_type="legacy"},_setFieldsFromXForm:function(t){this.title=t.find("title").text(),this.instructions=t.find("instructions").text(),t.find("field").each(function(t,n){var i=n.getAttribute("var");i?this.fields[i.toLowerCase()]=e(n).children("value").text():a.log("WARNING: Found field we couldn't parse")}.bind(this)),this.form_type="xform"},_onRegisterIQ:function(e){var t=null,n=e.getElementsByTagName("query");if(n.length>0&&(n=n[0]),"error"===e.getAttribute("type")){if(t=e.getElementsByTagName("error"),1!==t.length)return a.connection._changeConnectStatus(i.Status.REGIFAIL,"unknown"),!1;t=t[0].firstChild.tagName.toLowerCase(),"conflict"===t?a.connection._changeConnectStatus(i.Status.CONFLICT,t):"not-acceptable"===t?a.connection._changeConnectStatus(i.Status.NOTACCEPTABLE,t):a.connection._changeConnectStatus(i.Status.REGIFAIL,t)}else a.connection._changeConnectStatus(i.Status.REGISTERED,null);return!1}}),a.saveVisitorCookie=function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6);var i="expires="+n.toUTCString(),r={uid:e,token:t};document.cookie="_sd_info="+JSON.stringify(r)+";"+i+";path=/"},a.getVisitorCookie=function(){for(var e="_sd_info=",t=decodeURIComponent(document.cookie),n=t.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return JSON.parse(r.substring(e.length,r.length))}return""}}})}),function(e,t){define("sd-user",["jquery.noconflict","converse-core","tpl!spinner","tpl!new_day","converse-chatview","converse-controlbox"],t)}(this,function(e,t,n,i){"use strict";function r(){e(".roster-contacts dd.both").sort(function(t,n){var i="",r="",o="00000000000";return i=e(t).children("a.open-chat").children(".sd-time").attr("sd-data-time"),r=e(n).children("a.open-chat").children(".sd-time").attr("sd-data-time"),i=void 0==i?"99999999999":o.substr(0,o.length-i.length)+i,r=void 0==r?"99999999999":o.substr(0,o.length-r.length)+r,i+=t.attributes["sd-data-raw-jid"].value,r+=n.attributes["sd-data-raw-jid"].value,i<r?1:-1}).each(function(){var t=e(this).detach();e(".roster-contacts dt[data-group=Ungrouped]").after(t)})}function o(e,t,n){s(e,{flag:"1",last_mgs:t,avatar:c(n)})}function s(e,t){localStorage.setItem(e,JSON.stringify(t))}function a(e){localStorage.removeItem(e)}function u(e){var t=localStorage.getItem(e);return m.isEmpty(t)?"":JSON.parse(t)}function l(){var e={};if(m.isEmpty(localStorage))return"";for(var t in localStorage)/^guest-/.test(t)&&(e[t.replace(/^ /,"")]=JSON.parse(localStorage.getItem(t)));return e}function c(e){var t,n=l();return n?(t=m.map(n,"avatar").length,t=Number(t)%49+1,t<10&&(t="0"+t.toString()),t.toString()):"01"}function d(){var t=l();t&&e.each(t,function(t,n){var i=new Date,r=new Date(n.last_mgs),o=Math.floor((i-r)/6e4),s=t.replace(/^guest-/,""),a=_(n.last_mgs).fromNow();e('[sd-data-raw-jid="'+s+'"] a.open-chat span.sd-time').text(a),e('[sd-data-raw-jid="'+s+'"] a.open-chat span.sd-time').attr("sd-data-time",o)})}function h(e){var t=e.slice(0,-3);return t}var f=t.env.Strophe,p=(t.env.utils,t.env.$build,t.env.$iq),m=t.env._,_=t.env.moment,g=(t.env.Backbone,"0");f.addNamespace("PUSH","urn:xmpp:push:0"),window.setInterval(d,6e4),t.plugins.add("sd-user",{overrides:{XMPPStatusView:{events:{"change .switch.online":"setStatus"},render:function(){var e=this.__super__._converse.__,t=this.model.get("status"),n="online"==t?"checked":"";this.$el.html('<div class="chat_en_desc">'+e("I am visible online")+'</div>                        <label class="switch onlineswitch online"><input type="checkbox" '+n+'><span class="slider round"></span></label>')},setStatus:function(t){t.preventDefault();var n="logout",i="0";t.target.checked&&(n="online",i="1"),this.model.setStatus(n);var r={jid:r2c_info.username,r2c_online:i};e.ajax({method:"POST",url:"/status/",data:JSON.stringify(r),beforeSend:function(){e(".loader-wrapper").css("display","block")},complete:function(t){e(".loader-wrapper").css("display","none")}})}},RosterContactView:{render:function(){var t=this.__super__.render.apply(this,arguments);t.$el.attr("sd-data-raw-jid",t.model.attributes.jid);var n="",i=t.model.attributes.jid,r="guest-"+i,o="",s=u(r);if(s){var a=t.model.attributes.url,l=e("<div>",{class:"sd-avatar-contact-list"});l.css("background-image",'url("ring2chat/image/avatar/'+s.avatar+'.png")'),t.$el.find("a.open-chat").prepend(l),"0"!==s.flag&&(n="sd-flag-icon-misscall"),a=a?h(a):"",o+='<span class="sd-site">'+a+"</span>"}return o+='<span class="sd-next"></span><span class="sd-flag '+n+'"></span><span class="sd-time"></span>',t.$el.find("a.open-chat span.contact-name").after(o),t.$el.find("a.open-chat .sd-flag-icon-misscall").parent().css("background-color","#fff4d1"),d(),t},isGroupCollapsed:function(){return!1},openChat:function(t){this.__super__.openChat.apply(this,arguments);var n=this.model.attributes,i=this.model.attributes.jid,r="guest-"+i,o=u(r);o&&(o.flag="0",s(r,o)),e(".chat-title").html(n.fullname),e(".chat-title").append('<div class="sd-site">'+h(n.url)+"</div>"),e(".chat-title").prepend('<span class="sd-status-icon icon-'+n.chat_status+'"></span>')}},RosterFilterView:{isActive:function(){return!1}},RosterGroupView:{initialize:function(){var e=this;e.model.contacts.on("add",e.addContact,this),e.model.contacts.on("change:subscription",e.onContactSubscriptionChange,this),e.model.contacts.on("change:requesting",e.onContactRequestChange,this),e.model.contacts.on("change:chat_status",function(e){this.positionContact(e).render()},this),e.model.contacts.on("destroy",e.onRemove,this),e.model.contacts.on("remove",e.onRemove,this),this.__super__._converse.roster.on("change:groups",e.onContactGroupChange,this)},positionContact:function(e){var t=this.get(e.get("id")),n=this.model.contacts.indexOf(e);return 0===n?this.$el.after(t.$el):n===this.model.contacts.length-1?this.$el.nextUntil("dt").last().after(t.$el):this.$el.nextUntil("dt").eq(n).before(t.$el),r(),t}},ChatBoxView:{events:{"click .chat-head-chatbox":"close"},close:function(){this.__super__.close.apply(this,arguments),e("body").removeClass("sd-chat-open")},getExtraMessageClasses:function(e){var t=e.delayed&&"delayed"||"";return t+" div-chat-msg-"+e.sender},renderAvatar:function(){this.__super__.renderAvatar.apply(this,arguments);var t=this.model.attributes.jid,n="guest-"+t,i=u(n),r=this.model.attributes.url;if(i){var o=e("<div>",{class:"sd-avatar"});o.css("background-image",'url("ring2chat/image/avatar/'+i.avatar+'.png")'),this.$el.find(".chat-title").before(o)}var s=this.model.get("chat_status")||"offline";r=r?h(r):"",this.$el.find(".user").after('<div class="sd-site">'+r+"</div>"),this.$el.find(".chat-title").prepend('<span class="sd-status-icon icon-'+s+'"></span>')},onChatStatusChanged:function(t){var n=t.get("chat_status");this.__super__._converse.__;e(".sd-status-icon").removeClass(function(e,t){return(t.match(/\bicon-\S+/g)||[]).join(" ")}).addClass("icon-"+n)},handleChatStateMessage:function(e){var t=this.__super__._converse,n=this.__super__._converse.__;e.get("chat_state")===t.COMPOSING?("me"===e.get("sender")?this.showStatusNotification(n("Typing from another device")):this.showStatusNotification("••• "+n("is typing")),this.clear_status_timeout=window.setTimeout(this.clearStatusNotification.bind(this),3e4)):e.get("chat_state")===t.PAUSED?"me"===e.get("sender")?this.showStatusNotification(n("Stopped typing on the other device")):this.showStatusNotification("••• "+n("has stopped typing")):m.includes([t.INACTIVE,t.ACTIVE],e.get("chat_state"))?this.$content.find("div.chat-event").remove():e.get("chat_state")===t.GONE&&this.showStatusNotification("••• "+n("has gone away"))},insertDayIndicator:function(e,t){var n=_(e).startOf("day"),r=t?this.$content.prepend:this.$content.append;r.call(this.$content,i({isodate:n.format(),datestring:n.format("dddd Do MMMM")}))}},ChatBox:{incrementUnreadMsgCounter:function(e){m.isNull(e.querySelector("body"))||"function"==typeof mobileDeviceChatHook&&mobileDeviceChatHook({type:"1",unread:"1"})}},RosterContacts:{comparator:function(){}},RosterContact:{addResource:function(e){var t=e.getAttribute("from"),n=m.propertyOf(e.querySelector("show"))("textContent")||"online",i=f.getResourceFromJid(t),r=m.propertyOf(e.querySelector("priority"))("textContent")||0,o=e.querySelector('delay[xmlns="'+f.NS.DELAY+'"]'),s=m.isNull(o)?_().format():_(o.getAttribute("stamp")).format();this.__super__._converse.__;r=m.isNaN(parseInt(r,10))?0:parseInt(r,10);var a=m.isObject(this.get("resources"))?this.get("resources"):{};a[i]={priority:r,status:n,timestamp:s};var u={resources:a};return u.chat_status=n,this.save(u),a},removeResource:function(e){var t=this.get("resources");m.isObject(t)?delete t[e]:t={},this.save({resources:t,chat_status:"offline"})}},RosterView:{showHideFilter:function(){this.__super__.showHideFilter.apply(this,arguments);var t=(this.__super__._converse,this.__super__._converse.__);r(),e("a.open-chat").length<1?e(".roster-contacts").append('<div class="no-contact">'+t("You have not received any message yet.")+" "+t("You can test the contact page on your published site.")+"</div>"):e(".no-contact").remove()},updateChatBox:function(t){this.__super__.updateChatBox.apply(this,arguments);var n=this.__super__._converse.__;return"offline"==t.get("chat_status")?e(".sendXMPPMessage").html('<div class="offline-mgs">'+n("This person is not online anymore.")+"</div>"):e(".sendXMPPMessage").html('<textarea type="text" class="chat-textarea chat-textarea-send-button" placeholder="'+n("Your message")+'"></textarea><button type="submit" class="pure-button send-button"></button>'),this}},ControlBoxView:{renderLoginPanel:function(){var t=this.__super__._converse,i=t.disconnection_cause;if(r2c_info.bgActive&&!m.isUndefined(i)&&i===f.Status.AUTHFAIL)return r2c_info.bgActive=!1,void("function"==typeof mobileDeviceChatHook&&mobileDeviceChatHook({type:"5"}));if("r2clogout"===t.disconnection_reason)return void(t.disconnection_reason="");if(!t.connection.authenticated){if(r2c_info.username&&r2c_info.password){e(".flyout").append(n);var r=r2c_info.username+"@"+r2c_info.domain;r2c_info.bgActive&&(t.connection.reconnecting=!0),this.uauthenticate(r,r2c_info.password)}return this}},uauthenticate:function(e,t){var n=this.__super__._converse;n.connection.reconnecting||n.connection.reset(),n.connection.connect(e,t,n.onConnectStatusChanged)}},onConnected:function(){this.__super__.onConnected.apply(this,arguments),r2c_info.enablePush=this.enablePush.bind(this),r2c_info.disablePush=this.disablePush.bind(this),r2c_info.sendCSIFromApp=this.sendCSIFromApp.bind(this),r2c_info.r2cLogout=this.r2cLogout.bind(this),r2c_info.closeChatbox=this.closeChatbox.bind(this),r2c_info.connWarn=this.connWarn.bind(this),"function"==typeof mobileDeviceChatHook&&mobileDeviceChatHook({type:"0"})},enablePush:function(t,n,i){if(t&&("ios"===i||"android"===i)){var r=this.__super__._converse,o=p({type:"set",id:r.connection.getUniqueId()}).c("enable",{xmlns:f.NS.PUSH,jid:r.bare_jid+"/"+n}).c("x",{xmlns:f.NS.XFORM}).c("field",{var:"FORM_TYPE"}).c("value",{},"http://jabber.org/protocol/pubsub#publish-options").up().c("field",{var:"token"}).c("value",{},t).up().c("field",{var:"type"}).c("value",{},i);r.connection.send(o),e(".loader-wrapper").css("display","block"),(R2CPUSH="1")&&e(".loader-wrapper").css("display","none")}},disablePush:function(t){var n=this.__super__._converse,i=p({type:"set",id:n.connection.getUniqueId()}).c("disable",{xmlns:f.NS.PUSH,jid:n.bare_jid+"/"+t});n.connection.send(i),e(".loader-wrapper").css("display","block"),(R2CPUSH="0")&&e(".loader-wrapper").css("display","none")},sendCSIFromApp:function(e){var t=this.__super__._converse;t.connection.authenticated&&(e?(t.connection.resume(),t.sendCSI(t.ACTIVE)):(r2c_info.bgActive=!0,t.sendCSI(t.INACTIVE),t.connection.pause()))},r2cLogout:function(){var t=this.__super__._converse;t.connection.authenticated&&(m.isUndefined(t.connection)||(t.connection.disconnect("r2clogout"),e("#conversejs").remove()))},closeChatbox:function(){this.__super__._converse.chatboxviews.closeAllChatBoxes(),e("body").removeClass("sd-chat-open")},connWarn:function(){var t=this.__super__._converse.__;document.getElementById("msg1").innerHTML=t("Communication error. Please check your internet connection."),document.getElementById("msg2").innerHTML="",e("#conversejs").remove()},onSDMessage:function(e){var t=e.querySelector("delay"),n=e.querySelector("message");if(t&&n){var i=n.getAttribute("from").split("/")[0],r=n.getAttribute("to").split("/")[0],a=r==e.getAttribute("to").split("/")[0],l=a?i:r,c="guest-"+l,d=_(t.getAttribute("stamp")).format(),h=u(c);a?h?h.last_mgs<d&&(s(c,{flag:"1",last_mgs:d,avatar:h.avatar}),g="1"):(o(c,d,i),g="1"):h||o(c,d,i),"1"!==g&&(g=h.flag,"1"===g&&"function"==typeof mobileDeviceChatHook&&mobileDeviceChatHook({type:"1",unread:g}))}return!0},SDFetchLastMessage:function(e,t){var n=this;return this.__super__._converse.connection.sendIQ(e,function(){t.apply(n,arguments)})},SDFetchMessages:function(t){var n=new e.Deferred;return this.SDFetchLastMessage(t,n.resolve),n.promise()},removeUnusedRoster:function(){var t=this.__super__._converse,n=l(),i=new Date;n&&e.each(n,function(e,n){var r=new Date(n.last_mgs),o=Math.floor((i-r)/864e5);if(o>30){var s=e.replace("guest-",""),u=t.roster._byId[s];u&&t.roster._byId[s].destroy(),
a(s)}})}},initialize:function(){var t=this._converse,n=t.__;t.on("roster",function(e){this.removeUnusedRoster()}),t.on("rosterContactsFetched",function(){var i="",r=[],o=this,s=0;t.connection.addHandler(this.onSDMessage,null,"message",null),m.each(t.api.contacts.get(),function(e){i=p({type:"set",id:t.connection.getUniqueId(e.jid)}).c("query",{xmlns:f.NS.MAM}).c("x",{xmlns:f.NS.XFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value",{},"urn:xmpp:mam:2").up().c("field",{var:"with"}).c("value",{},e.jid).up().up().c("set",{xmlns:f.NS.RSM}).c("max",{},"1").c("before"),r[s]=o.SDFetchMessages(i),s++}),e.when(r).done(function(){e("#converse-roster").after('<div class="roster-footer">'+n("Messages are kept for 30 days.")+"</div>"),e.ajax({type:"GET",url:"/status/chat_online/"+r2c_info.username,success:function(e){var n="logout";1==e&&(n="online"),t.xmppstatus.setStatus(n)}})})}),t.on("messageAdded",function(t){if(void 0!=t.message.attributes.message){var n=t.chatbox.attributes.jid,i="guest-"+n,a=u(i),l=_(t.message.attributes.time).format();a?a.last_mgs<l&&("them"==t.message.attributes.sender&&(e(".chatbox").hasClass("hidden")?(a.flag="1",e('[sd-data-raw-jid="'+n+'"]').find("a.open-chat span.contact-name").after('<span class="sd-flag sd-flag-icon-misscall"></span>')):a.flag="0"),a.last_mgs=l,s(i,a)):o(i,l,n),void 0!=e(".chat-content")[0]&&e(".chat-content").animate({scrollTop:e(".chat-content")[0].scrollHeight-300},1),setTimeout(function(){r()},1e3)}}),t.on("chatBoxFocused",function(){e("body").addClass("sd-chat-open")})}})}),define("tpl!sd_guest_panel",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<form class="pure-form pure-form-stacked converse-form" id="r2c-login" method="post">\n    <div id="sd_main_div">\n        <div class="chatwithus">\n            '+__e(label_name_title)+'<br>\n            <input  class="ccformfield2" name="sd_name" placeholder="'+__e(placeholder_name)+'" type="text" maxlength="50">\n            <br>\n            <br>'+__e(label_question)+'<br>\n            <textarea  class="ccformfield2" name="sd_msg" class="ask" rows="5" placeholder="'+__e(placeholder_question)+'"></textarea><br>\n            <input class="ccbtn2" type="submit" value="'+__e(button_chat)+'">\n        </div>\n    </div>\n</form>\n';return __p}}),define("tpl!sd_guest_errormge",["lodash"],function(_){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<form id="flyout box-flyout">\n    <div class="chat-head chat-head-chatbox">\n        <div class="title-chat">\n            <div id="contact" name="contact">\n                '+(null==(__t=error_head)?"":__t)+'\n            </div>\n        </div>\n    </div>\n            <div class="chat-body">\n                <div class="color-text-error">\n                    <ul> '+(null==(__t=error_body)?"":__t)+" </ul>\n                    <ul> "+(null==(__t=error_body2)?"":__t)+" </ul>\n                </div>\n            </div>\n</form> \n";return __p}}),function(e,t){define("sd-guest",["jquery.noconflict","converse-core","tpl!sd_guest_panel","tpl!spinner","tpl!sd_guest_errormge","tpl!new_day","converse-chatview","converse-controlbox"],t)}(this,function(e,t,n,i,r,o){"use strict";var s=(t.env.Strophe,t.env.utils,t.env.$build,t.env.$iq),a=t.env._,u=t.env.moment,l=t.env.Backbone;t.plugins.add("sd-guest",{overrides:{checkSubscribed:function(t){var n=e(t).attr("type"),i=this.__super__._converse;if("subscribed"===n){var r=i.api.chats.open(visitor_info.userJID);"undefined"!=typeof r&&""!==visitor_info.questionMsg&&r.onMessageSubmitted(visitor_info.questionMsg)}},onUserRoster:function(t){var n=e(t).attr("from"),i=this.__super__._converse;n.indexOf(visitor_info.userJID)&&i.api.chats.open(visitor_info.userJID)},RosterContactView:{renderRosterItem:function(e){e.attributes.fullname.search(e.attributes.jid)<0&&(e.attributes.fullname=e.attributes.fullname+" - "+e.attributes.jid),this.__super__.renderRosterItem.apply(this,arguments)}},ChatBoxViews:{_ensureElement:function(){this.__super__._ensureElement.apply(this,arguments);var t=this.__super__._converse,n=t.__;e("#conversejs").before('<div class="com_block_title">'+n("Chat")+"</div>")}},ChatBoxView:{getExtraMessageClasses:function(e){var t=e.delayed&&"delayed"||"";return t+" div-chat-msg-"+e.sender},onChatStatusChanged:function(e){var t=e.get("chat_status"),n=this.__super__._converse.__;this.$el.is(":visible")&&("offline"===t?this.showStatusNotification("••• "+n("has gone offline")):"away"===t?this.showStatusNotification("••• "+n("has gone away")):"dnd"===t?this.showStatusNotification("••• "+n("is busy")):"online"===t&&this.$el.find("div.chat-event").remove())},handleChatStateMessage:function(e){var t=this.__super__._converse,n=this.__super__._converse.__;e.get("chat_state")===t.COMPOSING?("me"===e.get("sender")?this.showStatusNotification(n("Typing from another device")):this.showStatusNotification("••• "+n("is typing")),this.clear_status_timeout=window.setTimeout(this.clearStatusNotification.bind(this),3e4)):e.get("chat_state")===t.PAUSED?"me"===e.get("sender")?this.showStatusNotification(n("Stopped typing on the other device")):this.showStatusNotification("••• "+n("has stopped typing")):a.includes([t.INACTIVE,t.ACTIVE],e.get("chat_state"))?this.$content.find("div.chat-event").remove():e.get("chat_state")===t.GONE&&this.showStatusNotification("••• "+n("has gone away"))},insertDayIndicator:function(e,t){var n=u(e).startOf("day"),i=t?this.$content.prepend:this.$content.append;i.call(this.$content,o({isodate:n.format(),datestring:n.format("dddd Do MMMM")}))}},onConnected:function(){this.__super__.onConnected.apply(this,arguments);var t=this.__super__._converse;visitor_info.isOldUsr?t.connection.addHandler(this.onUserRoster.bind(this),null,"presence",null):(t.connection.addHandler(this.checkSubscribed.bind(this),null,"presence","subscribed"),t.roster.addAndSubscribe(visitor_info.userJID)),e("#controlbox").addClass("hidden")},ControlBoxView:{renderGuestPanel:function(){var e=this.__super__._converse;if(e.connection.authenticated)return void(visitor_info.isOldUsr=!0);this.sdguestpanel=new e.sdGuestPanel({$parent:this.$el.find(".controlbox-panes"),model:this.model});var t=e.getVisitorCookie();return""!=t?(visitor_info.isOldUsr=!0,visitor_info.isNewLogin=!0,t.uid=encodeURI(t.uid),this.sdguestpanel.authenticate(t.uid,t.token),this.sdguestpanel.renderLoading()):this.sdguestpanel.render(),this},renderGuestError:function(){var e=this.__super__._converse;return this.sderrguestpanel=new e.guestErrormge({$parent:this.$el.find(".controlbox-panes"),model:this.model}),this.sderrguestpanel.render(),this},renderLoginPanel:function(){var t=(this.__super__._converse,this),n=visitor_info.userJID.split("@")[0];e.ajax({type:"GET",url:"/status/chat_online/"+n,success:function(e){1==e?t.renderGuestPanel():t.renderGuestError()}})}},RosterContacts:{presenceHandler:function(t){var n=this.__super__._converse;this.__super__.presenceHandler.apply(this,arguments);var i=a.propertyOf(t.querySelector("show"))("textContent")||n.roster.get(visitor_info.userJID).attributes.chat_status;"logout"==i?(n.chatboxviews.get("controlbox").renderGuestError(),e("#guest_errormge").parents(".chatbox").removeClass("hidden"),e(".chat-content").parents(".chatbox").addClass("hidden")):"online"==i&&(e("#guest_errormge").parents(".chatbox").addClass("hidden"),e(".chat-content").parents(".chatbox").removeClass("hidden"))}}},initialize:function(){var t=this._converse,o=t.__;t.templates.sd_guest_errormge=r,t.guestErrormge=l.View.extend({tagName:"div",id:"guest_errormge",className:"controlbox-pane",initialize:function(e){this.$parent=e.$parent,this.$tabs=e.$parent.parent().find("#controlbox-tabs")},render:function(){return this.$parent.append(this.$el.html(r({error_head:o("Chat with us"),error_body:o("I am not available right now for a Chat."),error_body2:o("Please use the form above to send me an email. I will get back to you rapidly.")}))),this}}),t.templates.sd_guest_panel=n,t.sdGuestPanel=l.View.extend({tagName:"div",id:"sd-guest",className:"controlbox-pane",events:{"submit form#r2c-login":"sdRegistrationHook"},initialize:function(e){this.$parent=e.$parent,this.$tabs=e.$parent.parent().find("#controlbox-tabs")},render:function(){return this.$parent.append(this.$el.html(n({label_name_title:o("What is your name?"),placeholder_name:o("Your name"),label_question:o("Please ask your question"),placeholder_question:o("Your text"),button_chat:o("Let's chat")}))),this},renderLoading:function(){return this.$parent.append(this.$el.html(i())),this},authenticate:function(e,n){var i=e+"@"+visitor_info.domain+"/"+document.domain+"-"+t.locale;return t.connection.reset(),t.connection.connect(i,n,t.onConnectStatusChanged),!1},sdRegistrationHook:function(n){var i=e(n.target),r=i.find("input[name=sd_name]").val();if(visitor_info.questionMsg=i.find("textarea[name=sd_msg]").val(),!r)return void alert(o("What is your name?"));if(!visitor_info.questionMsg)return void alert(o("Please ask your question"));r.length>50&&(r=r.substring(0,50));var s=encodeURI(r)+"_"+(+new Date).toString(36);return this.sdregisterpanel=new t.sdRegisterPanel({$parent:e(".controlbox-panes"),model:this.model,domain:visitor_info.domain,username:s,password:Math.random().toString(36).slice(2),fullname:r}),this.sdregisterpanel.render(),!1}}),t.disconnect=function(){delete t.connection.reconnecting,t.connection.reset(),t.emit("disconnected")},t.on("rosterContactsFetched",function(){if(void 0!==t.xmppstatus.get("fullname")&&!t.xmppstatus.get("url")){var e=s({type:"set",id:t.connection.getUniqueId()}).c("vCard",{xmlns:"vcard-temp"}).c("URL",{},document.domain+"-"+t.locale).c("FN",{},t.xmppstatus.get("fullname"));t.connection.send(e)}}),t.on("messageSend",function(){if(visitor_info.isNewLogin){var e=t.getVisitorCookie();t.saveVisitorCookie(e.uid,e.token)}})}})}),"undefined"!=typeof define&&define("converse",["converse-core","converse-chatview","converse-controlbox","converse-mam","converse-vcard","converse-ping","converse-singleton","sd-register","sd-user","sd-guest"],function(e){return e}),require("converse")});